generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model CategoryList {
  id         Int       @id @default(autoincrement())
  file_no    String    @unique(map: "uq_category_file_no") @db.VarChar(100)
  category   String    @db.VarChar(255)
  created_at DateTime? @default(now()) @db.Timestamptz(6)
  updated_at DateTime? @default(now()) @db.Timestamptz(6)

  @@map("category_list")
}

model FileList {
  id              Int                      @id @default(autoincrement())
  file_no         String                   @db.VarChar(100)
  category        String                   @db.VarChar(150)
  title           String                   @db.VarChar(255)
  note            String?
  doc1            String?                  @db.VarChar(150)
  doc2            String?                  @db.VarChar(255)
  doc3            String?                  @db.VarChar(255)
  doc4            String?                  @db.VarChar(255)
  doc5            String?                  @db.VarChar(255)
  doc6            String?                  @db.VarChar(255)
  entry_date      String?                  @db.VarChar(50)
  entry_date_real DateTime?                @db.Date
  search_vector   Unsupported("tsvector")?
  created_at      DateTime?                @default(now()) @db.Timestamptz(6)
  updated_at      DateTime?                @updatedAt @db.Timestamptz(6)
  note_plain_text String?

  @@index([category], map: "idx_file_list_category")
  @@index([entry_date_real], map: "idx_file_list_entry_date")
  @@index([file_no], map: "idx_file_list_file_no")
  @@index([search_vector], map: "idx_search_vector", type: Gin)
  @@map("file_list")
}

model user {
  id            Int       @id @default(autoincrement())
  username      String    @unique @db.VarChar(100)
  password_hash String    @db.VarChar(255)
  role          UserRole  @default(staff)
  is_active     Boolean?  @default(true)
  last_login    DateTime? @db.Timestamptz(6)
  created_at    DateTime? @default(now()) @db.Timestamptz(6)
}

enum UserRole {
  admin
  staff

  @@map("user_role")
}
