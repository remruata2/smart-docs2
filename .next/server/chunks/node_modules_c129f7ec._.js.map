{"version":3,"sources":["../../../node_modules/ieee754/index.js","../../../node_modules/token-types/lib/index.js","../../../node_modules/%40borewit/text-codec/lib/index.js","../../../node_modules/strtok3/lib/stream/Errors.js","../../../node_modules/strtok3/lib/stream/Deferred.js","../../../node_modules/strtok3/lib/stream/AbstractStreamReader.js","../../../node_modules/strtok3/lib/stream/StreamReader.js","../../../node_modules/strtok3/lib/stream/WebStreamReader.js","../../../node_modules/strtok3/lib/stream/WebStreamByobReader.js","../../../node_modules/strtok3/lib/stream/WebStreamDefaultReader.js","../../../node_modules/strtok3/lib/stream/WebStreamReaderFactory.js","../../../node_modules/strtok3/lib/AbstractTokenizer.js","../../../node_modules/strtok3/lib/ReadStreamTokenizer.js","../../../node_modules/strtok3/lib/BufferTokenizer.js","../../../node_modules/strtok3/lib/BlobTokenizer.js","../../../node_modules/strtok3/lib/core.js","../../../node_modules/%40tokenizer/inflate/lib/ZipHandler.js","../../../node_modules/%40tokenizer/inflate/lib/ZipToken.js","../../../node_modules/%40tokenizer/inflate/lib/GzipHandler.js","../../../node_modules/uint8array-extras/index.js","../../../node_modules/file-type/util.js","../../../node_modules/file-type/supported.js","../../../node_modules/file-type/core.js"],"sourcesContent":["/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","import * as ieee754 from 'ieee754';\nimport { textDecode } from \"@borewit/text-codec\";\n// Primitive types\nfunction dv(array) {\n    return new DataView(array.buffer, array.byteOffset);\n}\n/*\n * 8-bit unsigned integer\n */\nexport const UINT8 = {\n    len: 1,\n    get(array, offset) {\n        return dv(array).getUint8(offset);\n    },\n    put(array, offset, value) {\n        dv(array).setUint8(offset, value);\n        return offset + 1;\n    }\n};\n/**\n * 16-bit unsigned integer, Little Endian byte order\n */\nexport const UINT16_LE = {\n    len: 2,\n    get(array, offset) {\n        return dv(array).getUint16(offset, true);\n    },\n    put(array, offset, value) {\n        dv(array).setUint16(offset, value, true);\n        return offset + 2;\n    }\n};\n/**\n * 16-bit unsigned integer, Big Endian byte order\n */\nexport const UINT16_BE = {\n    len: 2,\n    get(array, offset) {\n        return dv(array).getUint16(offset);\n    },\n    put(array, offset, value) {\n        dv(array).setUint16(offset, value);\n        return offset + 2;\n    }\n};\n/**\n * 24-bit unsigned integer, Little Endian byte order\n */\nexport const UINT24_LE = {\n    len: 3,\n    get(array, offset) {\n        const dataView = dv(array);\n        return dataView.getUint8(offset) + (dataView.getUint16(offset + 1, true) << 8);\n    },\n    put(array, offset, value) {\n        const dataView = dv(array);\n        dataView.setUint8(offset, value & 0xff);\n        dataView.setUint16(offset + 1, value >> 8, true);\n        return offset + 3;\n    }\n};\n/**\n * 24-bit unsigned integer, Big Endian byte order\n */\nexport const UINT24_BE = {\n    len: 3,\n    get(array, offset) {\n        const dataView = dv(array);\n        return (dataView.getUint16(offset) << 8) + dataView.getUint8(offset + 2);\n    },\n    put(array, offset, value) {\n        const dataView = dv(array);\n        dataView.setUint16(offset, value >> 8);\n        dataView.setUint8(offset + 2, value & 0xff);\n        return offset + 3;\n    }\n};\n/**\n * 32-bit unsigned integer, Little Endian byte order\n */\nexport const UINT32_LE = {\n    len: 4,\n    get(array, offset) {\n        return dv(array).getUint32(offset, true);\n    },\n    put(array, offset, value) {\n        dv(array).setUint32(offset, value, true);\n        return offset + 4;\n    }\n};\n/**\n * 32-bit unsigned integer, Big Endian byte order\n */\nexport const UINT32_BE = {\n    len: 4,\n    get(array, offset) {\n        return dv(array).getUint32(offset);\n    },\n    put(array, offset, value) {\n        dv(array).setUint32(offset, value);\n        return offset + 4;\n    }\n};\n/**\n * 8-bit signed integer\n */\nexport const INT8 = {\n    len: 1,\n    get(array, offset) {\n        return dv(array).getInt8(offset);\n    },\n    put(array, offset, value) {\n        dv(array).setInt8(offset, value);\n        return offset + 1;\n    }\n};\n/**\n * 16-bit signed integer, Big Endian byte order\n */\nexport const INT16_BE = {\n    len: 2,\n    get(array, offset) {\n        return dv(array).getInt16(offset);\n    },\n    put(array, offset, value) {\n        dv(array).setInt16(offset, value);\n        return offset + 2;\n    }\n};\n/**\n * 16-bit signed integer, Little Endian byte order\n */\nexport const INT16_LE = {\n    len: 2,\n    get(array, offset) {\n        return dv(array).getInt16(offset, true);\n    },\n    put(array, offset, value) {\n        dv(array).setInt16(offset, value, true);\n        return offset + 2;\n    }\n};\n/**\n * 24-bit signed integer, Little Endian byte order\n */\nexport const INT24_LE = {\n    len: 3,\n    get(array, offset) {\n        const unsigned = UINT24_LE.get(array, offset);\n        return unsigned > 0x7fffff ? unsigned - 0x1000000 : unsigned;\n    },\n    put(array, offset, value) {\n        const dataView = dv(array);\n        dataView.setUint8(offset, value & 0xff);\n        dataView.setUint16(offset + 1, value >> 8, true);\n        return offset + 3;\n    }\n};\n/**\n * 24-bit signed integer, Big Endian byte order\n */\nexport const INT24_BE = {\n    len: 3,\n    get(array, offset) {\n        const unsigned = UINT24_BE.get(array, offset);\n        return unsigned > 0x7fffff ? unsigned - 0x1000000 : unsigned;\n    },\n    put(array, offset, value) {\n        const dataView = dv(array);\n        dataView.setUint16(offset, value >> 8);\n        dataView.setUint8(offset + 2, value & 0xff);\n        return offset + 3;\n    }\n};\n/**\n * 32-bit signed integer, Big Endian byte order\n */\nexport const INT32_BE = {\n    len: 4,\n    get(array, offset) {\n        return dv(array).getInt32(offset);\n    },\n    put(array, offset, value) {\n        dv(array).setInt32(offset, value);\n        return offset + 4;\n    }\n};\n/**\n * 32-bit signed integer, Big Endian byte order\n */\nexport const INT32_LE = {\n    len: 4,\n    get(array, offset) {\n        return dv(array).getInt32(offset, true);\n    },\n    put(array, offset, value) {\n        dv(array).setInt32(offset, value, true);\n        return offset + 4;\n    }\n};\n/**\n * 64-bit unsigned integer, Little Endian byte order\n */\nexport const UINT64_LE = {\n    len: 8,\n    get(array, offset) {\n        return dv(array).getBigUint64(offset, true);\n    },\n    put(array, offset, value) {\n        dv(array).setBigUint64(offset, value, true);\n        return offset + 8;\n    }\n};\n/**\n * 64-bit signed integer, Little Endian byte order\n */\nexport const INT64_LE = {\n    len: 8,\n    get(array, offset) {\n        return dv(array).getBigInt64(offset, true);\n    },\n    put(array, offset, value) {\n        dv(array).setBigInt64(offset, value, true);\n        return offset + 8;\n    }\n};\n/**\n * 64-bit unsigned integer, Big Endian byte order\n */\nexport const UINT64_BE = {\n    len: 8,\n    get(array, offset) {\n        return dv(array).getBigUint64(offset);\n    },\n    put(array, offset, value) {\n        dv(array).setBigUint64(offset, value);\n        return offset + 8;\n    }\n};\n/**\n * 64-bit signed integer, Big Endian byte order\n */\nexport const INT64_BE = {\n    len: 8,\n    get(array, offset) {\n        return dv(array).getBigInt64(offset);\n    },\n    put(array, offset, value) {\n        dv(array).setBigInt64(offset, value);\n        return offset + 8;\n    }\n};\n/**\n * IEEE 754 16-bit (half precision) float, big endian\n */\nexport const Float16_BE = {\n    len: 2,\n    get(dataView, offset) {\n        return ieee754.read(dataView, offset, false, 10, this.len);\n    },\n    put(dataView, offset, value) {\n        ieee754.write(dataView, value, offset, false, 10, this.len);\n        return offset + this.len;\n    }\n};\n/**\n * IEEE 754 16-bit (half precision) float, little endian\n */\nexport const Float16_LE = {\n    len: 2,\n    get(array, offset) {\n        return ieee754.read(array, offset, true, 10, this.len);\n    },\n    put(array, offset, value) {\n        ieee754.write(array, value, offset, true, 10, this.len);\n        return offset + this.len;\n    }\n};\n/**\n * IEEE 754 32-bit (single precision) float, big endian\n */\nexport const Float32_BE = {\n    len: 4,\n    get(array, offset) {\n        return dv(array).getFloat32(offset);\n    },\n    put(array, offset, value) {\n        dv(array).setFloat32(offset, value);\n        return offset + 4;\n    }\n};\n/**\n * IEEE 754 32-bit (single precision) float, little endian\n */\nexport const Float32_LE = {\n    len: 4,\n    get(array, offset) {\n        return dv(array).getFloat32(offset, true);\n    },\n    put(array, offset, value) {\n        dv(array).setFloat32(offset, value, true);\n        return offset + 4;\n    }\n};\n/**\n * IEEE 754 64-bit (double precision) float, big endian\n */\nexport const Float64_BE = {\n    len: 8,\n    get(array, offset) {\n        return dv(array).getFloat64(offset);\n    },\n    put(array, offset, value) {\n        dv(array).setFloat64(offset, value);\n        return offset + 8;\n    }\n};\n/**\n * IEEE 754 64-bit (double precision) float, little endian\n */\nexport const Float64_LE = {\n    len: 8,\n    get(array, offset) {\n        return dv(array).getFloat64(offset, true);\n    },\n    put(array, offset, value) {\n        dv(array).setFloat64(offset, value, true);\n        return offset + 8;\n    }\n};\n/**\n * IEEE 754 80-bit (extended precision) float, big endian\n */\nexport const Float80_BE = {\n    len: 10,\n    get(array, offset) {\n        return ieee754.read(array, offset, false, 63, this.len);\n    },\n    put(array, offset, value) {\n        ieee754.write(array, value, offset, false, 63, this.len);\n        return offset + this.len;\n    }\n};\n/**\n * IEEE 754 80-bit (extended precision) float, little endian\n */\nexport const Float80_LE = {\n    len: 10,\n    get(array, offset) {\n        return ieee754.read(array, offset, true, 63, this.len);\n    },\n    put(array, offset, value) {\n        ieee754.write(array, value, offset, true, 63, this.len);\n        return offset + this.len;\n    }\n};\n/**\n * Ignore a given number of bytes\n */\nexport class IgnoreType {\n    /**\n     * @param len number of bytes to ignore\n     */\n    constructor(len) {\n        this.len = len;\n    }\n    // ToDo: don't read, but skip data\n    get(_array, _off) {\n    }\n}\nexport class Uint8ArrayType {\n    constructor(len) {\n        this.len = len;\n    }\n    get(array, offset) {\n        return array.subarray(offset, offset + this.len);\n    }\n}\n/**\n * Consume a fixed number of bytes from the stream and return a string with a specified encoding.\n * Supports all encodings supported by TextDecoder, plus 'windows-1252'.\n */\nexport class StringType {\n    constructor(len, encoding) {\n        this.len = len;\n        this.encoding = encoding;\n    }\n    get(data, offset = 0) {\n        const bytes = data.subarray(offset, offset + this.len);\n        return textDecode(bytes, this.encoding);\n    }\n}\n/**\n * ANSI Latin 1 String using Windows-1252 (Code Page 1252)\n * Windows-1252 is a superset of ISO 8859-1 / Latin-1.\n */\nexport class AnsiStringType extends StringType {\n    constructor(len) {\n        super(len, 'windows-1252');\n    }\n}\n","// text-polyfill.ts\n// Minimal encode/decode for utf-8, utf-16le, ascii, latin1, windows-1252\nconst WINDOWS_1252_EXTRA = {\n    0x80: \"€\", 0x82: \"‚\", 0x83: \"ƒ\", 0x84: \"„\", 0x85: \"…\", 0x86: \"†\",\n    0x87: \"‡\", 0x88: \"ˆ\", 0x89: \"‰\", 0x8a: \"Š\", 0x8b: \"‹\", 0x8c: \"Œ\",\n    0x8e: \"Ž\", 0x91: \"‘\", 0x92: \"’\", 0x93: \"“\", 0x94: \"”\", 0x95: \"•\",\n    0x96: \"–\", 0x97: \"—\", 0x98: \"˜\", 0x99: \"™\", 0x9a: \"š\", 0x9b: \"›\",\n    0x9c: \"œ\", 0x9e: \"ž\", 0x9f: \"Ÿ\",\n};\nconst WINDOWS_1252_REVERSE = {};\nfor (const [code, char] of Object.entries(WINDOWS_1252_EXTRA)) {\n    WINDOWS_1252_REVERSE[char] = Number.parseInt(code);\n}\n/**\n * Decode text from binary data\n * @param bytes Binary data\n * @param encoding Encoding\n */\nexport function textDecode(bytes, encoding = \"utf-8\") {\n    switch (encoding.toLowerCase()) {\n        case \"utf-8\":\n        case \"utf8\":\n            if (typeof globalThis.TextDecoder !== \"undefined\") {\n                return new globalThis.TextDecoder(\"utf-8\").decode(bytes);\n            }\n            return decodeUTF8(bytes);\n        case \"utf-16le\":\n            return decodeUTF16LE(bytes);\n        case \"ascii\":\n            return decodeASCII(bytes);\n        case \"latin1\":\n        case \"iso-8859-1\":\n            return decodeLatin1(bytes);\n        case \"windows-1252\":\n            return decodeWindows1252(bytes);\n        default:\n            throw new RangeError(`Encoding '${encoding}' not supported`);\n    }\n}\nexport function textEncode(input = \"\", encoding = \"utf-8\") {\n    switch (encoding.toLowerCase()) {\n        case \"utf-8\":\n        case \"utf8\":\n            if (typeof globalThis.TextEncoder !== \"undefined\") {\n                return new globalThis.TextEncoder().encode(input);\n            }\n            return encodeUTF8(input);\n        case \"utf-16le\":\n            return encodeUTF16LE(input);\n        case \"ascii\":\n            return encodeASCII(input);\n        case \"latin1\":\n        case \"iso-8859-1\":\n            return encodeLatin1(input);\n        case \"windows-1252\":\n            return encodeWindows1252(input);\n        default:\n            throw new RangeError(`Encoding '${encoding}' not supported`);\n    }\n}\n// --- Internal helpers ---\nfunction decodeUTF8(bytes) {\n    let out = \"\";\n    let i = 0;\n    while (i < bytes.length) {\n        const b1 = bytes[i++];\n        if (b1 < 0x80) {\n            out += String.fromCharCode(b1);\n        }\n        else if (b1 < 0xe0) {\n            const b2 = bytes[i++] & 0x3f;\n            out += String.fromCharCode(((b1 & 0x1f) << 6) | b2);\n        }\n        else if (b1 < 0xf0) {\n            const b2 = bytes[i++] & 0x3f;\n            const b3 = bytes[i++] & 0x3f;\n            out += String.fromCharCode(((b1 & 0x0f) << 12) | (b2 << 6) | b3);\n        }\n        else {\n            const b2 = bytes[i++] & 0x3f;\n            const b3 = bytes[i++] & 0x3f;\n            const b4 = bytes[i++] & 0x3f;\n            let cp = ((b1 & 0x07) << 18) |\n                (b2 << 12) |\n                (b3 << 6) |\n                b4;\n            cp -= 0x10000;\n            out += String.fromCharCode(0xd800 + ((cp >> 10) & 0x3ff), 0xdc00 + (cp & 0x3ff));\n        }\n    }\n    return out;\n}\nfunction decodeUTF16LE(bytes) {\n    let out = \"\";\n    for (let i = 0; i < bytes.length; i += 2) {\n        out += String.fromCharCode(bytes[i] | (bytes[i + 1] << 8));\n    }\n    return out;\n}\nfunction decodeASCII(bytes) {\n    return String.fromCharCode(...bytes.map((b) => b & 0x7f));\n}\nfunction decodeLatin1(bytes) {\n    return String.fromCharCode(...bytes);\n}\nfunction decodeWindows1252(bytes) {\n    let out = \"\";\n    for (const b of bytes) {\n        if (b >= 0x80 && b <= 0x9f && WINDOWS_1252_EXTRA[b]) {\n            out += WINDOWS_1252_EXTRA[b];\n        }\n        else {\n            out += String.fromCharCode(b);\n        }\n    }\n    return out;\n}\nfunction encodeUTF8(str) {\n    const out = [];\n    for (let i = 0; i < str.length; i++) {\n        const cp = str.charCodeAt(i);\n        if (cp < 0x80) {\n            out.push(cp);\n        }\n        else if (cp < 0x800) {\n            out.push(0xc0 | (cp >> 6), 0x80 | (cp & 0x3f));\n        }\n        else if (cp < 0x10000) {\n            out.push(0xe0 | (cp >> 12), 0x80 | ((cp >> 6) & 0x3f), 0x80 | (cp & 0x3f));\n        }\n        else {\n            out.push(0xf0 | (cp >> 18), 0x80 | ((cp >> 12) & 0x3f), 0x80 | ((cp >> 6) & 0x3f), 0x80 | (cp & 0x3f));\n        }\n    }\n    return new Uint8Array(out);\n}\nfunction encodeUTF16LE(str) {\n    const out = new Uint8Array(str.length * 2);\n    for (let i = 0; i < str.length; i++) {\n        const code = str.charCodeAt(i);\n        out[i * 2] = code & 0xff;\n        out[i * 2 + 1] = code >> 8;\n    }\n    return out;\n}\nfunction encodeASCII(str) {\n    return new Uint8Array([...str].map((ch) => ch.charCodeAt(0) & 0x7f));\n}\nfunction encodeLatin1(str) {\n    return new Uint8Array([...str].map((ch) => ch.charCodeAt(0) & 0xff));\n}\nfunction encodeWindows1252(str) {\n    return new Uint8Array([...str].map((ch) => {\n        const code = ch.charCodeAt(0);\n        if (code <= 0xff)\n            return code;\n        if (WINDOWS_1252_REVERSE[ch] !== undefined)\n            return WINDOWS_1252_REVERSE[ch];\n        return 0x3f; // '?'\n    }));\n}\n","export const defaultMessages = 'End-Of-Stream';\n/**\n * Thrown on read operation of the end of file or stream has been reached\n */\nexport class EndOfStreamError extends Error {\n    constructor() {\n        super(defaultMessages);\n        this.name = \"EndOfStreamError\";\n    }\n}\nexport class AbortError extends Error {\n    constructor(message = \"The operation was aborted\") {\n        super(message);\n        this.name = \"AbortError\";\n    }\n}\n","export class Deferred {\n    constructor() {\n        this.resolve = () => null;\n        this.reject = () => null;\n        this.promise = new Promise((resolve, reject) => {\n            this.reject = reject;\n            this.resolve = resolve;\n        });\n    }\n}\n","import { EndOfStreamError, AbortError } from \"./Errors.js\";\nexport class AbstractStreamReader {\n    constructor() {\n        this.endOfStream = false;\n        this.interrupted = false;\n        /**\n         * Store peeked data\n         * @type {Array}\n         */\n        this.peekQueue = [];\n    }\n    async peek(uint8Array, mayBeLess = false) {\n        const bytesRead = await this.read(uint8Array, mayBeLess);\n        this.peekQueue.push(uint8Array.subarray(0, bytesRead)); // Put read data back to peek buffer\n        return bytesRead;\n    }\n    async read(buffer, mayBeLess = false) {\n        if (buffer.length === 0) {\n            return 0;\n        }\n        let bytesRead = this.readFromPeekBuffer(buffer);\n        if (!this.endOfStream) {\n            bytesRead += await this.readRemainderFromStream(buffer.subarray(bytesRead), mayBeLess);\n        }\n        if (bytesRead === 0 && !mayBeLess) {\n            throw new EndOfStreamError();\n        }\n        return bytesRead;\n    }\n    /**\n     * Read chunk from stream\n     * @param buffer - Target Uint8Array (or Buffer) to store data read from stream in\n     * @returns Number of bytes read\n     */\n    readFromPeekBuffer(buffer) {\n        let remaining = buffer.length;\n        let bytesRead = 0;\n        // consume peeked data first\n        while (this.peekQueue.length > 0 && remaining > 0) {\n            const peekData = this.peekQueue.pop(); // Front of queue\n            if (!peekData)\n                throw new Error('peekData should be defined');\n            const lenCopy = Math.min(peekData.length, remaining);\n            buffer.set(peekData.subarray(0, lenCopy), bytesRead);\n            bytesRead += lenCopy;\n            remaining -= lenCopy;\n            if (lenCopy < peekData.length) {\n                // remainder back to queue\n                this.peekQueue.push(peekData.subarray(lenCopy));\n            }\n        }\n        return bytesRead;\n    }\n    async readRemainderFromStream(buffer, mayBeLess) {\n        let bytesRead = 0;\n        // Continue reading from stream if required\n        while (bytesRead < buffer.length && !this.endOfStream) {\n            if (this.interrupted) {\n                throw new AbortError();\n            }\n            const chunkLen = await this.readFromStream(buffer.subarray(bytesRead), mayBeLess);\n            if (chunkLen === 0)\n                break;\n            bytesRead += chunkLen;\n        }\n        if (!mayBeLess && bytesRead < buffer.length) {\n            throw new EndOfStreamError();\n        }\n        return bytesRead;\n    }\n}\n","import { AbortError, } from './Errors.js';\nimport { Deferred } from './Deferred.js';\nimport { AbstractStreamReader } from \"./AbstractStreamReader.js\";\n/**\n * Node.js Readable Stream Reader\n * Ref: https://nodejs.org/api/stream.html#readable-streams\n */\nexport class StreamReader extends AbstractStreamReader {\n    constructor(s) {\n        super();\n        this.s = s;\n        /**\n         * Deferred used for postponed read request (as not data is yet available to read)\n         */\n        this.deferred = null;\n        if (!s.read || !s.once) {\n            throw new Error('Expected an instance of stream.Readable');\n        }\n        this.s.once('end', () => {\n            this.endOfStream = true;\n            if (this.deferred) {\n                this.deferred.resolve(0);\n            }\n        });\n        this.s.once('error', err => this.reject(err));\n        this.s.once('close', () => this.abort());\n    }\n    /**\n     * Read chunk from stream\n     * @param buffer Target Uint8Array (or Buffer) to store data read from stream in\n     * @param mayBeLess - If true, may fill the buffer partially\n     * @returns Number of bytes read\n     */\n    async readFromStream(buffer, mayBeLess) {\n        if (buffer.length === 0)\n            return 0;\n        const readBuffer = this.s.read(buffer.length);\n        if (readBuffer) {\n            buffer.set(readBuffer);\n            return readBuffer.length;\n        }\n        const request = {\n            buffer,\n            mayBeLess,\n            deferred: new Deferred()\n        };\n        this.deferred = request.deferred;\n        this.s.once('readable', () => {\n            this.readDeferred(request);\n        });\n        return request.deferred.promise;\n    }\n    /**\n     * Process deferred read request\n     * @param request Deferred read request\n     */\n    readDeferred(request) {\n        const readBuffer = this.s.read(request.buffer.length);\n        if (readBuffer) {\n            request.buffer.set(readBuffer);\n            request.deferred.resolve(readBuffer.length);\n            this.deferred = null;\n        }\n        else {\n            this.s.once('readable', () => {\n                this.readDeferred(request);\n            });\n        }\n    }\n    reject(err) {\n        this.interrupted = true;\n        if (this.deferred) {\n            this.deferred.reject(err);\n            this.deferred = null;\n        }\n    }\n    async abort() {\n        this.reject(new AbortError());\n    }\n    async close() {\n        return this.abort();\n    }\n}\n","import { AbstractStreamReader } from \"./AbstractStreamReader.js\";\nexport class WebStreamReader extends AbstractStreamReader {\n    constructor(reader) {\n        super();\n        this.reader = reader;\n    }\n    async abort() {\n        return this.close();\n    }\n    async close() {\n        this.reader.releaseLock();\n    }\n}\n","import { WebStreamReader } from './WebStreamReader.js';\n/**\n * Read from a WebStream using a BYOB reader\n * Reference: https://nodejs.org/api/webstreams.html#class-readablestreambyobreader\n */\nexport class WebStreamByobReader extends WebStreamReader {\n    /**\n     * Read from stream\n     * @param buffer - Target Uint8Array (or Buffer) to store data read from stream in\n     * @param mayBeLess - If true, may fill the buffer partially\n     * @protected Bytes read\n     */\n    async readFromStream(buffer, mayBeLess) {\n        if (buffer.length === 0)\n            return 0;\n        // @ts-ignore\n        const result = await this.reader.read(new Uint8Array(buffer.length), { min: mayBeLess ? undefined : buffer.length });\n        if (result.done) {\n            this.endOfStream = result.done;\n        }\n        if (result.value) {\n            buffer.set(result.value);\n            return result.value.length;\n        }\n        return 0;\n    }\n}\n","import { EndOfStreamError } from './Errors.js';\nimport { AbstractStreamReader } from \"./AbstractStreamReader.js\";\nexport class WebStreamDefaultReader extends AbstractStreamReader {\n    constructor(reader) {\n        super();\n        this.reader = reader;\n        this.buffer = null; // Internal buffer to store excess data\n    }\n    /**\n     * Copy chunk to target, and store the remainder in this.buffer\n     */\n    writeChunk(target, chunk) {\n        const written = Math.min(chunk.length, target.length);\n        target.set(chunk.subarray(0, written));\n        // Adjust the remainder of the buffer\n        if (written < chunk.length) {\n            this.buffer = chunk.subarray(written);\n        }\n        else {\n            this.buffer = null;\n        }\n        return written;\n    }\n    /**\n     * Read from stream\n     * @param buffer - Target Uint8Array (or Buffer) to store data read from stream in\n     * @param mayBeLess - If true, may fill the buffer partially\n     * @protected Bytes read\n     */\n    async readFromStream(buffer, mayBeLess) {\n        if (buffer.length === 0)\n            return 0;\n        let totalBytesRead = 0;\n        // Serve from the internal buffer first\n        if (this.buffer) {\n            totalBytesRead += this.writeChunk(buffer, this.buffer);\n        }\n        // Continue reading from the stream if more data is needed\n        while (totalBytesRead < buffer.length && !this.endOfStream) {\n            const result = await this.reader.read();\n            if (result.done) {\n                this.endOfStream = true;\n                break;\n            }\n            if (result.value) {\n                totalBytesRead += this.writeChunk(buffer.subarray(totalBytesRead), result.value);\n            }\n        }\n        if (!mayBeLess && totalBytesRead === 0 && this.endOfStream) {\n            throw new EndOfStreamError();\n        }\n        return totalBytesRead;\n    }\n    abort() {\n        this.interrupted = true;\n        return this.reader.cancel();\n    }\n    async close() {\n        await this.abort();\n        this.reader.releaseLock();\n    }\n}\n","import { WebStreamByobReader } from './WebStreamByobReader.js';\nimport { WebStreamDefaultReader } from './WebStreamDefaultReader.js';\nexport function makeWebStreamReader(stream) {\n    try {\n        const reader = stream.getReader({ mode: \"byob\" });\n        if (reader instanceof ReadableStreamDefaultReader) {\n            // Fallback to default reader in case `mode: byob` is ignored\n            return new WebStreamDefaultReader(reader);\n        }\n        return new WebStreamByobReader(reader);\n    }\n    catch (error) {\n        if (error instanceof TypeError) {\n            // Fallback to default reader in case `mode: byob` rejected by a `TypeError`\n            return new WebStreamDefaultReader(stream.getReader());\n        }\n        throw error;\n    }\n}\n","import { EndOfStreamError } from './stream/index.js';\n/**\n * Core tokenizer\n */\nexport class AbstractTokenizer {\n    /**\n     * Constructor\n     * @param options Tokenizer options\n     * @protected\n     */\n    constructor(options) {\n        this.numBuffer = new Uint8Array(8);\n        /**\n         * Tokenizer-stream position\n         */\n        this.position = 0;\n        this.onClose = options?.onClose;\n        if (options?.abortSignal) {\n            options.abortSignal.addEventListener('abort', () => {\n                this.abort();\n            });\n        }\n    }\n    /**\n     * Read a token from the tokenizer-stream\n     * @param token - The token to read\n     * @param position - If provided, the desired position in the tokenizer-stream\n     * @returns Promise with token data\n     */\n    async readToken(token, position = this.position) {\n        const uint8Array = new Uint8Array(token.len);\n        const len = await this.readBuffer(uint8Array, { position });\n        if (len < token.len)\n            throw new EndOfStreamError();\n        return token.get(uint8Array, 0);\n    }\n    /**\n     * Peek a token from the tokenizer-stream.\n     * @param token - Token to peek from the tokenizer-stream.\n     * @param position - Offset where to begin reading within the file. If position is null, data will be read from the current file position.\n     * @returns Promise with token data\n     */\n    async peekToken(token, position = this.position) {\n        const uint8Array = new Uint8Array(token.len);\n        const len = await this.peekBuffer(uint8Array, { position });\n        if (len < token.len)\n            throw new EndOfStreamError();\n        return token.get(uint8Array, 0);\n    }\n    /**\n     * Read a numeric token from the stream\n     * @param token - Numeric token\n     * @returns Promise with number\n     */\n    async readNumber(token) {\n        const len = await this.readBuffer(this.numBuffer, { length: token.len });\n        if (len < token.len)\n            throw new EndOfStreamError();\n        return token.get(this.numBuffer, 0);\n    }\n    /**\n     * Read a numeric token from the stream\n     * @param token - Numeric token\n     * @returns Promise with number\n     */\n    async peekNumber(token) {\n        const len = await this.peekBuffer(this.numBuffer, { length: token.len });\n        if (len < token.len)\n            throw new EndOfStreamError();\n        return token.get(this.numBuffer, 0);\n    }\n    /**\n     * Ignore number of bytes, advances the pointer in under tokenizer-stream.\n     * @param length - Number of bytes to ignore\n     * @return resolves the number of bytes ignored, equals length if this available, otherwise the number of bytes available\n     */\n    async ignore(length) {\n        if (this.fileInfo.size !== undefined) {\n            const bytesLeft = this.fileInfo.size - this.position;\n            if (length > bytesLeft) {\n                this.position += bytesLeft;\n                return bytesLeft;\n            }\n        }\n        this.position += length;\n        return length;\n    }\n    async close() {\n        await this.abort();\n        await this.onClose?.();\n    }\n    normalizeOptions(uint8Array, options) {\n        if (!this.supportsRandomAccess() && options && options.position !== undefined && options.position < this.position) {\n            throw new Error('`options.position` must be equal or greater than `tokenizer.position`');\n        }\n        return {\n            ...{\n                mayBeLess: false,\n                offset: 0,\n                length: uint8Array.length,\n                position: this.position\n            }, ...options\n        };\n    }\n    abort() {\n        return Promise.resolve(); // Ignore abort signal\n    }\n}\n","import { AbstractTokenizer } from './AbstractTokenizer.js';\nimport { EndOfStreamError } from './stream/index.js';\nconst maxBufferSize = 256000;\nexport class ReadStreamTokenizer extends AbstractTokenizer {\n    /**\n     * Constructor\n     * @param streamReader stream-reader to read from\n     * @param options Tokenizer options\n     */\n    constructor(streamReader, options) {\n        super(options);\n        this.streamReader = streamReader;\n        this.fileInfo = options?.fileInfo ?? {};\n    }\n    /**\n     * Read buffer from tokenizer\n     * @param uint8Array - Target Uint8Array to fill with data read from the tokenizer-stream\n     * @param options - Read behaviour options\n     * @returns Promise with number of bytes read\n     */\n    async readBuffer(uint8Array, options) {\n        const normOptions = this.normalizeOptions(uint8Array, options);\n        const skipBytes = normOptions.position - this.position;\n        if (skipBytes > 0) {\n            await this.ignore(skipBytes);\n            return this.readBuffer(uint8Array, options);\n        }\n        if (skipBytes < 0) {\n            throw new Error('`options.position` must be equal or greater than `tokenizer.position`');\n        }\n        if (normOptions.length === 0) {\n            return 0;\n        }\n        const bytesRead = await this.streamReader.read(uint8Array.subarray(0, normOptions.length), normOptions.mayBeLess);\n        this.position += bytesRead;\n        if ((!options || !options.mayBeLess) && bytesRead < normOptions.length) {\n            throw new EndOfStreamError();\n        }\n        return bytesRead;\n    }\n    /**\n     * Peek (read ahead) buffer from tokenizer\n     * @param uint8Array - Uint8Array (or Buffer) to write data to\n     * @param options - Read behaviour options\n     * @returns Promise with number of bytes peeked\n     */\n    async peekBuffer(uint8Array, options) {\n        const normOptions = this.normalizeOptions(uint8Array, options);\n        let bytesRead = 0;\n        if (normOptions.position) {\n            const skipBytes = normOptions.position - this.position;\n            if (skipBytes > 0) {\n                const skipBuffer = new Uint8Array(normOptions.length + skipBytes);\n                bytesRead = await this.peekBuffer(skipBuffer, { mayBeLess: normOptions.mayBeLess });\n                uint8Array.set(skipBuffer.subarray(skipBytes));\n                return bytesRead - skipBytes;\n            }\n            if (skipBytes < 0) {\n                throw new Error('Cannot peek from a negative offset in a stream');\n            }\n        }\n        if (normOptions.length > 0) {\n            try {\n                bytesRead = await this.streamReader.peek(uint8Array.subarray(0, normOptions.length), normOptions.mayBeLess);\n            }\n            catch (err) {\n                if (options?.mayBeLess && err instanceof EndOfStreamError) {\n                    return 0;\n                }\n                throw err;\n            }\n            if ((!normOptions.mayBeLess) && bytesRead < normOptions.length) {\n                throw new EndOfStreamError();\n            }\n        }\n        return bytesRead;\n    }\n    async ignore(length) {\n        // debug(`ignore ${this.position}...${this.position + length - 1}`);\n        const bufSize = Math.min(maxBufferSize, length);\n        const buf = new Uint8Array(bufSize);\n        let totBytesRead = 0;\n        while (totBytesRead < length) {\n            const remaining = length - totBytesRead;\n            const bytesRead = await this.readBuffer(buf, { length: Math.min(bufSize, remaining) });\n            if (bytesRead < 0) {\n                return bytesRead;\n            }\n            totBytesRead += bytesRead;\n        }\n        return totBytesRead;\n    }\n    abort() {\n        return this.streamReader.abort();\n    }\n    async close() {\n        return this.streamReader.close();\n    }\n    supportsRandomAccess() {\n        return false;\n    }\n}\n","import { EndOfStreamError } from './stream/index.js';\nimport { AbstractTokenizer } from './AbstractTokenizer.js';\nexport class BufferTokenizer extends AbstractTokenizer {\n    /**\n     * Construct BufferTokenizer\n     * @param uint8Array - Uint8Array to tokenize\n     * @param options Tokenizer options\n     */\n    constructor(uint8Array, options) {\n        super(options);\n        this.uint8Array = uint8Array;\n        this.fileInfo = { ...options?.fileInfo ?? {}, ...{ size: uint8Array.length } };\n    }\n    /**\n     * Read buffer from tokenizer\n     * @param uint8Array - Uint8Array to tokenize\n     * @param options - Read behaviour options\n     * @returns {Promise<number>}\n     */\n    async readBuffer(uint8Array, options) {\n        if (options?.position) {\n            this.position = options.position;\n        }\n        const bytesRead = await this.peekBuffer(uint8Array, options);\n        this.position += bytesRead;\n        return bytesRead;\n    }\n    /**\n     * Peek (read ahead) buffer from tokenizer\n     * @param uint8Array\n     * @param options - Read behaviour options\n     * @returns {Promise<number>}\n     */\n    async peekBuffer(uint8Array, options) {\n        const normOptions = this.normalizeOptions(uint8Array, options);\n        const bytes2read = Math.min(this.uint8Array.length - normOptions.position, normOptions.length);\n        if ((!normOptions.mayBeLess) && bytes2read < normOptions.length) {\n            throw new EndOfStreamError();\n        }\n        uint8Array.set(this.uint8Array.subarray(normOptions.position, normOptions.position + bytes2read));\n        return bytes2read;\n    }\n    close() {\n        return super.close();\n    }\n    supportsRandomAccess() {\n        return true;\n    }\n    setPosition(position) {\n        this.position = position;\n    }\n}\n","import { EndOfStreamError } from './stream/index.js';\nimport { AbstractTokenizer } from './AbstractTokenizer.js';\nexport class BlobTokenizer extends AbstractTokenizer {\n    /**\n     * Construct BufferTokenizer\n     * @param blob - Uint8Array to tokenize\n     * @param options Tokenizer options\n     */\n    constructor(blob, options) {\n        super(options);\n        this.blob = blob;\n        this.fileInfo = { ...options?.fileInfo ?? {}, ...{ size: blob.size, mimeType: blob.type } };\n    }\n    /**\n     * Read buffer from tokenizer\n     * @param uint8Array - Uint8Array to tokenize\n     * @param options - Read behaviour options\n     * @returns {Promise<number>}\n     */\n    async readBuffer(uint8Array, options) {\n        if (options?.position) {\n            this.position = options.position;\n        }\n        const bytesRead = await this.peekBuffer(uint8Array, options);\n        this.position += bytesRead;\n        return bytesRead;\n    }\n    /**\n     * Peek (read ahead) buffer from tokenizer\n     * @param buffer\n     * @param options - Read behaviour options\n     * @returns {Promise<number>}\n     */\n    async peekBuffer(buffer, options) {\n        const normOptions = this.normalizeOptions(buffer, options);\n        const bytes2read = Math.min(this.blob.size - normOptions.position, normOptions.length);\n        if ((!normOptions.mayBeLess) && bytes2read < normOptions.length) {\n            throw new EndOfStreamError();\n        }\n        const arrayBuffer = await this.blob.slice(normOptions.position, normOptions.position + bytes2read).arrayBuffer();\n        buffer.set(new Uint8Array(arrayBuffer));\n        return bytes2read;\n    }\n    close() {\n        return super.close();\n    }\n    supportsRandomAccess() {\n        return true;\n    }\n    setPosition(position) {\n        this.position = position;\n    }\n}\n","import { StreamReader, makeWebStreamReader } from './stream/index.js';\nimport { ReadStreamTokenizer } from './ReadStreamTokenizer.js';\nimport { BufferTokenizer } from './BufferTokenizer.js';\nimport { BlobTokenizer } from './BlobTokenizer.js';\nexport { EndOfStreamError, AbortError } from './stream/index.js';\nexport { AbstractTokenizer } from './AbstractTokenizer.js';\n/**\n * Construct ReadStreamTokenizer from given Stream.\n * Will set fileSize, if provided given Stream has set the .path property/\n * @param stream - Read from Node.js Stream.Readable\n * @param options - Tokenizer options\n * @returns ReadStreamTokenizer\n */\nexport function fromStream(stream, options) {\n    const streamReader = new StreamReader(stream);\n    const _options = options ?? {};\n    const chainedClose = _options.onClose;\n    _options.onClose = async () => {\n        await streamReader.close();\n        if (chainedClose) {\n            return chainedClose();\n        }\n    };\n    return new ReadStreamTokenizer(streamReader, _options);\n}\n/**\n * Construct ReadStreamTokenizer from given ReadableStream (WebStream API).\n * Will set fileSize, if provided given Stream has set the .path property/\n * @param webStream - Read from Node.js Stream.Readable (must be a byte stream)\n * @param options - Tokenizer options\n * @returns ReadStreamTokenizer\n */\nexport function fromWebStream(webStream, options) {\n    const webStreamReader = makeWebStreamReader(webStream);\n    const _options = options ?? {};\n    const chainedClose = _options.onClose;\n    _options.onClose = async () => {\n        await webStreamReader.close();\n        if (chainedClose) {\n            return chainedClose();\n        }\n    };\n    return new ReadStreamTokenizer(webStreamReader, _options);\n}\n/**\n * Construct ReadStreamTokenizer from given Buffer.\n * @param uint8Array - Uint8Array to tokenize\n * @param options - Tokenizer options\n * @returns BufferTokenizer\n */\nexport function fromBuffer(uint8Array, options) {\n    return new BufferTokenizer(uint8Array, options);\n}\n/**\n * Construct ReadStreamTokenizer from given Blob.\n * @param blob - Uint8Array to tokenize\n * @param options - Tokenizer options\n * @returns BufferTokenizer\n */\nexport function fromBlob(blob, options) {\n    return new BlobTokenizer(blob, options);\n}\n","import { StringType, UINT32_LE } from 'token-types';\nimport initDebug from 'debug';\nimport { DataDescriptor, EndOfCentralDirectoryRecordToken, FileHeader, LocalFileHeaderToken, Signature } from \"./ZipToken.js\";\nfunction signatureToArray(signature) {\n    const signatureBytes = new Uint8Array(UINT32_LE.len);\n    UINT32_LE.put(signatureBytes, 0, signature);\n    return signatureBytes;\n}\nconst debug = initDebug('tokenizer:inflate');\nconst syncBufferSize = 256 * 1024;\nconst ddSignatureArray = signatureToArray(Signature.DataDescriptor);\nconst eocdSignatureBytes = signatureToArray(Signature.EndOfCentralDirectory);\nexport class ZipHandler {\n    constructor(tokenizer) {\n        this.tokenizer = tokenizer;\n        this.syncBuffer = new Uint8Array(syncBufferSize);\n    }\n    async isZip() {\n        return await this.peekSignature() === Signature.LocalFileHeader;\n    }\n    peekSignature() {\n        return this.tokenizer.peekToken(UINT32_LE);\n    }\n    async findEndOfCentralDirectoryLocator() {\n        const randomReadTokenizer = this.tokenizer;\n        const chunkLength = Math.min(16 * 1024, randomReadTokenizer.fileInfo.size);\n        const buffer = this.syncBuffer.subarray(0, chunkLength);\n        await this.tokenizer.readBuffer(buffer, { position: randomReadTokenizer.fileInfo.size - chunkLength });\n        // Search the buffer from end to beginning for EOCD signature\n        // const signature = 0x06054b50;\n        for (let i = buffer.length - 4; i >= 0; i--) {\n            // Compare 4 bytes directly without calling readUInt32LE\n            if (buffer[i] === eocdSignatureBytes[0] &&\n                buffer[i + 1] === eocdSignatureBytes[1] &&\n                buffer[i + 2] === eocdSignatureBytes[2] &&\n                buffer[i + 3] === eocdSignatureBytes[3]) {\n                return randomReadTokenizer.fileInfo.size - chunkLength + i;\n            }\n        }\n        return -1;\n    }\n    async readCentralDirectory() {\n        if (!this.tokenizer.supportsRandomAccess()) {\n            debug('Cannot reading central-directory without random-read support');\n            return;\n        }\n        debug('Reading central-directory...');\n        const pos = this.tokenizer.position;\n        const offset = await this.findEndOfCentralDirectoryLocator();\n        if (offset > 0) {\n            debug('Central-directory 32-bit signature found');\n            const eocdHeader = await this.tokenizer.readToken(EndOfCentralDirectoryRecordToken, offset);\n            const files = [];\n            this.tokenizer.setPosition(eocdHeader.offsetOfStartOfCd);\n            for (let n = 0; n < eocdHeader.nrOfEntriesOfSize; ++n) {\n                const entry = await this.tokenizer.readToken(FileHeader);\n                if (entry.signature !== Signature.CentralFileHeader) {\n                    throw new Error('Expected Central-File-Header signature');\n                }\n                entry.filename = await this.tokenizer.readToken(new StringType(entry.filenameLength, 'utf-8'));\n                await this.tokenizer.ignore(entry.extraFieldLength);\n                await this.tokenizer.ignore(entry.fileCommentLength);\n                files.push(entry);\n                debug(`Add central-directory file-entry: n=${n + 1}/${files.length}: filename=${files[n].filename}`);\n            }\n            this.tokenizer.setPosition(pos);\n            return files;\n        }\n        this.tokenizer.setPosition(pos);\n    }\n    async unzip(fileCb) {\n        const entries = await this.readCentralDirectory();\n        if (entries) {\n            // Use Central Directory to iterate over files\n            return this.iterateOverCentralDirectory(entries, fileCb);\n        }\n        // Scan Zip files for local-file-header\n        let stop = false;\n        do {\n            const zipHeader = await this.readLocalFileHeader();\n            if (!zipHeader)\n                break;\n            const next = fileCb(zipHeader);\n            stop = !!next.stop;\n            let fileData;\n            await this.tokenizer.ignore(zipHeader.extraFieldLength);\n            if (zipHeader.dataDescriptor && zipHeader.compressedSize === 0) {\n                const chunks = [];\n                let len = syncBufferSize;\n                debug('Compressed-file-size unknown, scanning for next data-descriptor-signature....');\n                let nextHeaderIndex = -1;\n                while (nextHeaderIndex < 0 && len === syncBufferSize) {\n                    len = await this.tokenizer.peekBuffer(this.syncBuffer, { mayBeLess: true });\n                    nextHeaderIndex = indexOf(this.syncBuffer.subarray(0, len), ddSignatureArray);\n                    const size = nextHeaderIndex >= 0 ? nextHeaderIndex : len;\n                    if (next.handler) {\n                        const data = new Uint8Array(size);\n                        await this.tokenizer.readBuffer(data);\n                        chunks.push(data);\n                    }\n                    else {\n                        // Move position to the next header if found, skip the whole buffer otherwise\n                        await this.tokenizer.ignore(size);\n                    }\n                }\n                debug(`Found data-descriptor-signature at pos=${this.tokenizer.position}`);\n                if (next.handler) {\n                    await this.inflate(zipHeader, mergeArrays(chunks), next.handler);\n                }\n            }\n            else {\n                if (next.handler) {\n                    debug(`Reading compressed-file-data: ${zipHeader.compressedSize} bytes`);\n                    fileData = new Uint8Array(zipHeader.compressedSize);\n                    await this.tokenizer.readBuffer(fileData);\n                    await this.inflate(zipHeader, fileData, next.handler);\n                }\n                else {\n                    debug(`Ignoring compressed-file-data: ${zipHeader.compressedSize} bytes`);\n                    await this.tokenizer.ignore(zipHeader.compressedSize);\n                }\n            }\n            debug(`Reading data-descriptor at pos=${this.tokenizer.position}`);\n            if (zipHeader.dataDescriptor) {\n                // await this.tokenizer.ignore(DataDescriptor.len);\n                const dataDescriptor = await this.tokenizer.readToken(DataDescriptor);\n                if (dataDescriptor.signature !== 0x08074b50) {\n                    throw new Error(`Expected data-descriptor-signature at position ${this.tokenizer.position - DataDescriptor.len}`);\n                }\n            }\n        } while (!stop);\n    }\n    async iterateOverCentralDirectory(entries, fileCb) {\n        for (const fileHeader of entries) {\n            const next = fileCb(fileHeader);\n            if (next.handler) {\n                this.tokenizer.setPosition(fileHeader.relativeOffsetOfLocalHeader);\n                const zipHeader = await this.readLocalFileHeader();\n                if (zipHeader) {\n                    await this.tokenizer.ignore(zipHeader.extraFieldLength);\n                    const fileData = new Uint8Array(fileHeader.compressedSize);\n                    await this.tokenizer.readBuffer(fileData);\n                    await this.inflate(zipHeader, fileData, next.handler);\n                }\n            }\n            if (next.stop)\n                break;\n        }\n    }\n    async inflate(zipHeader, fileData, cb) {\n        if (zipHeader.compressedMethod === 0) {\n            // Stored (uncompressed)\n            return cb(fileData);\n        }\n        if (zipHeader.compressedMethod !== 8) {\n            throw new Error(`Unsupported ZIP compression method: ${zipHeader.compressedMethod}`);\n        }\n        debug(`Decompress filename=${zipHeader.filename}, compressed-size=${fileData.length}`);\n        const uncompressedData = await ZipHandler.decompressDeflateRaw(fileData);\n        return cb(uncompressedData);\n    }\n    static async decompressDeflateRaw(data) {\n        // Wrap Uint8Array in a ReadableStream without copying\n        const input = new ReadableStream({\n            start(controller) {\n                controller.enqueue(data);\n                controller.close();\n            }\n        });\n        const ds = new DecompressionStream(\"deflate-raw\");\n        const output = input.pipeThrough(ds);\n        try {\n            // Collect decompressed bytes from the output stream\n            const response = new Response(output);\n            const buffer = await response.arrayBuffer();\n            return new Uint8Array(buffer);\n        }\n        catch (err) {\n            // Provide ZIP-specific error context\n            const message = err instanceof Error\n                ? `Failed to deflate ZIP entry: ${err.message}`\n                : \"Unknown decompression error in ZIP entry\";\n            throw new TypeError(message);\n        }\n    }\n    async readLocalFileHeader() {\n        const signature = await this.tokenizer.peekToken(UINT32_LE);\n        if (signature === Signature.LocalFileHeader) {\n            const header = await this.tokenizer.readToken(LocalFileHeaderToken);\n            header.filename = await this.tokenizer.readToken(new StringType(header.filenameLength, 'utf-8'));\n            return header;\n        }\n        if (signature === Signature.CentralFileHeader) {\n            return false;\n        }\n        if (signature === 0xE011CFD0) {\n            throw new Error('Encrypted ZIP');\n        }\n        throw new Error('Unexpected signature');\n    }\n}\nfunction indexOf(buffer, portion) {\n    const bufferLength = buffer.length;\n    const portionLength = portion.length;\n    // Return -1 if the portion is longer than the buffer\n    if (portionLength > bufferLength)\n        return -1;\n    // Search for the portion in the buffer\n    for (let i = 0; i <= bufferLength - portionLength; i++) {\n        let found = true;\n        for (let j = 0; j < portionLength; j++) {\n            if (buffer[i + j] !== portion[j]) {\n                found = false;\n                break;\n            }\n        }\n        if (found) {\n            return i; // Return the starting offset\n        }\n    }\n    return -1; // Not found\n}\nfunction mergeArrays(chunks) {\n    // Concatenate chunks into a single Uint8Array\n    const totalLength = chunks.reduce((acc, curr) => acc + curr.length, 0);\n    const mergedArray = new Uint8Array(totalLength);\n    let offset = 0;\n    for (const chunk of chunks) {\n        mergedArray.set(chunk, offset);\n        offset += chunk.length;\n    }\n    return mergedArray;\n}\n","/**\n * Ref https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT\n */\nimport { UINT16_LE, UINT32_LE } from \"token-types\";\nexport const Signature = {\n    LocalFileHeader: 0x04034b50,\n    DataDescriptor: 0x08074b50,\n    CentralFileHeader: 0x02014b50,\n    EndOfCentralDirectory: 0x06054b50\n};\nexport const DataDescriptor = {\n    get(array) {\n        return {\n            signature: UINT32_LE.get(array, 0),\n            compressedSize: UINT32_LE.get(array, 8),\n            uncompressedSize: UINT32_LE.get(array, 12),\n        };\n    }, len: 16\n};\n/**\n * First part of the ZIP Local File Header\n * Offset | Bytes| Description\n * -------|------+-------------------------------------------------------------------\n *      0 |    4 | Signature (0x04034b50)\n *      4 |    2 | Minimum version needed to extract\n *      6 |    2 | Bit flag\n *      8 |    2 | Compression method\n *     10 |    2 | File last modification time (MS-DOS format)\n *     12 |    2 | File last modification date (MS-DOS format)\n *     14 |    4 | CRC-32 of uncompressed data\n *     18 |    4 | Compressed size\n *     22 |    4 | Uncompressed size\n *     26 |    2 | File name length (n)\n *     28 |    2 | Extra field length (m)\n *     30 |    n | File name\n * 30 + n |    m | Extra field\n */\nexport const LocalFileHeaderToken = {\n    get(array) {\n        const flags = UINT16_LE.get(array, 6);\n        return {\n            signature: UINT32_LE.get(array, 0),\n            minVersion: UINT16_LE.get(array, 4),\n            dataDescriptor: !!(flags & 0x0008),\n            compressedMethod: UINT16_LE.get(array, 8),\n            compressedSize: UINT32_LE.get(array, 18),\n            uncompressedSize: UINT32_LE.get(array, 22),\n            filenameLength: UINT16_LE.get(array, 26),\n            extraFieldLength: UINT16_LE.get(array, 28),\n            filename: null\n        };\n    }, len: 30\n};\n/**\n * 4.3.16  End of central directory record:\n *  end of central dir signature (0x06064b50)                                      4 bytes\n *  number of this disk                                                            2 bytes\n *  number of the disk with the start of the central directory                     2 bytes\n *  total number of entries in the central directory on this disk                  2 bytes\n *  total number of entries in the size of the central directory                   2 bytes\n *  sizeOfTheCentralDirectory                                                      4 bytes\n *  offset of start of central directory with respect to the starting disk number  4 bytes\n *  .ZIP file comment length                                                       2 bytes\n *  .ZIP file comment       (variable size)\n */\nexport const EndOfCentralDirectoryRecordToken = {\n    get(array) {\n        return {\n            signature: UINT32_LE.get(array, 0),\n            nrOfThisDisk: UINT16_LE.get(array, 4),\n            nrOfThisDiskWithTheStart: UINT16_LE.get(array, 6),\n            nrOfEntriesOnThisDisk: UINT16_LE.get(array, 8),\n            nrOfEntriesOfSize: UINT16_LE.get(array, 10),\n            sizeOfCd: UINT32_LE.get(array, 12),\n            offsetOfStartOfCd: UINT32_LE.get(array, 16),\n            zipFileCommentLength: UINT16_LE.get(array, 20),\n        };\n    }, len: 22\n};\n/**\n * File header:\n *    central file header signature   4 bytes   0 (0x02014b50)\n *    version made by                 2 bytes   4\n *    version needed to extract       2 bytes   6\n *    general purpose bit flag        2 bytes   8\n *    compression method              2 bytes  10\n *    last mod file time              2 bytes  12\n *    last mod file date              2 bytes  14\n *    crc-32                          4 bytes  16\n *    compressed size                 4 bytes  20\n *    uncompressed size               4 bytes  24\n *    file name length                2 bytes  28\n *    extra field length              2 bytes  30\n *    file comment length             2 bytes  32\n *    disk number start               2 bytes  34\n *    internal file attributes        2 bytes  36\n *    external file attributes        4 bytes  38\n *    relative offset of local header 4 bytes  42\n */\nexport const FileHeader = {\n    get(array) {\n        const flags = UINT16_LE.get(array, 8);\n        return {\n            signature: UINT32_LE.get(array, 0),\n            minVersion: UINT16_LE.get(array, 6),\n            dataDescriptor: !!(flags & 0x0008),\n            compressedMethod: UINT16_LE.get(array, 10),\n            compressedSize: UINT32_LE.get(array, 20),\n            uncompressedSize: UINT32_LE.get(array, 24),\n            filenameLength: UINT16_LE.get(array, 28),\n            extraFieldLength: UINT16_LE.get(array, 30),\n            fileCommentLength: UINT16_LE.get(array, 32),\n            relativeOffsetOfLocalHeader: UINT32_LE.get(array, 42),\n            filename: null\n        };\n    }, len: 46\n};\n","export class GzipHandler {\n    constructor(tokenizer) {\n        this.tokenizer = tokenizer;\n    }\n    inflate() {\n        const tokenizer = this.tokenizer;\n        return new ReadableStream({\n            async pull(controller) {\n                const buffer = new Uint8Array(1024);\n                const size = await tokenizer.readBuffer(buffer, { mayBeLess: true });\n                if (size === 0) {\n                    controller.close();\n                    return;\n                }\n                controller.enqueue(buffer.subarray(0, size));\n            }\n        }).pipeThrough(new DecompressionStream(\"gzip\"));\n    }\n}\n","const objectToString = Object.prototype.toString;\nconst uint8ArrayStringified = '[object Uint8Array]';\nconst arrayBufferStringified = '[object ArrayBuffer]';\n\nfunction isType(value, typeConstructor, typeStringified) {\n\tif (!value) {\n\t\treturn false;\n\t}\n\n\tif (value.constructor === typeConstructor) {\n\t\treturn true;\n\t}\n\n\treturn objectToString.call(value) === typeStringified;\n}\n\nexport function isUint8Array(value) {\n\treturn isType(value, Uint8Array, uint8ArrayStringified);\n}\n\nfunction isArrayBuffer(value) {\n\treturn isType(value, ArrayBuffer, arrayBufferStringified);\n}\n\nfunction isUint8ArrayOrArrayBuffer(value) {\n\treturn isUint8Array(value) || isArrayBuffer(value);\n}\n\nexport function assertUint8Array(value) {\n\tif (!isUint8Array(value)) {\n\t\tthrow new TypeError(`Expected \\`Uint8Array\\`, got \\`${typeof value}\\``);\n\t}\n}\n\nexport function assertUint8ArrayOrArrayBuffer(value) {\n\tif (!isUint8ArrayOrArrayBuffer(value)) {\n\t\tthrow new TypeError(`Expected \\`Uint8Array\\` or \\`ArrayBuffer\\`, got \\`${typeof value}\\``);\n\t}\n}\n\nexport function toUint8Array(value) {\n\tif (value instanceof ArrayBuffer) {\n\t\treturn new Uint8Array(value);\n\t}\n\n\tif (ArrayBuffer.isView(value)) {\n\t\treturn new Uint8Array(value.buffer, value.byteOffset, value.byteLength);\n\t}\n\n\tthrow new TypeError(`Unsupported value, got \\`${typeof value}\\`.`);\n}\n\nexport function concatUint8Arrays(arrays, totalLength) {\n\tif (arrays.length === 0) {\n\t\treturn new Uint8Array(0);\n\t}\n\n\ttotalLength ??= arrays.reduce((accumulator, currentValue) => accumulator + currentValue.length, 0);\n\n\tconst returnValue = new Uint8Array(totalLength);\n\n\tlet offset = 0;\n\tfor (const array of arrays) {\n\t\tassertUint8Array(array);\n\t\treturnValue.set(array, offset);\n\t\toffset += array.length;\n\t}\n\n\treturn returnValue;\n}\n\nexport function areUint8ArraysEqual(a, b) {\n\tassertUint8Array(a);\n\tassertUint8Array(b);\n\n\tif (a === b) {\n\t\treturn true;\n\t}\n\n\tif (a.length !== b.length) {\n\t\treturn false;\n\t}\n\n\t// eslint-disable-next-line unicorn/no-for-loop\n\tfor (let index = 0; index < a.length; index++) {\n\t\tif (a[index] !== b[index]) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nexport function compareUint8Arrays(a, b) {\n\tassertUint8Array(a);\n\tassertUint8Array(b);\n\n\tconst length = Math.min(a.length, b.length);\n\n\tfor (let index = 0; index < length; index++) {\n\t\tconst diff = a[index] - b[index];\n\t\tif (diff !== 0) {\n\t\t\treturn Math.sign(diff);\n\t\t}\n\t}\n\n\t// At this point, all the compared elements are equal.\n\t// The shorter array should come first if the arrays are of different lengths.\n\treturn Math.sign(a.length - b.length);\n}\n\nconst cachedDecoders = {\n\tutf8: new globalThis.TextDecoder('utf8'),\n};\n\nexport function uint8ArrayToString(array, encoding = 'utf8') {\n\tassertUint8ArrayOrArrayBuffer(array);\n\tcachedDecoders[encoding] ??= new globalThis.TextDecoder(encoding);\n\treturn cachedDecoders[encoding].decode(array);\n}\n\nfunction assertString(value) {\n\tif (typeof value !== 'string') {\n\t\tthrow new TypeError(`Expected \\`string\\`, got \\`${typeof value}\\``);\n\t}\n}\n\nconst cachedEncoder = new globalThis.TextEncoder();\n\nexport function stringToUint8Array(string) {\n\tassertString(string);\n\treturn cachedEncoder.encode(string);\n}\n\nfunction base64ToBase64Url(base64) {\n\treturn base64.replaceAll('+', '-').replaceAll('/', '_').replace(/=+$/, '');\n}\n\nfunction base64UrlToBase64(base64url) {\n\treturn base64url.replaceAll('-', '+').replaceAll('_', '/');\n}\n\n// Reference: https://phuoc.ng/collection/this-vs-that/concat-vs-push/\nconst MAX_BLOCK_SIZE = 65_535;\n\nexport function uint8ArrayToBase64(array, {urlSafe = false} = {}) {\n\tassertUint8Array(array);\n\n\tlet base64;\n\n\tif (array.length < MAX_BLOCK_SIZE) {\n\t// Required as `btoa` and `atob` don't properly support Unicode: https://developer.mozilla.org/en-US/docs/Glossary/Base64#the_unicode_problem\n\t\tbase64 = globalThis.btoa(String.fromCodePoint.apply(this, array));\n\t} else {\n\t\tbase64 = '';\n\t\tfor (const value of array) {\n\t\t\tbase64 += String.fromCodePoint(value);\n\t\t}\n\n\t\tbase64 = globalThis.btoa(base64);\n\t}\n\n\treturn urlSafe ? base64ToBase64Url(base64) : base64;\n}\n\nexport function base64ToUint8Array(base64String) {\n\tassertString(base64String);\n\treturn Uint8Array.from(globalThis.atob(base64UrlToBase64(base64String)), x => x.codePointAt(0));\n}\n\nexport function stringToBase64(string, {urlSafe = false} = {}) {\n\tassertString(string);\n\treturn uint8ArrayToBase64(stringToUint8Array(string), {urlSafe});\n}\n\nexport function base64ToString(base64String) {\n\tassertString(base64String);\n\treturn uint8ArrayToString(base64ToUint8Array(base64String));\n}\n\nconst byteToHexLookupTable = Array.from({length: 256}, (_, index) => index.toString(16).padStart(2, '0'));\n\nexport function uint8ArrayToHex(array) {\n\tassertUint8Array(array);\n\n\t// Concatenating a string is faster than using an array.\n\tlet hexString = '';\n\n\t// eslint-disable-next-line unicorn/no-for-loop -- Max performance is critical.\n\tfor (let index = 0; index < array.length; index++) {\n\t\thexString += byteToHexLookupTable[array[index]];\n\t}\n\n\treturn hexString;\n}\n\nconst hexToDecimalLookupTable = {\n\t0: 0,\n\t1: 1,\n\t2: 2,\n\t3: 3,\n\t4: 4,\n\t5: 5,\n\t6: 6,\n\t7: 7,\n\t8: 8,\n\t9: 9,\n\ta: 10,\n\tb: 11,\n\tc: 12,\n\td: 13,\n\te: 14,\n\tf: 15,\n\tA: 10,\n\tB: 11,\n\tC: 12,\n\tD: 13,\n\tE: 14,\n\tF: 15,\n};\n\nexport function hexToUint8Array(hexString) {\n\tassertString(hexString);\n\n\tif (hexString.length % 2 !== 0) {\n\t\tthrow new Error('Invalid Hex string length.');\n\t}\n\n\tconst resultLength = hexString.length / 2;\n\tconst bytes = new Uint8Array(resultLength);\n\n\tfor (let index = 0; index < resultLength; index++) {\n\t\tconst highNibble = hexToDecimalLookupTable[hexString[index * 2]];\n\t\tconst lowNibble = hexToDecimalLookupTable[hexString[(index * 2) + 1]];\n\n\t\tif (highNibble === undefined || lowNibble === undefined) {\n\t\t\tthrow new Error(`Invalid Hex character encountered at position ${index * 2}`);\n\t\t}\n\n\t\tbytes[index] = (highNibble << 4) | lowNibble; // eslint-disable-line no-bitwise\n\t}\n\n\treturn bytes;\n}\n\n/**\n@param {DataView} view\n@returns {number}\n*/\nexport function getUintBE(view) {\n\tconst {byteLength} = view;\n\n\tif (byteLength === 6) {\n\t\treturn (view.getUint16(0) * (2 ** 32)) + view.getUint32(2);\n\t}\n\n\tif (byteLength === 5) {\n\t\treturn (view.getUint8(0) * (2 ** 32)) + view.getUint32(1);\n\t}\n\n\tif (byteLength === 4) {\n\t\treturn view.getUint32(0);\n\t}\n\n\tif (byteLength === 3) {\n\t\treturn (view.getUint8(0) * (2 ** 16)) + view.getUint16(1);\n\t}\n\n\tif (byteLength === 2) {\n\t\treturn view.getUint16(0);\n\t}\n\n\tif (byteLength === 1) {\n\t\treturn view.getUint8(0);\n\t}\n}\n\n/**\n@param {Uint8Array} array\n@param {Uint8Array} value\n@returns {number}\n*/\nexport function indexOf(array, value) {\n\tconst arrayLength = array.length;\n\tconst valueLength = value.length;\n\n\tif (valueLength === 0) {\n\t\treturn -1;\n\t}\n\n\tif (valueLength > arrayLength) {\n\t\treturn -1;\n\t}\n\n\tconst validOffsetLength = arrayLength - valueLength;\n\n\tfor (let index = 0; index <= validOffsetLength; index++) {\n\t\tlet isMatch = true;\n\t\tfor (let index2 = 0; index2 < valueLength; index2++) {\n\t\t\tif (array[index + index2] !== value[index2]) {\n\t\t\t\tisMatch = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (isMatch) {\n\t\t\treturn index;\n\t\t}\n\t}\n\n\treturn -1;\n}\n\n/**\n@param {Uint8Array} array\n@param {Uint8Array} value\n@returns {boolean}\n*/\nexport function includes(array, value) {\n\treturn indexOf(array, value) !== -1;\n}\n","import {StringType} from 'token-types';\n\nexport function stringToBytes(string, encoding) {\n\tif (encoding === 'utf-16le') {\n\t\tconst bytes = [];\n\t\tfor (let index = 0; index < string.length; index++) {\n\t\t\tconst code = string.charCodeAt(index); // eslint-disable-line unicorn/prefer-code-point\n\t\t\tbytes.push(code & 0xFF, (code >> 8) & 0xFF); // High byte\n\t\t}\n\n\t\treturn bytes;\n\t}\n\n\tif (encoding === 'utf-16be') {\n\t\tconst bytes = [];\n\t\tfor (let index = 0; index < string.length; index++) {\n\t\t\tconst code = string.charCodeAt(index); // eslint-disable-line unicorn/prefer-code-point\n\t\t\tbytes.push((code >> 8) & 0xFF, code & 0xFF); // Low byte\n\t\t}\n\n\t\treturn bytes;\n\t}\n\n\treturn [...string].map(character => character.charCodeAt(0)); // eslint-disable-line unicorn/prefer-code-point\n}\n\n/**\nChecks whether the TAR checksum is valid.\n\n@param {Uint8Array} arrayBuffer - The TAR header `[offset ... offset + 512]`.\n@param {number} offset - TAR header offset.\n@returns {boolean} `true` if the TAR checksum is valid, otherwise `false`.\n*/\nexport function tarHeaderChecksumMatches(arrayBuffer, offset = 0) {\n\tconst readSum = Number.parseInt(new StringType(6).get(arrayBuffer, 148).replace(/\\0.*$/, '').trim(), 8); // Read sum in header\n\tif (Number.isNaN(readSum)) {\n\t\treturn false;\n\t}\n\n\tlet sum = 8 * 0x20; // Initialize signed bit sum\n\n\tfor (let index = offset; index < offset + 148; index++) {\n\t\tsum += arrayBuffer[index];\n\t}\n\n\tfor (let index = offset + 156; index < offset + 512; index++) {\n\t\tsum += arrayBuffer[index];\n\t}\n\n\treturn readSum === sum;\n}\n\n/**\nID3 UINT32 sync-safe tokenizer token.\n28 bits (representing up to 256MB) integer, the msb is 0 to avoid \"false syncsignals\".\n*/\nexport const uint32SyncSafeToken = {\n\tget: (buffer, offset) => (buffer[offset + 3] & 0x7F) | ((buffer[offset + 2]) << 7) | ((buffer[offset + 1]) << 14) | ((buffer[offset]) << 21),\n\tlen: 4,\n};\n","export const extensions = [\n\t'jpg',\n\t'png',\n\t'apng',\n\t'gif',\n\t'webp',\n\t'flif',\n\t'xcf',\n\t'cr2',\n\t'cr3',\n\t'orf',\n\t'arw',\n\t'dng',\n\t'nef',\n\t'rw2',\n\t'raf',\n\t'tif',\n\t'bmp',\n\t'icns',\n\t'jxr',\n\t'psd',\n\t'indd',\n\t'zip',\n\t'tar',\n\t'rar',\n\t'gz',\n\t'bz2',\n\t'7z',\n\t'dmg',\n\t'mp4',\n\t'mid',\n\t'mkv',\n\t'webm',\n\t'mov',\n\t'avi',\n\t'mpg',\n\t'mp2',\n\t'mp3',\n\t'm4a',\n\t'oga',\n\t'ogg',\n\t'ogv',\n\t'opus',\n\t'flac',\n\t'wav',\n\t'spx',\n\t'amr',\n\t'pdf',\n\t'epub',\n\t'elf',\n\t'macho',\n\t'exe',\n\t'swf',\n\t'rtf',\n\t'wasm',\n\t'woff',\n\t'woff2',\n\t'eot',\n\t'ttf',\n\t'otf',\n\t'ttc',\n\t'ico',\n\t'flv',\n\t'ps',\n\t'xz',\n\t'sqlite',\n\t'nes',\n\t'crx',\n\t'xpi',\n\t'cab',\n\t'deb',\n\t'ar',\n\t'rpm',\n\t'Z',\n\t'lz',\n\t'cfb',\n\t'mxf',\n\t'mts',\n\t'blend',\n\t'bpg',\n\t'docx',\n\t'pptx',\n\t'xlsx',\n\t'3gp',\n\t'3g2',\n\t'j2c',\n\t'jp2',\n\t'jpm',\n\t'jpx',\n\t'mj2',\n\t'aif',\n\t'qcp',\n\t'odt',\n\t'ods',\n\t'odp',\n\t'xml',\n\t'mobi',\n\t'heic',\n\t'cur',\n\t'ktx',\n\t'ape',\n\t'wv',\n\t'dcm',\n\t'ics',\n\t'glb',\n\t'pcap',\n\t'dsf',\n\t'lnk',\n\t'alias',\n\t'voc',\n\t'ac3',\n\t'm4v',\n\t'm4p',\n\t'm4b',\n\t'f4v',\n\t'f4p',\n\t'f4b',\n\t'f4a',\n\t'mie',\n\t'asf',\n\t'ogm',\n\t'ogx',\n\t'mpc',\n\t'arrow',\n\t'shp',\n\t'aac',\n\t'mp1',\n\t'it',\n\t's3m',\n\t'xm',\n\t'skp',\n\t'avif',\n\t'eps',\n\t'lzh',\n\t'pgp',\n\t'asar',\n\t'stl',\n\t'chm',\n\t'3mf',\n\t'zst',\n\t'jxl',\n\t'vcf',\n\t'jls',\n\t'pst',\n\t'dwg',\n\t'parquet',\n\t'class',\n\t'arj',\n\t'cpio',\n\t'ace',\n\t'avro',\n\t'icc',\n\t'fbx',\n\t'vsdx',\n\t'vtt',\n\t'apk',\n\t'drc',\n\t'lz4',\n\t'potx',\n\t'xltx',\n\t'dotx',\n\t'xltm',\n\t'ott',\n\t'ots',\n\t'otp',\n\t'odg',\n\t'otg',\n\t'xlsm',\n\t'docm',\n\t'dotm',\n\t'potm',\n\t'pptm',\n\t'jar',\n\t'rm',\n\t'ppsm',\n\t'ppsx',\n\t'tar.gz',\n\t'reg',\n\t'dat',\n];\n\nexport const mimeTypes = [\n\t'image/jpeg',\n\t'image/png',\n\t'image/gif',\n\t'image/webp',\n\t'image/flif',\n\t'image/x-xcf',\n\t'image/x-canon-cr2',\n\t'image/x-canon-cr3',\n\t'image/tiff',\n\t'image/bmp',\n\t'image/vnd.ms-photo',\n\t'image/vnd.adobe.photoshop',\n\t'application/x-indesign',\n\t'application/epub+zip',\n\t'application/x-xpinstall',\n\t'application/vnd.ms-powerpoint.slideshow.macroenabled.12',\n\t'application/vnd.oasis.opendocument.text',\n\t'application/vnd.oasis.opendocument.spreadsheet',\n\t'application/vnd.oasis.opendocument.presentation',\n\t'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n\t'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n\t'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n\t'application/vnd.openxmlformats-officedocument.presentationml.slideshow',\n\t'application/zip',\n\t'application/x-tar',\n\t'application/x-rar-compressed',\n\t'application/gzip',\n\t'application/x-bzip2',\n\t'application/x-7z-compressed',\n\t'application/x-apple-diskimage',\n\t'application/vnd.apache.arrow.file',\n\t'video/mp4',\n\t'audio/midi',\n\t'video/matroska',\n\t'video/webm',\n\t'video/quicktime',\n\t'video/vnd.avi',\n\t'audio/wav',\n\t'audio/qcelp',\n\t'audio/x-ms-asf',\n\t'video/x-ms-asf',\n\t'application/vnd.ms-asf',\n\t'video/mpeg',\n\t'video/3gpp',\n\t'audio/mpeg',\n\t'audio/mp4', // RFC 4337\n\t'video/ogg',\n\t'audio/ogg',\n\t'audio/ogg; codecs=opus',\n\t'application/ogg',\n\t'audio/flac',\n\t'audio/ape',\n\t'audio/wavpack',\n\t'audio/amr',\n\t'application/pdf',\n\t'application/x-elf',\n\t'application/x-mach-binary',\n\t'application/x-msdownload',\n\t'application/x-shockwave-flash',\n\t'application/rtf',\n\t'application/wasm',\n\t'font/woff',\n\t'font/woff2',\n\t'application/vnd.ms-fontobject',\n\t'font/ttf',\n\t'font/otf',\n\t'font/collection',\n\t'image/x-icon',\n\t'video/x-flv',\n\t'application/postscript',\n\t'application/eps',\n\t'application/x-xz',\n\t'application/x-sqlite3',\n\t'application/x-nintendo-nes-rom',\n\t'application/x-google-chrome-extension',\n\t'application/vnd.ms-cab-compressed',\n\t'application/x-deb',\n\t'application/x-unix-archive',\n\t'application/x-rpm',\n\t'application/x-compress',\n\t'application/x-lzip',\n\t'application/x-cfb',\n\t'application/x-mie',\n\t'application/mxf',\n\t'video/mp2t',\n\t'application/x-blender',\n\t'image/bpg',\n\t'image/j2c',\n\t'image/jp2',\n\t'image/jpx',\n\t'image/jpm',\n\t'image/mj2',\n\t'audio/aiff',\n\t'application/xml',\n\t'application/x-mobipocket-ebook',\n\t'image/heif',\n\t'image/heif-sequence',\n\t'image/heic',\n\t'image/heic-sequence',\n\t'image/icns',\n\t'image/ktx',\n\t'application/dicom',\n\t'audio/x-musepack',\n\t'text/calendar',\n\t'text/vcard',\n\t'text/vtt',\n\t'model/gltf-binary',\n\t'application/vnd.tcpdump.pcap',\n\t'audio/x-dsf', // Non-standard\n\t'application/x.ms.shortcut', // Invented by us\n\t'application/x.apple.alias', // Invented by us\n\t'audio/x-voc',\n\t'audio/vnd.dolby.dd-raw',\n\t'audio/x-m4a',\n\t'image/apng',\n\t'image/x-olympus-orf',\n\t'image/x-sony-arw',\n\t'image/x-adobe-dng',\n\t'image/x-nikon-nef',\n\t'image/x-panasonic-rw2',\n\t'image/x-fujifilm-raf',\n\t'video/x-m4v',\n\t'video/3gpp2',\n\t'application/x-esri-shape',\n\t'audio/aac',\n\t'audio/x-it',\n\t'audio/x-s3m',\n\t'audio/x-xm',\n\t'video/MP1S',\n\t'video/MP2P',\n\t'application/vnd.sketchup.skp',\n\t'image/avif',\n\t'application/x-lzh-compressed',\n\t'application/pgp-encrypted',\n\t'application/x-asar',\n\t'model/stl',\n\t'application/vnd.ms-htmlhelp',\n\t'model/3mf',\n\t'image/jxl',\n\t'application/zstd',\n\t'image/jls',\n\t'application/vnd.ms-outlook',\n\t'image/vnd.dwg',\n\t'application/vnd.apache.parquet',\n\t'application/java-vm',\n\t'application/x-arj',\n\t'application/x-cpio',\n\t'application/x-ace-compressed',\n\t'application/avro',\n\t'application/vnd.iccprofile',\n\t'application/x.autodesk.fbx', // Invented by us\n\t'application/vnd.visio',\n\t'application/vnd.android.package-archive',\n\t'application/vnd.google.draco', // Invented by us\n\t'application/x-lz4', // Invented by us\n\t'application/vnd.openxmlformats-officedocument.presentationml.template',\n\t'application/vnd.openxmlformats-officedocument.spreadsheetml.template',\n\t'application/vnd.openxmlformats-officedocument.wordprocessingml.template',\n\t'application/vnd.ms-excel.template.macroenabled.12',\n\t'application/vnd.oasis.opendocument.text-template',\n\t'application/vnd.oasis.opendocument.spreadsheet-template',\n\t'application/vnd.oasis.opendocument.presentation-template',\n\t'application/vnd.oasis.opendocument.graphics',\n\t'application/vnd.oasis.opendocument.graphics-template',\n\t'application/vnd.ms-excel.sheet.macroenabled.12',\n\t'application/vnd.ms-word.document.macroenabled.12',\n\t'application/vnd.ms-word.template.macroenabled.12',\n\t'application/vnd.ms-powerpoint.template.macroenabled.12',\n\t'application/vnd.ms-powerpoint.presentation.macroenabled.12',\n\t'application/java-archive',\n\t'application/vnd.rn-realmedia',\n\t'application/x-ms-regedit',\n\t'application/x-ft-windows-registry-hive',\n];\n","/**\nPrimary entry point, Node.js specific entry point is index.js\n*/\n\nimport * as Token from 'token-types';\nimport * as strtok3 from 'strtok3/core';\nimport {ZipHandler, GzipHandler} from '@tokenizer/inflate';\nimport {getUintBE} from 'uint8array-extras';\nimport {\n\tstringToBytes,\n\ttarHeaderChecksumMatches,\n\tuint32SyncSafeToken,\n} from './util.js';\nimport {extensions, mimeTypes} from './supported.js';\n\nexport const reasonableDetectionSizeInBytes = 4100; // A fair amount of file-types are detectable within this range.\n\nexport async function fileTypeFromStream(stream, options) {\n\treturn new FileTypeParser(options).fromStream(stream);\n}\n\nexport async function fileTypeFromBuffer(input, options) {\n\treturn new FileTypeParser(options).fromBuffer(input);\n}\n\nexport async function fileTypeFromBlob(blob, options) {\n\treturn new FileTypeParser(options).fromBlob(blob);\n}\n\nfunction getFileTypeFromMimeType(mimeType) {\n\tmimeType = mimeType.toLowerCase();\n\tswitch (mimeType) {\n\t\tcase 'application/epub+zip':\n\t\t\treturn {\n\t\t\t\text: 'epub',\n\t\t\t\tmime: mimeType,\n\t\t\t};\n\t\tcase 'application/vnd.oasis.opendocument.text':\n\t\t\treturn {\n\t\t\t\text: 'odt',\n\t\t\t\tmime: mimeType,\n\t\t\t};\n\t\tcase 'application/vnd.oasis.opendocument.text-template':\n\t\t\treturn {\n\t\t\t\text: 'ott',\n\t\t\t\tmime: mimeType,\n\t\t\t};\n\t\tcase 'application/vnd.oasis.opendocument.spreadsheet':\n\t\t\treturn {\n\t\t\t\text: 'ods',\n\t\t\t\tmime: mimeType,\n\t\t\t};\n\t\tcase 'application/vnd.oasis.opendocument.spreadsheet-template':\n\t\t\treturn {\n\t\t\t\text: 'ots',\n\t\t\t\tmime: mimeType,\n\t\t\t};\n\t\tcase 'application/vnd.oasis.opendocument.presentation':\n\t\t\treturn {\n\t\t\t\text: 'odp',\n\t\t\t\tmime: mimeType,\n\t\t\t};\n\t\tcase 'application/vnd.oasis.opendocument.presentation-template':\n\t\t\treturn {\n\t\t\t\text: 'otp',\n\t\t\t\tmime: mimeType,\n\t\t\t};\n\t\tcase 'application/vnd.oasis.opendocument.graphics':\n\t\t\treturn {\n\t\t\t\text: 'odg',\n\t\t\t\tmime: mimeType,\n\t\t\t};\n\t\tcase 'application/vnd.oasis.opendocument.graphics-template':\n\t\t\treturn {\n\t\t\t\text: 'otg',\n\t\t\t\tmime: mimeType,\n\t\t\t};\n\t\tcase 'application/vnd.openxmlformats-officedocument.presentationml.slideshow':\n\t\t\treturn {\n\t\t\t\text: 'ppsx',\n\t\t\t\tmime: mimeType,\n\t\t\t};\n\t\tcase 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':\n\t\t\treturn {\n\t\t\t\text: 'xlsx',\n\t\t\t\tmime: mimeType,\n\t\t\t};\n\t\tcase 'application/vnd.ms-excel.sheet.macroenabled':\n\t\t\treturn {\n\t\t\t\text: 'xlsm',\n\t\t\t\tmime: 'application/vnd.ms-excel.sheet.macroenabled.12',\n\t\t\t};\n\t\tcase 'application/vnd.openxmlformats-officedocument.spreadsheetml.template':\n\t\t\treturn {\n\t\t\t\text: 'xltx',\n\t\t\t\tmime: mimeType,\n\t\t\t};\n\t\tcase 'application/vnd.ms-excel.template.macroenabled':\n\t\t\treturn {\n\t\t\t\text: 'xltm',\n\t\t\t\tmime: 'application/vnd.ms-excel.template.macroenabled.12',\n\t\t\t};\n\t\tcase 'application/vnd.ms-powerpoint.slideshow.macroenabled':\n\t\t\treturn {\n\t\t\t\text: 'ppsm',\n\t\t\t\tmime: 'application/vnd.ms-powerpoint.slideshow.macroenabled.12',\n\t\t\t};\n\t\tcase 'application/vnd.openxmlformats-officedocument.wordprocessingml.document':\n\t\t\treturn {\n\t\t\t\text: 'docx',\n\t\t\t\tmime: mimeType,\n\t\t\t};\n\t\tcase 'application/vnd.ms-word.document.macroenabled':\n\t\t\treturn {\n\t\t\t\text: 'docm',\n\t\t\t\tmime: 'application/vnd.ms-word.document.macroenabled.12',\n\t\t\t};\n\t\tcase 'application/vnd.openxmlformats-officedocument.wordprocessingml.template':\n\t\t\treturn {\n\t\t\t\text: 'dotx',\n\t\t\t\tmime: mimeType,\n\t\t\t};\n\t\tcase 'application/vnd.ms-word.template.macroenabledtemplate':\n\t\t\treturn {\n\t\t\t\text: 'dotm',\n\t\t\t\tmime: 'application/vnd.ms-word.template.macroenabled.12',\n\t\t\t};\n\t\tcase 'application/vnd.openxmlformats-officedocument.presentationml.template':\n\t\t\treturn {\n\t\t\t\text: 'potx',\n\t\t\t\tmime: mimeType,\n\t\t\t};\n\t\tcase 'application/vnd.ms-powerpoint.template.macroenabled':\n\t\t\treturn {\n\t\t\t\text: 'potm',\n\t\t\t\tmime: 'application/vnd.ms-powerpoint.template.macroenabled.12',\n\t\t\t};\n\t\tcase 'application/vnd.openxmlformats-officedocument.presentationml.presentation':\n\t\t\treturn {\n\t\t\t\text: 'pptx',\n\t\t\t\tmime: mimeType,\n\t\t\t};\n\t\tcase 'application/vnd.ms-powerpoint.presentation.macroenabled':\n\t\t\treturn {\n\t\t\t\text: 'pptm',\n\t\t\t\tmime: 'application/vnd.ms-powerpoint.presentation.macroenabled.12',\n\t\t\t};\n\t\tcase 'application/vnd.ms-visio.drawing':\n\t\t\treturn {\n\t\t\t\text: 'vsdx',\n\t\t\t\tmime: 'application/vnd.visio',\n\t\t\t};\n\t\tcase 'application/vnd.ms-package.3dmanufacturing-3dmodel+xml':\n\t\t\treturn {\n\t\t\t\text: '3mf',\n\t\t\t\tmime: 'model/3mf',\n\t\t\t};\n\t\tdefault:\n\t}\n}\n\nfunction _check(buffer, headers, options) {\n\toptions = {\n\t\toffset: 0,\n\t\t...options,\n\t};\n\n\tfor (const [index, header] of headers.entries()) {\n\t\t// If a bitmask is set\n\t\tif (options.mask) {\n\t\t\t// If header doesn't equal `buf` with bits masked off\n\t\t\tif (header !== (options.mask[index] & buffer[index + options.offset])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else if (header !== buffer[index + options.offset]) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nexport async function fileTypeFromTokenizer(tokenizer, options) {\n\treturn new FileTypeParser(options).fromTokenizer(tokenizer);\n}\n\nexport async function fileTypeStream(webStream, options) {\n\treturn new FileTypeParser(options).toDetectionStream(webStream, options);\n}\n\nexport class FileTypeParser {\n\tconstructor(options) {\n\t\tthis.options = {\n\t\t\tmpegOffsetTolerance: 0,\n\t\t\t...options,\n\t\t};\n\n\t\tthis.detectors = [...(options?.customDetectors ?? []),\n\t\t\t{id: 'core', detect: this.detectConfident},\n\t\t\t{id: 'core.imprecise', detect: this.detectImprecise}];\n\t\tthis.tokenizerOptions = {\n\t\t\tabortSignal: options?.signal,\n\t\t};\n\t}\n\n\tasync fromTokenizer(tokenizer) {\n\t\tconst initialPosition = tokenizer.position;\n\n\t\t// Iterate through all file-type detectors\n\t\tfor (const detector of this.detectors) {\n\t\t\tconst fileType = await detector.detect(tokenizer);\n\t\t\tif (fileType) {\n\t\t\t\treturn fileType;\n\t\t\t}\n\n\t\t\tif (initialPosition !== tokenizer.position) {\n\t\t\t\treturn undefined; // Cannot proceed scanning of the tokenizer is at an arbitrary position\n\t\t\t}\n\t\t}\n\t}\n\n\tasync fromBuffer(input) {\n\t\tif (!(input instanceof Uint8Array || input instanceof ArrayBuffer)) {\n\t\t\tthrow new TypeError(`Expected the \\`input\\` argument to be of type \\`Uint8Array\\` or \\`ArrayBuffer\\`, got \\`${typeof input}\\``);\n\t\t}\n\n\t\tconst buffer = input instanceof Uint8Array ? input : new Uint8Array(input);\n\n\t\tif (!(buffer?.length > 1)) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn this.fromTokenizer(strtok3.fromBuffer(buffer, this.tokenizerOptions));\n\t}\n\n\tasync fromBlob(blob) {\n\t\tconst tokenizer = strtok3.fromBlob(blob, this.tokenizerOptions);\n\t\ttry {\n\t\t\treturn await this.fromTokenizer(tokenizer);\n\t\t} finally {\n\t\t\tawait tokenizer.close();\n\t\t}\n\t}\n\n\tasync fromStream(stream) {\n\t\tconst tokenizer = strtok3.fromWebStream(stream, this.tokenizerOptions);\n\t\ttry {\n\t\t\treturn await this.fromTokenizer(tokenizer);\n\t\t} finally {\n\t\t\tawait tokenizer.close();\n\t\t}\n\t}\n\n\tasync toDetectionStream(stream, options) {\n\t\tconst {sampleSize = reasonableDetectionSizeInBytes} = options;\n\t\tlet detectedFileType;\n\t\tlet firstChunk;\n\n\t\tconst reader = stream.getReader({mode: 'byob'});\n\t\ttry {\n\t\t\t// Read the first chunk from the stream\n\t\t\tconst {value: chunk, done} = await reader.read(new Uint8Array(sampleSize));\n\t\t\tfirstChunk = chunk;\n\t\t\tif (!done && chunk) {\n\t\t\t\ttry {\n\t\t\t\t\t// Attempt to detect the file type from the chunk\n\t\t\t\t\tdetectedFileType = await this.fromBuffer(chunk.subarray(0, sampleSize));\n\t\t\t\t} catch (error) {\n\t\t\t\t\tif (!(error instanceof strtok3.EndOfStreamError)) {\n\t\t\t\t\t\tthrow error; // Re-throw non-EndOfStreamError\n\t\t\t\t\t}\n\n\t\t\t\t\tdetectedFileType = undefined;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfirstChunk = chunk;\n\t\t} finally {\n\t\t\treader.releaseLock(); // Ensure the reader is released\n\t\t}\n\n\t\t// Create a new ReadableStream to manage locking issues\n\t\tconst transformStream = new TransformStream({\n\t\t\tasync start(controller) {\n\t\t\t\tcontroller.enqueue(firstChunk); // Enqueue the initial chunk\n\t\t\t},\n\t\t\ttransform(chunk, controller) {\n\t\t\t\t// Pass through the chunks without modification\n\t\t\t\tcontroller.enqueue(chunk);\n\t\t\t},\n\t\t});\n\n\t\tconst newStream = stream.pipeThrough(transformStream);\n\t\tnewStream.fileType = detectedFileType;\n\n\t\treturn newStream;\n\t}\n\n\tcheck(header, options) {\n\t\treturn _check(this.buffer, header, options);\n\t}\n\n\tcheckString(header, options) {\n\t\treturn this.check(stringToBytes(header, options?.encoding), options);\n\t}\n\n\t// Detections with a high degree of certainty in identifying the correct file type\n\tdetectConfident = async tokenizer => {\n\t\tthis.buffer = new Uint8Array(reasonableDetectionSizeInBytes);\n\n\t\t// Keep reading until EOF if the file size is unknown.\n\t\tif (tokenizer.fileInfo.size === undefined) {\n\t\t\ttokenizer.fileInfo.size = Number.MAX_SAFE_INTEGER;\n\t\t}\n\n\t\tthis.tokenizer = tokenizer;\n\n\t\tawait tokenizer.peekBuffer(this.buffer, {length: 32, mayBeLess: true});\n\n\t\t// -- 2-byte signatures --\n\n\t\tif (this.check([0x42, 0x4D])) {\n\t\t\treturn {\n\t\t\t\text: 'bmp',\n\t\t\t\tmime: 'image/bmp',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x0B, 0x77])) {\n\t\t\treturn {\n\t\t\t\text: 'ac3',\n\t\t\t\tmime: 'audio/vnd.dolby.dd-raw',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x78, 0x01])) {\n\t\t\treturn {\n\t\t\t\text: 'dmg',\n\t\t\t\tmime: 'application/x-apple-diskimage',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x4D, 0x5A])) {\n\t\t\treturn {\n\t\t\t\text: 'exe',\n\t\t\t\tmime: 'application/x-msdownload',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x25, 0x21])) {\n\t\t\tawait tokenizer.peekBuffer(this.buffer, {length: 24, mayBeLess: true});\n\n\t\t\tif (\n\t\t\t\tthis.checkString('PS-Adobe-', {offset: 2})\n\t\t\t\t&& this.checkString(' EPSF-', {offset: 14})\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'eps',\n\t\t\t\t\tmime: 'application/eps',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\text: 'ps',\n\t\t\t\tmime: 'application/postscript',\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tthis.check([0x1F, 0xA0])\n\t\t\t|| this.check([0x1F, 0x9D])\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'Z',\n\t\t\t\tmime: 'application/x-compress',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0xC7, 0x71])) {\n\t\t\treturn {\n\t\t\t\text: 'cpio',\n\t\t\t\tmime: 'application/x-cpio',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x60, 0xEA])) {\n\t\t\treturn {\n\t\t\t\text: 'arj',\n\t\t\t\tmime: 'application/x-arj',\n\t\t\t};\n\t\t}\n\n\t\t// -- 3-byte signatures --\n\n\t\tif (this.check([0xEF, 0xBB, 0xBF])) { // UTF-8-BOM\n\t\t\t// Strip off UTF-8-BOM\n\t\t\tthis.tokenizer.ignore(3);\n\t\t\treturn this.detectConfident(tokenizer);\n\t\t}\n\n\t\tif (this.check([0x47, 0x49, 0x46])) {\n\t\t\treturn {\n\t\t\t\text: 'gif',\n\t\t\t\tmime: 'image/gif',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x49, 0x49, 0xBC])) {\n\t\t\treturn {\n\t\t\t\text: 'jxr',\n\t\t\t\tmime: 'image/vnd.ms-photo',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x1F, 0x8B, 0x8])) {\n\t\t\tconst gzipHandler = new GzipHandler(tokenizer);\n\n\t\t\tconst stream = gzipHandler.inflate();\n\t\t\tlet shouldCancelStream = true;\n\t\t\ttry {\n\t\t\t\tlet compressedFileType;\n\t\t\t\ttry {\n\t\t\t\t\tcompressedFileType = await this.fromStream(stream);\n\t\t\t\t} catch {\n\t\t\t\t\tshouldCancelStream = false;\n\t\t\t\t}\n\n\t\t\t\tif (compressedFileType && compressedFileType.ext === 'tar') {\n\t\t\t\t\treturn {\n\t\t\t\t\t\text: 'tar.gz',\n\t\t\t\t\t\tmime: 'application/gzip',\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (shouldCancelStream) {\n\t\t\t\t\tawait stream.cancel();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\text: 'gz',\n\t\t\t\tmime: 'application/gzip',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x42, 0x5A, 0x68])) {\n\t\t\treturn {\n\t\t\t\text: 'bz2',\n\t\t\t\tmime: 'application/x-bzip2',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('ID3')) {\n\t\t\tawait tokenizer.ignore(6); // Skip ID3 header until the header size\n\t\t\tconst id3HeaderLength = await tokenizer.readToken(uint32SyncSafeToken);\n\t\t\tif (tokenizer.position + id3HeaderLength > tokenizer.fileInfo.size) {\n\t\t\t\t// Guess file type based on ID3 header for backward compatibility\n\t\t\t\treturn {\n\t\t\t\t\text: 'mp3',\n\t\t\t\t\tmime: 'audio/mpeg',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tawait tokenizer.ignore(id3HeaderLength);\n\t\t\treturn this.fromTokenizer(tokenizer); // Skip ID3 header, recursion\n\t\t}\n\n\t\t// Musepack, SV7\n\t\tif (this.checkString('MP+')) {\n\t\t\treturn {\n\t\t\t\text: 'mpc',\n\t\t\t\tmime: 'audio/x-musepack',\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\t(this.buffer[0] === 0x43 || this.buffer[0] === 0x46)\n\t\t\t&& this.check([0x57, 0x53], {offset: 1})\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'swf',\n\t\t\t\tmime: 'application/x-shockwave-flash',\n\t\t\t};\n\t\t}\n\n\t\t// -- 4-byte signatures --\n\n\t\t// Requires a sample size of 4 bytes\n\t\tif (this.check([0xFF, 0xD8, 0xFF])) {\n\t\t\tif (this.check([0xF7], {offset: 3})) { // JPG7/SOF55, indicating a ISO/IEC 14495 / JPEG-LS file\n\t\t\t\treturn {\n\t\t\t\t\text: 'jls',\n\t\t\t\t\tmime: 'image/jls',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\text: 'jpg',\n\t\t\t\tmime: 'image/jpeg',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x4F, 0x62, 0x6A, 0x01])) {\n\t\t\treturn {\n\t\t\t\text: 'avro',\n\t\t\t\tmime: 'application/avro',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('FLIF')) {\n\t\t\treturn {\n\t\t\t\text: 'flif',\n\t\t\t\tmime: 'image/flif',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('8BPS')) {\n\t\t\treturn {\n\t\t\t\text: 'psd',\n\t\t\t\tmime: 'image/vnd.adobe.photoshop',\n\t\t\t};\n\t\t}\n\n\t\t// Musepack, SV8\n\t\tif (this.checkString('MPCK')) {\n\t\t\treturn {\n\t\t\t\text: 'mpc',\n\t\t\t\tmime: 'audio/x-musepack',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('FORM')) {\n\t\t\treturn {\n\t\t\t\text: 'aif',\n\t\t\t\tmime: 'audio/aiff',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('icns', {offset: 0})) {\n\t\t\treturn {\n\t\t\t\text: 'icns',\n\t\t\t\tmime: 'image/icns',\n\t\t\t};\n\t\t}\n\n\t\t// Zip-based file formats\n\t\t// Need to be before the `zip` check\n\t\tif (this.check([0x50, 0x4B, 0x3, 0x4])) { // Local file header signature\n\t\t\tlet fileType;\n\t\t\tawait new ZipHandler(tokenizer).unzip(zipHeader => {\n\t\t\t\tswitch (zipHeader.filename) {\n\t\t\t\t\tcase 'META-INF/mozilla.rsa':\n\t\t\t\t\t\tfileType = {\n\t\t\t\t\t\t\text: 'xpi',\n\t\t\t\t\t\t\tmime: 'application/x-xpinstall',\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tstop: true,\n\t\t\t\t\t\t};\n\t\t\t\t\tcase 'META-INF/MANIFEST.MF':\n\t\t\t\t\t\tfileType = {\n\t\t\t\t\t\t\text: 'jar',\n\t\t\t\t\t\t\tmime: 'application/java-archive',\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tstop: true,\n\t\t\t\t\t\t};\n\t\t\t\t\tcase 'mimetype':\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tasync handler(fileData) {\n\t\t\t\t\t\t\t\t// Use TextDecoder to decode the UTF-8 encoded data\n\t\t\t\t\t\t\t\tconst mimeType = new TextDecoder('utf-8').decode(fileData).trim();\n\t\t\t\t\t\t\t\tfileType = getFileTypeFromMimeType(mimeType);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tstop: true,\n\t\t\t\t\t\t};\n\n\t\t\t\t\tcase '[Content_Types].xml':\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tasync handler(fileData) {\n\t\t\t\t\t\t\t\t// Use TextDecoder to decode the UTF-8 encoded data\n\t\t\t\t\t\t\t\tlet xmlContent = new TextDecoder('utf-8').decode(fileData);\n\t\t\t\t\t\t\t\tconst endPos = xmlContent.indexOf('.main+xml\"');\n\t\t\t\t\t\t\t\tif (endPos === -1) {\n\t\t\t\t\t\t\t\t\tconst mimeType = 'application/vnd.ms-package.3dmanufacturing-3dmodel+xml';\n\t\t\t\t\t\t\t\t\tif (xmlContent.includes(`ContentType=\"${mimeType}\"`)) {\n\t\t\t\t\t\t\t\t\t\tfileType = getFileTypeFromMimeType(mimeType);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\txmlContent = xmlContent.slice(0, Math.max(0, endPos));\n\t\t\t\t\t\t\t\t\tconst firstPos = xmlContent.lastIndexOf('\"');\n\t\t\t\t\t\t\t\t\tconst mimeType = xmlContent.slice(Math.max(0, firstPos + 1));\n\t\t\t\t\t\t\t\t\tfileType = getFileTypeFromMimeType(mimeType);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tstop: true,\n\t\t\t\t\t\t};\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (/classes\\d*\\.dex/.test(zipHeader.filename)) {\n\t\t\t\t\t\t\tfileType = {\n\t\t\t\t\t\t\t\text: 'apk',\n\t\t\t\t\t\t\t\tmime: 'application/vnd.android.package-archive',\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\treturn {stop: true};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn {};\n\t\t\t\t}\n\t\t\t}).catch(error => {\n\t\t\t\tif (!(error instanceof strtok3.EndOfStreamError)) {\n\t\t\t\t\tthrow error; // Re-throw non-EndOfStreamError\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn fileType ?? {\n\t\t\t\text: 'zip',\n\t\t\t\tmime: 'application/zip',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('OggS')) {\n\t\t\t// This is an OGG container\n\t\t\tawait tokenizer.ignore(28);\n\t\t\tconst type = new Uint8Array(8);\n\t\t\tawait tokenizer.readBuffer(type);\n\n\t\t\t// Needs to be before `ogg` check\n\t\t\tif (_check(type, [0x4F, 0x70, 0x75, 0x73, 0x48, 0x65, 0x61, 0x64])) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'opus',\n\t\t\t\t\tmime: 'audio/ogg; codecs=opus',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// If ' theora' in header.\n\t\t\tif (_check(type, [0x80, 0x74, 0x68, 0x65, 0x6F, 0x72, 0x61])) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'ogv',\n\t\t\t\t\tmime: 'video/ogg',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// If '\\x01video' in header.\n\t\t\tif (_check(type, [0x01, 0x76, 0x69, 0x64, 0x65, 0x6F, 0x00])) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'ogm',\n\t\t\t\t\tmime: 'video/ogg',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// If ' FLAC' in header  https://xiph.org/flac/faq.html\n\t\t\tif (_check(type, [0x7F, 0x46, 0x4C, 0x41, 0x43])) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'oga',\n\t\t\t\t\tmime: 'audio/ogg',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// 'Speex  ' in header https://en.wikipedia.org/wiki/Speex\n\t\t\tif (_check(type, [0x53, 0x70, 0x65, 0x65, 0x78, 0x20, 0x20])) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'spx',\n\t\t\t\t\tmime: 'audio/ogg',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// If '\\x01vorbis' in header\n\t\t\tif (_check(type, [0x01, 0x76, 0x6F, 0x72, 0x62, 0x69, 0x73])) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'ogg',\n\t\t\t\t\tmime: 'audio/ogg',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Default OGG container https://www.iana.org/assignments/media-types/application/ogg\n\t\t\treturn {\n\t\t\t\text: 'ogx',\n\t\t\t\tmime: 'application/ogg',\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tthis.check([0x50, 0x4B])\n\t\t\t&& (this.buffer[2] === 0x3 || this.buffer[2] === 0x5 || this.buffer[2] === 0x7)\n\t\t\t&& (this.buffer[3] === 0x4 || this.buffer[3] === 0x6 || this.buffer[3] === 0x8)\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'zip',\n\t\t\t\tmime: 'application/zip',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('MThd')) {\n\t\t\treturn {\n\t\t\t\text: 'mid',\n\t\t\t\tmime: 'audio/midi',\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tthis.checkString('wOFF')\n\t\t\t&& (\n\t\t\t\tthis.check([0x00, 0x01, 0x00, 0x00], {offset: 4})\n\t\t\t\t|| this.checkString('OTTO', {offset: 4})\n\t\t\t)\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'woff',\n\t\t\t\tmime: 'font/woff',\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tthis.checkString('wOF2')\n\t\t\t&& (\n\t\t\t\tthis.check([0x00, 0x01, 0x00, 0x00], {offset: 4})\n\t\t\t\t|| this.checkString('OTTO', {offset: 4})\n\t\t\t)\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'woff2',\n\t\t\t\tmime: 'font/woff2',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0xD4, 0xC3, 0xB2, 0xA1]) || this.check([0xA1, 0xB2, 0xC3, 0xD4])) {\n\t\t\treturn {\n\t\t\t\text: 'pcap',\n\t\t\t\tmime: 'application/vnd.tcpdump.pcap',\n\t\t\t};\n\t\t}\n\n\t\t// Sony DSD Stream File (DSF)\n\t\tif (this.checkString('DSD ')) {\n\t\t\treturn {\n\t\t\t\text: 'dsf',\n\t\t\t\tmime: 'audio/x-dsf', // Non-standard\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('LZIP')) {\n\t\t\treturn {\n\t\t\t\text: 'lz',\n\t\t\t\tmime: 'application/x-lzip',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('fLaC')) {\n\t\t\treturn {\n\t\t\t\text: 'flac',\n\t\t\t\tmime: 'audio/flac',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x42, 0x50, 0x47, 0xFB])) {\n\t\t\treturn {\n\t\t\t\text: 'bpg',\n\t\t\t\tmime: 'image/bpg',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('wvpk')) {\n\t\t\treturn {\n\t\t\t\text: 'wv',\n\t\t\t\tmime: 'audio/wavpack',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('%PDF')) {\n\t\t\t// Assume this is just a normal PDF\n\t\t\treturn {\n\t\t\t\text: 'pdf',\n\t\t\t\tmime: 'application/pdf',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x00, 0x61, 0x73, 0x6D])) {\n\t\t\treturn {\n\t\t\t\text: 'wasm',\n\t\t\t\tmime: 'application/wasm',\n\t\t\t};\n\t\t}\n\n\t\t// TIFF, little-endian type\n\t\tif (this.check([0x49, 0x49])) {\n\t\t\tconst fileType = await this.readTiffHeader(false);\n\t\t\tif (fileType) {\n\t\t\t\treturn fileType;\n\t\t\t}\n\t\t}\n\n\t\t// TIFF, big-endian type\n\t\tif (this.check([0x4D, 0x4D])) {\n\t\t\tconst fileType = await this.readTiffHeader(true);\n\t\t\tif (fileType) {\n\t\t\t\treturn fileType;\n\t\t\t}\n\t\t}\n\n\t\tif (this.checkString('MAC ')) {\n\t\t\treturn {\n\t\t\t\text: 'ape',\n\t\t\t\tmime: 'audio/ape',\n\t\t\t};\n\t\t}\n\n\t\t// https://github.com/file/file/blob/master/magic/Magdir/matroska\n\t\tif (this.check([0x1A, 0x45, 0xDF, 0xA3])) { // Root element: EBML\n\t\t\tasync function readField() {\n\t\t\t\tconst msb = await tokenizer.peekNumber(Token.UINT8);\n\t\t\t\tlet mask = 0x80;\n\t\t\t\tlet ic = 0; // 0 = A, 1 = B, 2 = C, 3 = D\n\n\t\t\t\twhile ((msb & mask) === 0 && mask !== 0) {\n\t\t\t\t\t++ic;\n\t\t\t\t\tmask >>= 1;\n\t\t\t\t}\n\n\t\t\t\tconst id = new Uint8Array(ic + 1);\n\t\t\t\tawait tokenizer.readBuffer(id);\n\t\t\t\treturn id;\n\t\t\t}\n\n\t\t\tasync function readElement() {\n\t\t\t\tconst idField = await readField();\n\t\t\t\tconst lengthField = await readField();\n\n\t\t\t\tlengthField[0] ^= 0x80 >> (lengthField.length - 1);\n\t\t\t\tconst nrLength = Math.min(6, lengthField.length); // JavaScript can max read 6 bytes integer\n\n\t\t\t\tconst idView = new DataView(idField.buffer);\n\t\t\t\tconst lengthView = new DataView(lengthField.buffer, lengthField.length - nrLength, nrLength);\n\n\t\t\t\treturn {\n\t\t\t\t\tid: getUintBE(idView),\n\t\t\t\t\tlen: getUintBE(lengthView),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tasync function readChildren(children) {\n\t\t\t\twhile (children > 0) {\n\t\t\t\t\tconst element = await readElement();\n\t\t\t\t\tif (element.id === 0x42_82) {\n\t\t\t\t\t\tconst rawValue = await tokenizer.readToken(new Token.StringType(element.len));\n\t\t\t\t\t\treturn rawValue.replaceAll(/\\00.*$/g, ''); // Return DocType\n\t\t\t\t\t}\n\n\t\t\t\t\tawait tokenizer.ignore(element.len); // ignore payload\n\t\t\t\t\t--children;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst re = await readElement();\n\t\t\tconst documentType = await readChildren(re.len);\n\n\t\t\tswitch (documentType) {\n\t\t\t\tcase 'webm':\n\t\t\t\t\treturn {\n\t\t\t\t\t\text: 'webm',\n\t\t\t\t\t\tmime: 'video/webm',\n\t\t\t\t\t};\n\n\t\t\t\tcase 'matroska':\n\t\t\t\t\treturn {\n\t\t\t\t\t\text: 'mkv',\n\t\t\t\t\t\tmime: 'video/matroska',\n\t\t\t\t\t};\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (this.checkString('SQLi')) {\n\t\t\treturn {\n\t\t\t\text: 'sqlite',\n\t\t\t\tmime: 'application/x-sqlite3',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x4E, 0x45, 0x53, 0x1A])) {\n\t\t\treturn {\n\t\t\t\text: 'nes',\n\t\t\t\tmime: 'application/x-nintendo-nes-rom',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('Cr24')) {\n\t\t\treturn {\n\t\t\t\text: 'crx',\n\t\t\t\tmime: 'application/x-google-chrome-extension',\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tthis.checkString('MSCF')\n\t\t\t|| this.checkString('ISc(')\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'cab',\n\t\t\t\tmime: 'application/vnd.ms-cab-compressed',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0xED, 0xAB, 0xEE, 0xDB])) {\n\t\t\treturn {\n\t\t\t\text: 'rpm',\n\t\t\t\tmime: 'application/x-rpm',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0xC5, 0xD0, 0xD3, 0xC6])) {\n\t\t\treturn {\n\t\t\t\text: 'eps',\n\t\t\t\tmime: 'application/eps',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x28, 0xB5, 0x2F, 0xFD])) {\n\t\t\treturn {\n\t\t\t\text: 'zst',\n\t\t\t\tmime: 'application/zstd',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x7F, 0x45, 0x4C, 0x46])) {\n\t\t\treturn {\n\t\t\t\text: 'elf',\n\t\t\t\tmime: 'application/x-elf',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x21, 0x42, 0x44, 0x4E])) {\n\t\t\treturn {\n\t\t\t\text: 'pst',\n\t\t\t\tmime: 'application/vnd.ms-outlook',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('PAR1') || this.checkString('PARE')) {\n\t\t\treturn {\n\t\t\t\text: 'parquet',\n\t\t\t\tmime: 'application/vnd.apache.parquet',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('ttcf')) {\n\t\t\treturn {\n\t\t\t\text: 'ttc',\n\t\t\t\tmime: 'font/collection',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0xCF, 0xFA, 0xED, 0xFE])) {\n\t\t\treturn {\n\t\t\t\text: 'macho',\n\t\t\t\tmime: 'application/x-mach-binary',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x04, 0x22, 0x4D, 0x18])) {\n\t\t\treturn {\n\t\t\t\text: 'lz4',\n\t\t\t\tmime: 'application/x-lz4', // Invented by us\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('regf')) {\n\t\t\treturn {\n\t\t\t\text: 'dat',\n\t\t\t\tmime: 'application/x-ft-windows-registry-hive',\n\t\t\t};\n\t\t}\n\n\t\t// -- 5-byte signatures --\n\n\t\tif (this.check([0x4F, 0x54, 0x54, 0x4F, 0x00])) {\n\t\t\treturn {\n\t\t\t\text: 'otf',\n\t\t\t\tmime: 'font/otf',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('#!AMR')) {\n\t\t\treturn {\n\t\t\t\text: 'amr',\n\t\t\t\tmime: 'audio/amr',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('{\\\\rtf')) {\n\t\t\treturn {\n\t\t\t\text: 'rtf',\n\t\t\t\tmime: 'application/rtf',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x46, 0x4C, 0x56, 0x01])) {\n\t\t\treturn {\n\t\t\t\text: 'flv',\n\t\t\t\tmime: 'video/x-flv',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('IMPM')) {\n\t\t\treturn {\n\t\t\t\text: 'it',\n\t\t\t\tmime: 'audio/x-it',\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tthis.checkString('-lh0-', {offset: 2})\n\t\t\t|| this.checkString('-lh1-', {offset: 2})\n\t\t\t|| this.checkString('-lh2-', {offset: 2})\n\t\t\t|| this.checkString('-lh3-', {offset: 2})\n\t\t\t|| this.checkString('-lh4-', {offset: 2})\n\t\t\t|| this.checkString('-lh5-', {offset: 2})\n\t\t\t|| this.checkString('-lh6-', {offset: 2})\n\t\t\t|| this.checkString('-lh7-', {offset: 2})\n\t\t\t|| this.checkString('-lzs-', {offset: 2})\n\t\t\t|| this.checkString('-lz4-', {offset: 2})\n\t\t\t|| this.checkString('-lz5-', {offset: 2})\n\t\t\t|| this.checkString('-lhd-', {offset: 2})\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'lzh',\n\t\t\t\tmime: 'application/x-lzh-compressed',\n\t\t\t};\n\t\t}\n\n\t\t// MPEG program stream (PS or MPEG-PS)\n\t\tif (this.check([0x00, 0x00, 0x01, 0xBA])) {\n\t\t\t//  MPEG-PS, MPEG-1 Part 1\n\t\t\tif (this.check([0x21], {offset: 4, mask: [0xF1]})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'mpg', // May also be .ps, .mpeg\n\t\t\t\t\tmime: 'video/MP1S',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// MPEG-PS, MPEG-2 Part 1\n\t\t\tif (this.check([0x44], {offset: 4, mask: [0xC4]})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'mpg', // May also be .mpg, .m2p, .vob or .sub\n\t\t\t\t\tmime: 'video/MP2P',\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif (this.checkString('ITSF')) {\n\t\t\treturn {\n\t\t\t\text: 'chm',\n\t\t\t\tmime: 'application/vnd.ms-htmlhelp',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0xCA, 0xFE, 0xBA, 0xBE])) {\n\t\t\treturn {\n\t\t\t\text: 'class',\n\t\t\t\tmime: 'application/java-vm',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('.RMF')) {\n\t\t\treturn {\n\t\t\t\text: 'rm',\n\t\t\t\tmime: 'application/vnd.rn-realmedia',\n\t\t\t};\n\t\t}\n\n\t\t// -- 5-byte signatures --\n\n\t\tif (this.checkString('DRACO')) {\n\t\t\treturn {\n\t\t\t\text: 'drc',\n\t\t\t\tmime: 'application/vnd.google.draco', // Invented by us\n\t\t\t};\n\t\t}\n\n\t\t// -- 6-byte signatures --\n\n\t\tif (this.check([0xFD, 0x37, 0x7A, 0x58, 0x5A, 0x00])) {\n\t\t\treturn {\n\t\t\t\text: 'xz',\n\t\t\t\tmime: 'application/x-xz',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('<?xml ')) {\n\t\t\treturn {\n\t\t\t\text: 'xml',\n\t\t\t\tmime: 'application/xml',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x37, 0x7A, 0xBC, 0xAF, 0x27, 0x1C])) {\n\t\t\treturn {\n\t\t\t\text: '7z',\n\t\t\t\tmime: 'application/x-7z-compressed',\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tthis.check([0x52, 0x61, 0x72, 0x21, 0x1A, 0x7])\n\t\t\t&& (this.buffer[6] === 0x0 || this.buffer[6] === 0x1)\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'rar',\n\t\t\t\tmime: 'application/x-rar-compressed',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('solid ')) {\n\t\t\treturn {\n\t\t\t\text: 'stl',\n\t\t\t\tmime: 'model/stl',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('AC')) {\n\t\t\tconst version = new Token.StringType(4, 'latin1').get(this.buffer, 2);\n\t\t\tif (version.match('^d*') && version >= 1000 && version <= 1050) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'dwg',\n\t\t\t\t\tmime: 'image/vnd.dwg',\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif (this.checkString('070707')) {\n\t\t\treturn {\n\t\t\t\text: 'cpio',\n\t\t\t\tmime: 'application/x-cpio',\n\t\t\t};\n\t\t}\n\n\t\t// -- 7-byte signatures --\n\n\t\tif (this.checkString('BLENDER')) {\n\t\t\treturn {\n\t\t\t\text: 'blend',\n\t\t\t\tmime: 'application/x-blender',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('!<arch>')) {\n\t\t\tawait tokenizer.ignore(8);\n\t\t\tconst string = await tokenizer.readToken(new Token.StringType(13, 'ascii'));\n\t\t\tif (string === 'debian-binary') {\n\t\t\t\treturn {\n\t\t\t\t\text: 'deb',\n\t\t\t\t\tmime: 'application/x-deb',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\text: 'ar',\n\t\t\t\tmime: 'application/x-unix-archive',\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tthis.checkString('WEBVTT')\n\t\t\t&&\t(\n\t\t\t\t// One of LF, CR, tab, space, or end of file must follow \"WEBVTT\" per the spec (see `fixture/fixture-vtt-*.vtt` for examples). Note that `\\0` is technically the null character (there is no such thing as an EOF character). However, checking for `\\0` gives us the same result as checking for the end of the stream.\n\t\t\t\t(['\\n', '\\r', '\\t', ' ', '\\0'].some(char7 => this.checkString(char7, {offset: 6}))))\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'vtt',\n\t\t\t\tmime: 'text/vtt',\n\t\t\t};\n\t\t}\n\n\t\t// -- 8-byte signatures --\n\n\t\tif (this.check([0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A])) {\n\t\t\t// APNG format (https://wiki.mozilla.org/APNG_Specification)\n\t\t\t// 1. Find the first IDAT (image data) chunk (49 44 41 54)\n\t\t\t// 2. Check if there is an \"acTL\" chunk before the IDAT one (61 63 54 4C)\n\n\t\t\t// Offset calculated as follows:\n\t\t\t// - 8 bytes: PNG signature\n\t\t\t// - 4 (length) + 4 (chunk type) + 13 (chunk data) + 4 (CRC): IHDR chunk\n\n\t\t\tawait tokenizer.ignore(8); // ignore PNG signature\n\n\t\t\tasync function readChunkHeader() {\n\t\t\t\treturn {\n\t\t\t\t\tlength: await tokenizer.readToken(Token.INT32_BE),\n\t\t\t\t\ttype: await tokenizer.readToken(new Token.StringType(4, 'latin1')),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tdo {\n\t\t\t\tconst chunk = await readChunkHeader();\n\t\t\t\tif (chunk.length < 0) {\n\t\t\t\t\treturn; // Invalid chunk length\n\t\t\t\t}\n\n\t\t\t\tswitch (chunk.type) {\n\t\t\t\t\tcase 'IDAT':\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\text: 'png',\n\t\t\t\t\t\t\tmime: 'image/png',\n\t\t\t\t\t\t};\n\t\t\t\t\tcase 'acTL':\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\text: 'apng',\n\t\t\t\t\t\t\tmime: 'image/apng',\n\t\t\t\t\t\t};\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tawait tokenizer.ignore(chunk.length + 4); // Ignore chunk-data + CRC\n\t\t\t\t}\n\t\t\t} while (tokenizer.position + 8 < tokenizer.fileInfo.size);\n\n\t\t\treturn {\n\t\t\t\text: 'png',\n\t\t\t\tmime: 'image/png',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x41, 0x52, 0x52, 0x4F, 0x57, 0x31, 0x00, 0x00])) {\n\t\t\treturn {\n\t\t\t\text: 'arrow',\n\t\t\t\tmime: 'application/vnd.apache.arrow.file',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x67, 0x6C, 0x54, 0x46, 0x02, 0x00, 0x00, 0x00])) {\n\t\t\treturn {\n\t\t\t\text: 'glb',\n\t\t\t\tmime: 'model/gltf-binary',\n\t\t\t};\n\t\t}\n\n\t\t// `mov` format variants\n\t\tif (\n\t\t\tthis.check([0x66, 0x72, 0x65, 0x65], {offset: 4}) // `free`\n\t\t\t|| this.check([0x6D, 0x64, 0x61, 0x74], {offset: 4}) // `mdat` MJPEG\n\t\t\t|| this.check([0x6D, 0x6F, 0x6F, 0x76], {offset: 4}) // `moov`\n\t\t\t|| this.check([0x77, 0x69, 0x64, 0x65], {offset: 4}) // `wide`\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'mov',\n\t\t\t\tmime: 'video/quicktime',\n\t\t\t};\n\t\t}\n\n\t\t// -- 9-byte signatures --\n\n\t\tif (this.check([0x49, 0x49, 0x52, 0x4F, 0x08, 0x00, 0x00, 0x00, 0x18])) {\n\t\t\treturn {\n\t\t\t\text: 'orf',\n\t\t\t\tmime: 'image/x-olympus-orf',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('gimp xcf ')) {\n\t\t\treturn {\n\t\t\t\text: 'xcf',\n\t\t\t\tmime: 'image/x-xcf',\n\t\t\t};\n\t\t}\n\n\t\t// File Type Box (https://en.wikipedia.org/wiki/ISO_base_media_file_format)\n\t\t// It's not required to be first, but it's recommended to be. Almost all ISO base media files start with `ftyp` box.\n\t\t// `ftyp` box must contain a brand major identifier, which must consist of ISO 8859-1 printable characters.\n\t\t// Here we check for 8859-1 printable characters (for simplicity, it's a mask which also catches one non-printable character).\n\t\tif (\n\t\t\tthis.checkString('ftyp', {offset: 4})\n\t\t\t&& (this.buffer[8] & 0x60) !== 0x00 // Brand major, first character ASCII?\n\t\t) {\n\t\t\t// They all can have MIME `video/mp4` except `application/mp4` special-case which is hard to detect.\n\t\t\t// For some cases, we're specific, everything else falls to `video/mp4` with `mp4` extension.\n\t\t\tconst brandMajor = new Token.StringType(4, 'latin1').get(this.buffer, 8).replace('\\0', ' ').trim();\n\t\t\tswitch (brandMajor) {\n\t\t\t\tcase 'avif':\n\t\t\t\tcase 'avis':\n\t\t\t\t\treturn {ext: 'avif', mime: 'image/avif'};\n\t\t\t\tcase 'mif1':\n\t\t\t\t\treturn {ext: 'heic', mime: 'image/heif'};\n\t\t\t\tcase 'msf1':\n\t\t\t\t\treturn {ext: 'heic', mime: 'image/heif-sequence'};\n\t\t\t\tcase 'heic':\n\t\t\t\tcase 'heix':\n\t\t\t\t\treturn {ext: 'heic', mime: 'image/heic'};\n\t\t\t\tcase 'hevc':\n\t\t\t\tcase 'hevx':\n\t\t\t\t\treturn {ext: 'heic', mime: 'image/heic-sequence'};\n\t\t\t\tcase 'qt':\n\t\t\t\t\treturn {ext: 'mov', mime: 'video/quicktime'};\n\t\t\t\tcase 'M4V':\n\t\t\t\tcase 'M4VH':\n\t\t\t\tcase 'M4VP':\n\t\t\t\t\treturn {ext: 'm4v', mime: 'video/x-m4v'};\n\t\t\t\tcase 'M4P':\n\t\t\t\t\treturn {ext: 'm4p', mime: 'video/mp4'};\n\t\t\t\tcase 'M4B':\n\t\t\t\t\treturn {ext: 'm4b', mime: 'audio/mp4'};\n\t\t\t\tcase 'M4A':\n\t\t\t\t\treturn {ext: 'm4a', mime: 'audio/x-m4a'};\n\t\t\t\tcase 'F4V':\n\t\t\t\t\treturn {ext: 'f4v', mime: 'video/mp4'};\n\t\t\t\tcase 'F4P':\n\t\t\t\t\treturn {ext: 'f4p', mime: 'video/mp4'};\n\t\t\t\tcase 'F4A':\n\t\t\t\t\treturn {ext: 'f4a', mime: 'audio/mp4'};\n\t\t\t\tcase 'F4B':\n\t\t\t\t\treturn {ext: 'f4b', mime: 'audio/mp4'};\n\t\t\t\tcase 'crx':\n\t\t\t\t\treturn {ext: 'cr3', mime: 'image/x-canon-cr3'};\n\t\t\t\tdefault:\n\t\t\t\t\tif (brandMajor.startsWith('3g')) {\n\t\t\t\t\t\tif (brandMajor.startsWith('3g2')) {\n\t\t\t\t\t\t\treturn {ext: '3g2', mime: 'video/3gpp2'};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn {ext: '3gp', mime: 'video/3gpp'};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {ext: 'mp4', mime: 'video/mp4'};\n\t\t\t}\n\t\t}\n\n\t\t// -- 10-byte signatures --\n\n\t\tif (this.checkString('REGEDIT4\\r\\n')) {\n\t\t\treturn {\n\t\t\t\text: 'reg',\n\t\t\t\tmime: 'application/x-ms-regedit',\n\t\t\t};\n\t\t}\n\n\t\t// -- 12-byte signatures --\n\n\t\t// RIFF file format which might be AVI, WAV, QCP, etc\n\t\tif (this.check([0x52, 0x49, 0x46, 0x46])) {\n\t\t\tif (this.checkString('WEBP', {offset: 8})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'webp',\n\t\t\t\t\tmime: 'image/webp',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (this.check([0x41, 0x56, 0x49], {offset: 8})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'avi',\n\t\t\t\t\tmime: 'video/vnd.avi',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (this.check([0x57, 0x41, 0x56, 0x45], {offset: 8})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'wav',\n\t\t\t\t\tmime: 'audio/wav',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// QLCM, QCP file\n\t\t\tif (this.check([0x51, 0x4C, 0x43, 0x4D], {offset: 8})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'qcp',\n\t\t\t\t\tmime: 'audio/qcelp',\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif (this.check([0x49, 0x49, 0x55, 0x00, 0x18, 0x00, 0x00, 0x00, 0x88, 0xE7, 0x74, 0xD8])) {\n\t\t\treturn {\n\t\t\t\text: 'rw2',\n\t\t\t\tmime: 'image/x-panasonic-rw2',\n\t\t\t};\n\t\t}\n\n\t\t// ASF_Header_Object first 80 bytes\n\t\tif (this.check([0x30, 0x26, 0xB2, 0x75, 0x8E, 0x66, 0xCF, 0x11, 0xA6, 0xD9])) {\n\t\t\tasync function readHeader() {\n\t\t\t\tconst guid = new Uint8Array(16);\n\t\t\t\tawait tokenizer.readBuffer(guid);\n\t\t\t\treturn {\n\t\t\t\t\tid: guid,\n\t\t\t\t\tsize: Number(await tokenizer.readToken(Token.UINT64_LE)),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tawait tokenizer.ignore(30);\n\t\t\t// Search for header should be in first 1KB of file.\n\t\t\twhile (tokenizer.position + 24 < tokenizer.fileInfo.size) {\n\t\t\t\tconst header = await readHeader();\n\t\t\t\tlet payload = header.size - 24;\n\t\t\t\tif (_check(header.id, [0x91, 0x07, 0xDC, 0xB7, 0xB7, 0xA9, 0xCF, 0x11, 0x8E, 0xE6, 0x00, 0xC0, 0x0C, 0x20, 0x53, 0x65])) {\n\t\t\t\t\t// Sync on Stream-Properties-Object (B7DC0791-A9B7-11CF-8EE6-00C00C205365)\n\t\t\t\t\tconst typeId = new Uint8Array(16);\n\t\t\t\t\tpayload -= await tokenizer.readBuffer(typeId);\n\n\t\t\t\t\tif (_check(typeId, [0x40, 0x9E, 0x69, 0xF8, 0x4D, 0x5B, 0xCF, 0x11, 0xA8, 0xFD, 0x00, 0x80, 0x5F, 0x5C, 0x44, 0x2B])) {\n\t\t\t\t\t\t// Found audio:\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\text: 'asf',\n\t\t\t\t\t\t\tmime: 'audio/x-ms-asf',\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (_check(typeId, [0xC0, 0xEF, 0x19, 0xBC, 0x4D, 0x5B, 0xCF, 0x11, 0xA8, 0xFD, 0x00, 0x80, 0x5F, 0x5C, 0x44, 0x2B])) {\n\t\t\t\t\t\t// Found video:\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\text: 'asf',\n\t\t\t\t\t\t\tmime: 'video/x-ms-asf',\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tawait tokenizer.ignore(payload);\n\t\t\t}\n\n\t\t\t// Default to ASF generic extension\n\t\t\treturn {\n\t\t\t\text: 'asf',\n\t\t\t\tmime: 'application/vnd.ms-asf',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0xAB, 0x4B, 0x54, 0x58, 0x20, 0x31, 0x31, 0xBB, 0x0D, 0x0A, 0x1A, 0x0A])) {\n\t\t\treturn {\n\t\t\t\text: 'ktx',\n\t\t\t\tmime: 'image/ktx',\n\t\t\t};\n\t\t}\n\n\t\tif ((this.check([0x7E, 0x10, 0x04]) || this.check([0x7E, 0x18, 0x04])) && this.check([0x30, 0x4D, 0x49, 0x45], {offset: 4})) {\n\t\t\treturn {\n\t\t\t\text: 'mie',\n\t\t\t\tmime: 'application/x-mie',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x27, 0x0A, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], {offset: 2})) {\n\t\t\treturn {\n\t\t\t\text: 'shp',\n\t\t\t\tmime: 'application/x-esri-shape',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0xFF, 0x4F, 0xFF, 0x51])) {\n\t\t\treturn {\n\t\t\t\text: 'j2c',\n\t\t\t\tmime: 'image/j2c',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x00, 0x00, 0x00, 0x0C, 0x6A, 0x50, 0x20, 0x20, 0x0D, 0x0A, 0x87, 0x0A])) {\n\t\t\t// JPEG-2000 family\n\n\t\t\tawait tokenizer.ignore(20);\n\t\t\tconst type = await tokenizer.readToken(new Token.StringType(4, 'ascii'));\n\t\t\tswitch (type) {\n\t\t\t\tcase 'jp2 ':\n\t\t\t\t\treturn {\n\t\t\t\t\t\text: 'jp2',\n\t\t\t\t\t\tmime: 'image/jp2',\n\t\t\t\t\t};\n\t\t\t\tcase 'jpx ':\n\t\t\t\t\treturn {\n\t\t\t\t\t\text: 'jpx',\n\t\t\t\t\t\tmime: 'image/jpx',\n\t\t\t\t\t};\n\t\t\t\tcase 'jpm ':\n\t\t\t\t\treturn {\n\t\t\t\t\t\text: 'jpm',\n\t\t\t\t\t\tmime: 'image/jpm',\n\t\t\t\t\t};\n\t\t\t\tcase 'mjp2':\n\t\t\t\t\treturn {\n\t\t\t\t\t\text: 'mj2',\n\t\t\t\t\t\tmime: 'image/mj2',\n\t\t\t\t\t};\n\t\t\t\tdefault:\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\tthis.check([0xFF, 0x0A])\n\t\t\t|| this.check([0x00, 0x00, 0x00, 0x0C, 0x4A, 0x58, 0x4C, 0x20, 0x0D, 0x0A, 0x87, 0x0A])\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'jxl',\n\t\t\t\tmime: 'image/jxl',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0xFE, 0xFF])) { // UTF-16-BOM-BE\n\t\t\tif (this.checkString('<?xml ', {offset: 2, encoding: 'utf-16be'})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'xml',\n\t\t\t\t\tmime: 'application/xml',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn undefined; // Some unknown text based format\n\t\t}\n\n\t\tif (this.check([0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1])) {\n\t\t\t// Detected Microsoft Compound File Binary File (MS-CFB) Format.\n\t\t\treturn {\n\t\t\t\text: 'cfb',\n\t\t\t\tmime: 'application/x-cfb',\n\t\t\t};\n\t\t}\n\n\t\t// Increase sample size from 32 to 256.\n\t\tawait tokenizer.peekBuffer(this.buffer, {length: Math.min(256, tokenizer.fileInfo.size), mayBeLess: true});\n\n\t\tif (this.check([0x61, 0x63, 0x73, 0x70], {offset: 36})) {\n\t\t\treturn {\n\t\t\t\text: 'icc',\n\t\t\t\tmime: 'application/vnd.iccprofile',\n\t\t\t};\n\t\t}\n\n\t\t// ACE: requires 14 bytes in the buffer\n\t\tif (this.checkString('**ACE', {offset: 7}) && this.checkString('**', {offset: 12})) {\n\t\t\treturn {\n\t\t\t\text: 'ace',\n\t\t\t\tmime: 'application/x-ace-compressed',\n\t\t\t};\n\t\t}\n\n\t\t// -- 15-byte signatures --\n\n\t\tif (this.checkString('BEGIN:')) {\n\t\t\tif (this.checkString('VCARD', {offset: 6})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'vcf',\n\t\t\t\t\tmime: 'text/vcard',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (this.checkString('VCALENDAR', {offset: 6})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'ics',\n\t\t\t\t\tmime: 'text/calendar',\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\t// `raf` is here just to keep all the raw image detectors together.\n\t\tif (this.checkString('FUJIFILMCCD-RAW')) {\n\t\t\treturn {\n\t\t\t\text: 'raf',\n\t\t\t\tmime: 'image/x-fujifilm-raf',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('Extended Module:')) {\n\t\t\treturn {\n\t\t\t\text: 'xm',\n\t\t\t\tmime: 'audio/x-xm',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('Creative Voice File')) {\n\t\t\treturn {\n\t\t\t\text: 'voc',\n\t\t\t\tmime: 'audio/x-voc',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x04, 0x00, 0x00, 0x00]) && this.buffer.length >= 16) { // Rough & quick check Pickle/ASAR\n\t\t\tconst jsonSize = new DataView(this.buffer.buffer).getUint32(12, true);\n\n\t\t\tif (jsonSize > 12 && this.buffer.length >= jsonSize + 16) {\n\t\t\t\ttry {\n\t\t\t\t\tconst header = new TextDecoder().decode(this.buffer.subarray(16, jsonSize + 16));\n\t\t\t\t\tconst json = JSON.parse(header);\n\t\t\t\t\t// Check if Pickle is ASAR\n\t\t\t\t\tif (json.files) { // Final check, assuring Pickle/ASAR format\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\text: 'asar',\n\t\t\t\t\t\t\tmime: 'application/x-asar',\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t} catch {}\n\t\t\t}\n\t\t}\n\n\t\tif (this.check([0x06, 0x0E, 0x2B, 0x34, 0x02, 0x05, 0x01, 0x01, 0x0D, 0x01, 0x02, 0x01, 0x01, 0x02])) {\n\t\t\treturn {\n\t\t\t\text: 'mxf',\n\t\t\t\tmime: 'application/mxf',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('SCRM', {offset: 44})) {\n\t\t\treturn {\n\t\t\t\text: 's3m',\n\t\t\t\tmime: 'audio/x-s3m',\n\t\t\t};\n\t\t}\n\n\t\t// Raw MPEG-2 transport stream (188-byte packets)\n\t\tif (this.check([0x47]) && this.check([0x47], {offset: 188})) {\n\t\t\treturn {\n\t\t\t\text: 'mts',\n\t\t\t\tmime: 'video/mp2t',\n\t\t\t};\n\t\t}\n\n\t\t// Blu-ray Disc Audio-Video (BDAV) MPEG-2 transport stream has 4-byte TP_extra_header before each 188-byte packet\n\t\tif (this.check([0x47], {offset: 4}) && this.check([0x47], {offset: 196})) {\n\t\t\treturn {\n\t\t\t\text: 'mts',\n\t\t\t\tmime: 'video/mp2t',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x42, 0x4F, 0x4F, 0x4B, 0x4D, 0x4F, 0x42, 0x49], {offset: 60})) {\n\t\t\treturn {\n\t\t\t\text: 'mobi',\n\t\t\t\tmime: 'application/x-mobipocket-ebook',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x44, 0x49, 0x43, 0x4D], {offset: 128})) {\n\t\t\treturn {\n\t\t\t\text: 'dcm',\n\t\t\t\tmime: 'application/dicom',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x4C, 0x00, 0x00, 0x00, 0x01, 0x14, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x46])) {\n\t\t\treturn {\n\t\t\t\text: 'lnk',\n\t\t\t\tmime: 'application/x.ms.shortcut', // Invented by us\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x62, 0x6F, 0x6F, 0x6B, 0x00, 0x00, 0x00, 0x00, 0x6D, 0x61, 0x72, 0x6B, 0x00, 0x00, 0x00, 0x00])) {\n\t\t\treturn {\n\t\t\t\text: 'alias',\n\t\t\t\tmime: 'application/x.apple.alias', // Invented by us\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('Kaydara FBX Binary  \\u0000')) {\n\t\t\treturn {\n\t\t\t\text: 'fbx',\n\t\t\t\tmime: 'application/x.autodesk.fbx', // Invented by us\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tthis.check([0x4C, 0x50], {offset: 34})\n\t\t\t&& (\n\t\t\t\tthis.check([0x00, 0x00, 0x01], {offset: 8})\n\t\t\t\t|| this.check([0x01, 0x00, 0x02], {offset: 8})\n\t\t\t\t|| this.check([0x02, 0x00, 0x02], {offset: 8})\n\t\t\t)\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'eot',\n\t\t\t\tmime: 'application/vnd.ms-fontobject',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x06, 0x06, 0xED, 0xF5, 0xD8, 0x1D, 0x46, 0xE5, 0xBD, 0x31, 0xEF, 0xE7, 0xFE, 0x74, 0xB7, 0x1D])) {\n\t\t\treturn {\n\t\t\t\text: 'indd',\n\t\t\t\tmime: 'application/x-indesign',\n\t\t\t};\n\t\t}\n\n\t\t// Increase sample size from 256 to 512\n\t\tawait tokenizer.peekBuffer(this.buffer, {length: Math.min(512, tokenizer.fileInfo.size), mayBeLess: true});\n\n\t\t// Requires a buffer size of 512 bytes\n\t\tif ((this.checkString('ustar', {offset: 257}) && (this.checkString('\\0', {offset: 262}) || this.checkString(' ', {offset: 262})))\n\t\t\t|| (this.check([0, 0, 0, 0, 0, 0], {offset: 257}) && tarHeaderChecksumMatches(this.buffer))) {\n\t\t\treturn {\n\t\t\t\text: 'tar',\n\t\t\t\tmime: 'application/x-tar',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0xFF, 0xFE])) { // UTF-16-BOM-LE\n\t\t\tconst encoding = 'utf-16le';\n\t\t\tif (this.checkString('<?xml ', {offset: 2, encoding})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'xml',\n\t\t\t\t\tmime: 'application/xml',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (this.check([0xFF, 0x0E], {offset: 2}) && this.checkString('SketchUp Model', {offset: 4, encoding})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'skp',\n\t\t\t\t\tmime: 'application/vnd.sketchup.skp',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (this.checkString('Windows Registry Editor Version 5.00\\r\\n', {offset: 2, encoding})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'reg',\n\t\t\t\t\tmime: 'application/x-ms-regedit',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn undefined; // Some text based format\n\t\t}\n\n\t\tif (this.checkString('-----BEGIN PGP MESSAGE-----')) {\n\t\t\treturn {\n\t\t\t\text: 'pgp',\n\t\t\t\tmime: 'application/pgp-encrypted',\n\t\t\t};\n\t\t}\n\t};\n\t// Detections with limited supporting data, resulting in a higher likelihood of false positives\n\tdetectImprecise = async tokenizer => {\n\t\tthis.buffer = new Uint8Array(reasonableDetectionSizeInBytes);\n\n\t\t// Read initial sample size of 8 bytes\n\t\tawait tokenizer.peekBuffer(this.buffer, {length: Math.min(8, tokenizer.fileInfo.size), mayBeLess: true});\n\n\t\tif (\n\t\t\tthis.check([0x0, 0x0, 0x1, 0xBA])\n\t\t\t|| this.check([0x0, 0x0, 0x1, 0xB3])\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'mpg',\n\t\t\t\tmime: 'video/mpeg',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x00, 0x01, 0x00, 0x00, 0x00])) {\n\t\t\treturn {\n\t\t\t\text: 'ttf',\n\t\t\t\tmime: 'font/ttf',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x00, 0x00, 0x01, 0x00])) {\n\t\t\treturn {\n\t\t\t\text: 'ico',\n\t\t\t\tmime: 'image/x-icon',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x00, 0x00, 0x02, 0x00])) {\n\t\t\treturn {\n\t\t\t\text: 'cur',\n\t\t\t\tmime: 'image/x-icon',\n\t\t\t};\n\t\t}\n\n\t\t// Adjust buffer to `mpegOffsetTolerance`\n\t\tawait tokenizer.peekBuffer(this.buffer, {length: Math.min(2 + this.options.mpegOffsetTolerance, tokenizer.fileInfo.size), mayBeLess: true});\n\n\t\t// Check MPEG 1 or 2 Layer 3 header, or 'layer 0' for ADTS (MPEG sync-word 0xFFE)\n\t\tif (this.buffer.length >= (2 + this.options.mpegOffsetTolerance)) {\n\t\t\tfor (let depth = 0; depth <= this.options.mpegOffsetTolerance; ++depth) {\n\t\t\t\tconst type = this.scanMpeg(depth);\n\t\t\t\tif (type) {\n\t\t\t\t\treturn type;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tasync readTiffTag(bigEndian) {\n\t\tconst tagId = await this.tokenizer.readToken(bigEndian ? Token.UINT16_BE : Token.UINT16_LE);\n\t\tthis.tokenizer.ignore(10);\n\t\tswitch (tagId) {\n\t\t\tcase 50_341:\n\t\t\t\treturn {\n\t\t\t\t\text: 'arw',\n\t\t\t\t\tmime: 'image/x-sony-arw',\n\t\t\t\t};\n\t\t\tcase 50_706:\n\t\t\t\treturn {\n\t\t\t\t\text: 'dng',\n\t\t\t\t\tmime: 'image/x-adobe-dng',\n\t\t\t\t};\n\t\t\tdefault:\n\t\t}\n\t}\n\n\tasync readTiffIFD(bigEndian) {\n\t\tconst numberOfTags = await this.tokenizer.readToken(bigEndian ? Token.UINT16_BE : Token.UINT16_LE);\n\t\tfor (let n = 0; n < numberOfTags; ++n) {\n\t\t\tconst fileType = await this.readTiffTag(bigEndian);\n\t\t\tif (fileType) {\n\t\t\t\treturn fileType;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync readTiffHeader(bigEndian) {\n\t\tconst version = (bigEndian ? Token.UINT16_BE : Token.UINT16_LE).get(this.buffer, 2);\n\t\tconst ifdOffset = (bigEndian ? Token.UINT32_BE : Token.UINT32_LE).get(this.buffer, 4);\n\n\t\tif (version === 42) {\n\t\t\t// TIFF file header\n\t\t\tif (ifdOffset >= 6) {\n\t\t\t\tif (this.checkString('CR', {offset: 8})) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\text: 'cr2',\n\t\t\t\t\t\tmime: 'image/x-canon-cr2',\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tif (ifdOffset >= 8) {\n\t\t\t\t\tconst someId1 = (bigEndian ? Token.UINT16_BE : Token.UINT16_LE).get(this.buffer, 8);\n\t\t\t\t\tconst someId2 = (bigEndian ? Token.UINT16_BE : Token.UINT16_LE).get(this.buffer, 10);\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t(someId1 === 0x1C && someId2 === 0xFE)\n\t\t\t\t\t\t|| (someId1 === 0x1F && someId2 === 0x0B)) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\text: 'nef',\n\t\t\t\t\t\t\tmime: 'image/x-nikon-nef',\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait this.tokenizer.ignore(ifdOffset);\n\t\t\tconst fileType = await this.readTiffIFD(bigEndian);\n\t\t\treturn fileType ?? {\n\t\t\t\text: 'tif',\n\t\t\t\tmime: 'image/tiff',\n\t\t\t};\n\t\t}\n\n\t\tif (version === 43) {\t// Big TIFF file header\n\t\t\treturn {\n\t\t\t\text: 'tif',\n\t\t\t\tmime: 'image/tiff',\n\t\t\t};\n\t\t}\n\t}\n\n\t/**\n\tScan check MPEG 1 or 2 Layer 3 header, or 'layer 0' for ADTS (MPEG sync-word 0xFFE).\n\n\t@param offset - Offset to scan for sync-preamble.\n\t@returns {{ext: string, mime: string}}\n\t*/\n\tscanMpeg(offset) {\n\t\tif (this.check([0xFF, 0xE0], {offset, mask: [0xFF, 0xE0]})) {\n\t\t\tif (this.check([0x10], {offset: offset + 1, mask: [0x16]})) {\n\t\t\t\t// Check for (ADTS) MPEG-2\n\t\t\t\tif (this.check([0x08], {offset: offset + 1, mask: [0x08]})) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\text: 'aac',\n\t\t\t\t\t\tmime: 'audio/aac',\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// Must be (ADTS) MPEG-4\n\t\t\t\treturn {\n\t\t\t\t\text: 'aac',\n\t\t\t\t\tmime: 'audio/aac',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// MPEG 1 or 2 Layer 3 header\n\t\t\t// Check for MPEG layer 3\n\t\t\tif (this.check([0x02], {offset: offset + 1, mask: [0x06]})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'mp3',\n\t\t\t\t\tmime: 'audio/mpeg',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Check for MPEG layer 2\n\t\t\tif (this.check([0x04], {offset: offset + 1, mask: [0x06]})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'mp2',\n\t\t\t\t\tmime: 'audio/mpeg',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Check for MPEG layer 1\n\t\t\tif (this.check([0x06], {offset: offset + 1, mask: [0x06]})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'mp1',\n\t\t\t\t\tmime: 'audio/mpeg',\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport const supportedExtensions = new Set(extensions);\nexport const supportedMimeTypes = new Set(mimeTypes);\n"],"names":[],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]}