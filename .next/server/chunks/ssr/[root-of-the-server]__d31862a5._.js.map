{"version":3,"sources":["../../../../src/components/admin/FilterSelect.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/admin/institutions/institution-form.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/admin/institutions/institution-status-toggle.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/admin/institutions/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/admin/FilterSelect.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/admin/FilterSelect.tsx\",\n    \"default\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/institutions/institution-form.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/institutions/institution-form.tsx\",\n    \"default\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/institutions/institution-status-toggle.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/institutions/institution-status-toggle.tsx\",\n    \"default\",\n);\n","import { prisma } from \"@/lib/prisma\";\nimport { redirect } from \"next/navigation\";\nimport Link from \"next/link\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth-options\";\nimport { isAdmin } from \"@/lib/auth\";\nimport InstitutionForm from \"./institution-form\";\nimport InstitutionStatusToggle from \"./institution-status-toggle\";\nimport FilterSelect from \"@/components/admin/FilterSelect\";\n\nexport default async function InstitutionsPage({\n    searchParams,\n}: {\n    searchParams: Promise<{ boardId?: string }>;\n}) {\n    const session = await getServerSession(authOptions);\n    if (!session?.user || !isAdmin((session.user as any).role)) {\n        redirect(\"/\");\n    }\n\n    const { boardId } = await searchParams;\n\n    // Build filter\n    const where: any = {};\n    if (boardId) {\n        where.board_id = boardId;\n    }\n\n    const institutions = await prisma.institution.findMany({\n        where,\n        include: {\n            board: true,\n            _count: {\n                select: { programs: true, profiles: true },\n            },\n        },\n        orderBy: { created_at: \"desc\" },\n    });\n\n    const boards = await prisma.board.findMany({\n        where: { is_active: true },\n        orderBy: { name: \"asc\" },\n    });\n\n    return (\n        <div className=\"container mx-auto py-10\">\n            <div className=\"flex justify-between items-center mb-8\">\n                <h1 className=\"text-3xl font-bold\">Institutions Management</h1>\n            </div>\n\n            {/* Add Institution Form */}\n            <InstitutionForm boards={boards} />\n\n            {/* Filters */}\n            <div className=\"bg-white p-4 rounded-lg shadow mb-8\">\n                <FilterSelect\n                    name=\"boardId\"\n                    placeholder=\"All Boards\"\n                    options={boards.map(b => ({ value: b.id, label: b.name }))}\n                />\n            </div>\n\n            {/* Institutions List */}\n            <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\n                <ul className=\"divide-y divide-gray-200\">\n                    {institutions.map((institution) => (\n                        <li key={institution.id.toString()}>\n                            <Link\n                                href={`/admin/programs?institutionId=${institution.id}`}\n                                className=\"block hover:bg-gray-50 transition\"\n                            >\n                                <div className=\"px-4 py-4 sm:px-6\">\n                                    <div className=\"flex items-center justify-between\">\n                                        <div className=\"flex items-center\">\n                                            <span className=\"text-sm font-medium text-indigo-600 truncate\">\n                                                {institution.name}\n                                            </span>\n                                            <span className=\"ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800\">\n                                                {institution.type}\n                                            </span>\n                                            <span className={`ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${institution.is_active ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>\n                                                {institution.is_active ? 'Active' : 'Inactive'}\n                                            </span>\n                                        </div>\n                                        <div className=\"ml-2 flex-shrink-0 flex\">\n                                            <InstitutionStatusToggle institutionId={institution.id} isActive={institution.is_active} />\n                                        </div>\n                                    </div>\n                                    <div className=\"mt-2 sm:flex sm:justify-between\">\n                                        <div className=\"sm:flex\">\n                                            <p className=\"flex items-center text-sm text-gray-500 mr-6\">\n                                                Board: {institution.board.name}\n                                            </p>\n                                            {institution.district && (\n                                                <p className=\"flex items-center text-sm text-gray-500 mr-6\">\n                                                    District: {institution.district}\n                                                </p>\n                                            )}\n                                            {institution.state && (\n                                                <p className=\"flex items-center text-sm text-gray-500 mr-6\">\n                                                    State: {institution.state}\n                                                </p>\n                                            )}\n                                        </div>\n                                        <div className=\"mt-2 flex items-center text-sm text-gray-500 sm:mt-0\">\n                                            <p className=\"mr-4\">Programs: {institution._count.programs}</p>\n                                            <p>Students: {institution._count.profiles}</p>\n                                        </div>\n                                    </div>\n                                </div>\n                            </Link>\n                        </li>\n                    ))}\n                </ul>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","ignoreList":[0,1,2]}