{"version":3,"sources":["../../../../node_modules/%40radix-ui/react-label/dist/index.mjs","../../../../src/components/ui/label.tsx","../../../../src/app/app/categories/CategoryForm.tsx"],"sourcesContent":["\"use client\";\n\n// src/label.tsx\nimport * as React from \"react\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx } from \"react/jsx-runtime\";\nvar NAME = \"Label\";\nvar Label = React.forwardRef((props, forwardedRef) => {\n  return /* @__PURE__ */ jsx(\n    Primitive.label,\n    {\n      ...props,\n      ref: forwardedRef,\n      onMouseDown: (event) => {\n        const target = event.target;\n        if (target.closest(\"button, input, select, textarea\")) return;\n        props.onMouseDown?.(event);\n        if (!event.defaultPrevented && event.detail > 1) event.preventDefault();\n      }\n    }\n  );\n});\nLabel.displayName = NAME;\nvar Root = Label;\nexport {\n  Label,\n  Root\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n","\"use client\";\n\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useForm } from \"react-hook-form\";\nimport { z } from \"zod\";\nimport { useRouter } from \"next/navigation\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n    Form,\n    FormControl,\n    FormField,\n    FormItem,\n    FormLabel,\n    FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { toast } from \"sonner\";\nimport { CategoryList } from \"@/generated/prisma\";\n\nconst formSchema = z.object({\n    category: z\n        .string()\n        .min(1, \"Category is required\")\n        .max(500, \"Category must be 500 characters or less\"),\n});\n\ntype CategoryFormValues = z.infer<typeof formSchema>;\n\ninterface CategoryFormProps {\n    initialData?: CategoryList | null;\n    submitAction: (formData: FormData) => Promise<{\n        success: boolean;\n        error?: string;\n        fieldErrors?: Record<string, string[]>;\n    }>;\n    buttonText?: string;\n}\n\nexport default function CategoryForm({\n    initialData,\n    submitAction,\n    buttonText = \"Save Category\",\n}: CategoryFormProps) {\n    const router = useRouter();\n    const form = useForm<CategoryFormValues>({\n        resolver: zodResolver(formSchema),\n        defaultValues: initialData || {\n            category: \"\",\n        },\n    });\n\n    const { isSubmitting } = form.formState;\n\n    async function onSubmit(values: CategoryFormValues) {\n        const formData = new FormData();\n        formData.append(\"category\", values.category);\n\n        const result = await submitAction(formData);\n\n        if (result.success) {\n            toast.success(\n                initialData\n                    ? \"Category updated successfully.\"\n                    : \"Category created successfully.\"\n            );\n            router.push(\"/app/categories\");\n            router.refresh(); // Ensure the list page is refreshed\n        } else {\n            if (result.fieldErrors) {\n                for (const field in result.fieldErrors) {\n                    const fieldName = field as keyof CategoryFormValues;\n                    const message = result.fieldErrors[field]?.[0] || \"Invalid input\";\n                    form.setError(fieldName, { type: \"manual\", message });\n                }\n                toast.error(\"Please correct the errors in the form.\");\n            } else {\n                toast.error(result.error || \"An unexpected error occurred.\");\n            }\n        }\n    }\n\n    return (\n        <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-8\">\n                <FormField\n                    control={form.control}\n                    name=\"category\"\n                    render={({ field }: { field: any }) => (\n                        <FormItem>\n                            <FormLabel>Category Name</FormLabel>\n                            <FormControl>\n                                <Input placeholder=\"e.g., Personal Documents\" {...field} />\n                            </FormControl>\n                            <FormMessage />\n                        </FormItem>\n                    )}\n                />\n                <Button\n                    type=\"submit\"\n                    disabled={isSubmitting}\n                    className=\"bg-indigo-600 hover:bg-indigo-700 text-white\"\n                >\n                    {isSubmitting ? \"Saving...\" : buttonText}\n                </Button>\n            </form>\n        </Form>\n    );\n}\n"],"names":[],"mappings":"0DAGA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,OAGI,EAAQ,EAAA,UAAgB,CAAC,CAAC,EAAO,IACZ,CAAA,EAAA,EAAA,GAAA,AAAG,EACxB,EAAA,SAAS,CAAC,KAAK,CACf,CACE,GAAG,CAAK,CACR,IAAK,EACL,YAAa,AAAC,IACG,AACX,EADiB,MAAM,CAChB,OAAO,CAAC,oCAAoC,CACvD,EAAM,WAAW,GAAG,GAChB,CAAC,EAAM,gBAAgB,EAAI,EAAM,MAAM,CAAG,GAAG,EAAM,cAAc,GACvE,CACF,IAGJ,EAAM,WAAW,CAhBN,EAgBS,MCjBpB,IAAA,EAAA,EAAA,CAAA,CAAA,QAEA,SAAS,EAAM,WACb,CAAS,CACT,GAAG,EAC8C,EACjD,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,ADWM,ECXN,CACC,YAAU,QACV,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,sNACA,GAED,GAAG,CAAK,EAGf,wECnBA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAQA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAGA,IAAM,EAAa,EAAA,CAAC,CAAC,MAAM,CAAC,CACxB,SAAU,EAAA,CAAC,CACN,MAAM,GACN,GAAG,CAAC,EAAG,wBACP,GAAG,CAAC,IAAK,0CAClB,GAce,SAAS,EAAa,aACjC,CAAW,cACX,CAAY,YACZ,EAAa,eAAe,CACZ,EAChB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAO,CAAA,EAAA,EAAA,OAAA,AAAO,EAAqB,CACrC,SAAU,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,GACtB,cAAe,GAAe,CAC1B,SAAU,EACd,CACJ,GAEM,cAAE,CAAY,CAAE,CAAG,EAAK,SAAS,CAEvC,eAAe,EAAS,CAA0B,EAC9C,IAAM,EAAW,IAAI,SACrB,EAAS,MAAM,CAAC,WAAY,EAAO,QAAQ,EAE3C,IAAM,EAAS,MAAM,EAAa,GAElC,GAAI,EAAO,OAAO,CACd,CADgB,CAChB,KAAK,CAAC,OAAO,CACT,EACM,iCACA,kCAEV,EAAO,IAAI,CAAC,mBACZ,EAAO,OAAO,IAAI,IAElB,GAAI,EAAO,WAAW,CAAE,CACpB,IAAK,IAAM,KAAS,CAH8B,CAGvB,WAAW,CAAE,CAEpC,IAAM,EAAU,EAAO,WAAW,CAAC,EAAM,EAAE,CAAC,EAAE,EAAI,gBAClD,EAAK,QAAQ,CAAC,AAFI,EAEO,CAAE,KAAM,iBAAU,CAAQ,EACvD,CACA,EAAA,KAAK,CAAC,KAAK,CAAC,yCAChB,MACI,CADG,CACH,KAAK,CAAC,KAAK,CAAC,EAAO,KAAK,EAAI,gCAGxC,CAEA,MACI,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAE,GAAG,CAAI,UACV,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAK,YAAY,CAAC,GAAW,UAAU,sBACnD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CACN,QAAS,EAAK,OAAO,CACrB,KAAK,WACL,OAAQ,CAAC,OAAE,CAAK,CAAkB,GAC9B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,QAAQ,CAAA,WACL,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,kBACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACR,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,YAAY,2BAA4B,GAAG,CAAK,KAE3D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAA,QAIxB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACH,KAAK,SACL,SAAU,EACV,UAAU,wDAET,EAAe,YAAc,QAKlD","ignoreList":[0]}