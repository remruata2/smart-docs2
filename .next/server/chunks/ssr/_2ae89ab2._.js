module.exports=[870430,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(368114);function g({className:a,...c}){return(0,b.jsx)(e,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>g],870430)},591119,a=>{"use strict";var b=a.i(187924),c=a.i(368114);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function i({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardFooter",()=>i,"CardHeader",()=>e,"CardTitle",()=>f])},767552,a=>{"use strict";let b=(0,a.i(170106).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);a.s(["ChevronUp",()=>b],767552)},356558,a=>{"use strict";var b=a.i(572131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},167453,a=>{"use strict";let b=(0,a.i(170106).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],167453)},469769,a=>{"use strict";let b=(0,a.i(170106).default)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);a.s(["GraduationCap",()=>b],469769)},956792,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(699570),f=a.i(591119),g=a.i(870430),h=a.i(580701),i=a.i(469769),j=a.i(167453),k=a.i(823292);function l(){let a=(0,d.useRouter)(),[l,m]=(0,c.useState)(1),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(!1);(0,c.useEffect)(()=>{!async function(){try{let a=await fetch("/api/dashboard/boards");if(a.ok){let b=await a.json();q(b.boards||[])}}catch(a){console.error("Failed to load boards:",a),k.toast.error("Failed to load boards")}}()},[]),(0,c.useEffect)(()=>{v&&a();async function a(){try{let a=await fetch(`/api/dashboard/institutions?board_id=${v}`);if(a.ok){let b=await a.json();s(b.institutions||[])}}catch(a){console.error("Failed to load institutions:",a),k.toast.error("Failed to load institutions")}}},[v]),(0,c.useEffect)(()=>{v&&(B||x)&&a();async function a(){try{let a=new URLSearchParams({board_id:v});!B&&x&&a.append("institution_id",x);let b=await fetch(`/api/dashboard/programs?${a}`);if(b.ok){let a=await b.json();u(a.programs||[])}}catch(a){console.error("Failed to load programs:",a),k.toast.error("Failed to load programs")}}},[v,x,B]);let D=async()=>{if(!z)return void k.toast.error("Please select a program");o(!0);try{if(!(await fetch("/api/dashboard/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({program_id:z,institution_id:B?null:x})})).ok)throw Error("Failed to update profile");k.toast.success("Profile updated successfully!"),a.push("/app/dashboard"),a.refresh()}catch(a){console.error("Failed to save profile:",a),k.toast.error("Failed to save your selection. Please try again.")}finally{o(!1)}};return(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,b.jsxs)(f.Card,{className:"w-full max-w-2xl",children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("div",{className:"p-3 bg-primary/10 rounded-lg",children:(0,b.jsx)(i.GraduationCap,{className:"h-8 w-8 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(f.CardTitle,{className:"text-2xl",children:"Welcome to Zirna"}),(0,b.jsx)(f.CardDescription,{children:"Let's set up your learning profile"})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:`flex-1 h-2 rounded-full ${a<=l?"bg-primary":"bg-gray-200"}`},a))})]}),(0,b.jsxs)(f.CardContent,{className:"space-y-6",children:[1===l&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Select Your Board"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Choose the education board or examination body you're studying under"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"board",children:"Board"}),(0,b.jsxs)(h.Select,{value:v,onValueChange:w,children:[(0,b.jsx)(h.SelectTrigger,{id:"board",children:(0,b.jsx)(h.SelectValue,{placeholder:"Select a board"})}),(0,b.jsx)(h.SelectContent,{children:p.map(a=>(0,b.jsxs)(h.SelectItem,{value:a.id,children:[a.name," (",a.type,")"]},a.id))})]})]})]}),2===l&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Select Your Institution"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Are you enrolled in a school, college, or studying independently?"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)("input",{type:"checkbox",id:"selfPaced",checked:B,onChange:a=>{C(a.target.checked),a.target.checked&&y("")},className:"rounded"}),(0,b.jsx)(g.Label,{htmlFor:"selfPaced",className:"cursor-pointer",children:"I'm a self-paced learner (not enrolled in an institution)"})]}),!B&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"institution",children:"Institution"}),(0,b.jsxs)(h.Select,{value:x,onValueChange:y,disabled:B,children:[(0,b.jsx)(h.SelectTrigger,{id:"institution",children:(0,b.jsx)(h.SelectValue,{placeholder:"Select your institution"})}),(0,b.jsx)(h.SelectContent,{children:r.map(a=>(0,b.jsxs)(h.SelectItem,{value:a.id,children:[a.name," (",a.type,")"]},a.id))})]})]})]}),3===l&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Select Your Program"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Choose your class, course, or examination program"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"program",children:"Program"}),(0,b.jsxs)(h.Select,{value:z?.toString()||"",onValueChange:a=>A(parseInt(a)),children:[(0,b.jsx)(h.SelectTrigger,{id:"program",children:(0,b.jsx)(h.SelectValue,{placeholder:"Select your program"})}),(0,b.jsx)(h.SelectContent,{children:t.map(a=>(0,b.jsxs)(h.SelectItem,{value:a.id.toString(),children:[a.name,a.level&&` (${a.level})`]},a.id))})]})]}),0===t.length&&(0,b.jsx)("div",{className:"text-sm text-amber-600 bg-amber-50 p-3 rounded-lg",children:"No programs available for this selection. Please contact your administrator."})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[l>1&&(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>{m(l-1)},disabled:n,children:"Back"}),l<3?(0,b.jsx)(e.Button,{onClick:()=>{1!==l||v?2!==l||B||x?m(l+1):k.toast.error("Please select an institution or choose self-paced learning"):k.toast.error("Please select a board")},className:"ml-auto",children:"Next"}):(0,b.jsx)(e.Button,{onClick:D,disabled:n||!z,className:"ml-auto",children:n?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.CheckCircle2,{className:"h-4 w-4 mr-2"}),"Complete Setup"]})})]})]})]})})}a.s(["default",()=>l])}];

//# sourceMappingURL=_2ae89ab2._.js.map