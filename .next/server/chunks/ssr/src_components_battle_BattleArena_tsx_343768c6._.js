module.exports=[854041,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(699570),f=a.i(173390),g=a.i(823292),h=a.i(596221),i=a.i(583077),j=a.i(641710),k=a.i(705151),l=a.i(419221),m=a.i(220005),n=a.i(897627),o=a.i(194131),p=a.i(681010),q=a.i(238246);function r({battle:a,currentUser:f}){let j=(0,d.useRouter)(),[k,m]=(0,c.useState)(!1),n=a.participants.find(a=>a.user_id===f.id),o=a.participants.find(a=>a.user_id!==f.id),r=n?.score>(o?.score||0),s=n?.score===(o?.score||0);o?.finished;let t="COMPLETED"===a.status,u=async()=>{m(!0);try{let b=await fetch("/api/battle/rematch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({battleId:a.id})}),c=await b.json();if(!b.ok)throw Error(c.error);g.toast.success("Rematch created! Redirecting..."),j.push(`/app/practice/battle/${c.battleId}`)}catch(a){g.toast.error(a.message||"Failed to create rematch")}finally{m(!1)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-slate-950 text-slate-100 font-sans selection:bg-purple-500/30 relative overflow-hidden flex items-center justify-center p-4",children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-indigo-900/40 via-slate-950 to-slate-950 pointer-events-none"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-[url('/grid.svg')] bg-center [mask-image:linear-gradient(180deg,white,rgba(255,255,255,0))] opacity-20 pointer-events-none"}),(0,b.jsxs)("div",{className:"max-w-2xl w-full space-y-8 relative z-10",children:[(0,b.jsxs)("div",{className:"text-center space-y-2 animate-in slide-in-from-bottom-4 fade-in duration-700",children:[(0,b.jsx)("h1",{className:"text-5xl md:text-7xl font-black tracking-tight bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 bg-clip-text text-transparent drop-shadow-sm",children:t?r?"VICTORY!":s?"DRAW!":"DEFEAT":"FINISHED!"}),(0,b.jsx)("p",{className:"text-xl text-slate-400",children:t?"The battle has ended. Here are the results.":"You have completed the quiz. Waiting for opponent..."})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)("div",{className:`relative overflow-hidden rounded-3xl p-6 border-2 ${r&&t?"border-yellow-500 bg-yellow-500/10":"border-slate-800 bg-slate-900/50"} backdrop-blur-xl transition-all duration-500`,children:(0,b.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:`h-24 w-24 rounded-full flex items-center justify-center text-3xl font-bold text-white shadow-xl ${r&&t?"bg-gradient-to-br from-yellow-400 to-orange-500":"bg-gradient-to-br from-indigo-500 to-purple-600"}`,children:f.username?.[0]?.toUpperCase()}),r&&t&&(0,b.jsx)("div",{className:"absolute -top-2 -right-2 bg-yellow-400 text-yellow-900 p-2 rounded-full shadow-lg animate-bounce",children:(0,b.jsx)(i.Trophy,{className:"h-6 w-6"})})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-2xl font-bold text-white",children:f.username}),(0,b.jsx)("p",{className:"text-indigo-300 font-medium",children:"You"})]}),(0,b.jsx)("div",{className:"w-full py-4 border-t border-slate-700/50",children:(0,b.jsxs)("div",{className:"flex justify-between items-end",children:[(0,b.jsx)("span",{className:"text-slate-400 text-sm uppercase tracking-wider font-bold",children:"Score"}),(0,b.jsx)("span",{className:"text-4xl font-black text-white",children:n?.score||0})]})})]})}),(0,b.jsx)("div",{className:`relative overflow-hidden rounded-3xl p-6 border-2 ${!r&&!s&&t?"border-yellow-500 bg-yellow-500/10":"border-slate-800 bg-slate-900/50"} backdrop-blur-xl transition-all duration-500`,children:(0,b.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:`h-24 w-24 rounded-full flex items-center justify-center text-3xl font-bold text-white shadow-xl ${!r&&!s&&t?"bg-gradient-to-br from-yellow-400 to-orange-500":"bg-gradient-to-br from-rose-500 to-orange-600"}`,children:o?.user?.username?.[0]?.toUpperCase()||"?"}),!r&&!s&&t&&(0,b.jsx)("div",{className:"absolute -top-2 -right-2 bg-yellow-400 text-yellow-900 p-2 rounded-full shadow-lg animate-bounce",children:(0,b.jsx)(i.Trophy,{className:"h-6 w-6"})})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-2xl font-bold text-white",children:o?.user?.username||"Opponent"}),(0,b.jsx)("p",{className:"text-rose-300 font-medium",children:"Challenger"})]}),(0,b.jsx)("div",{className:"w-full py-4 border-t border-slate-700/50",children:(0,b.jsxs)("div",{className:"flex justify-between items-end",children:[(0,b.jsx)("span",{className:"text-slate-400 text-sm uppercase tracking-wider font-bold",children:"Score"}),(0,b.jsx)("span",{className:"text-4xl font-black text-white",children:o?.score||0})]})}),!t&&(0,b.jsx)("div",{className:"absolute inset-0 bg-slate-950/60 backdrop-blur-sm flex items-center justify-center",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2 text-slate-300 animate-pulse",children:[(0,b.jsx)(h.Loader2,{className:"h-8 w-8 animate-spin"}),(0,b.jsx)("span",{className:"font-bold",children:"Still playing..."})]})})]})})]}),(0,b.jsxs)("div",{className:"flex justify-center gap-4 pt-8",children:[(0,b.jsx)(q.default,{href:"/app/practice/battle",children:(0,b.jsxs)(e.Button,{className:"h-14 px-8 text-lg font-bold bg-slate-800 hover:bg-slate-700 text-white border border-slate-700 rounded-xl shadow-lg transition-all hover:scale-105",children:[(0,b.jsx)(p.Home,{className:"mr-2 h-5 w-5"}),"Lobby"]})}),(0,b.jsx)(e.Button,{onClick:u,disabled:k,className:"h-14 px-8 text-lg font-bold bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white rounded-xl shadow-lg shadow-indigo-500/25 transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:k?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Loader2,{className:"mr-2 h-5 w-5 animate-spin"}),"Creating..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Swords,{className:"mr-2 h-5 w-5"}),"Rematch"]})})]})]})]})}function s({battle:a,currentUser:p,supabaseConfig:q}){let s=a.participants.find(a=>a.user_id===p.id),t=(0,d.useRouter)(),[u,v]=(0,c.useState)(a),[w,x]=(0,c.useState)(s?.current_q_index||0),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)("WAITING"===a.status),[C,D]=(0,c.useState)(15),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(null);(0,c.useEffect)(()=>{q.url&&q.anonKey&&H((0,o.createClient)(q.url,q.anonKey))},[q]);let I=(0,c.useRef)(u),J=(0,c.useRef)(!1);(0,c.useEffect)(()=>{I.current=u},[u]);let K=u.participants.find(a=>a.user_id!==p.id),L=u.participants.find(a=>a.user_id===p.id),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)(3),Q=async a=>{try{let b=await fetch("/api/battle/join",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:a})});if(!b.ok){let a=await b.json();g.toast.error(a.error||"Failed to join rematch");return}let c=await b.json();t.push(`/app/practice/battle/${c.battle.id}`)}catch(a){console.error("Error joining rematch:",a),g.toast.error("Failed to join rematch")}},R=async()=>{let a=I.current,b=a.participants.find(a=>a.user_id===p.id);try{let c=await fetch(`/api/battle/${a.id}`);if(c.ok){let d=await c.json();if(d.battle){if("IN_PROGRESS"===a.status&&"WAITING"===d.battle.status&&(d.battle.status="IN_PROGRESS"),b?.finished){let a=d.battle.participants.find(a=>a.user_id===p.id);a&&(a.finished=!0,a.score=Math.max(a.score,b.score),a.current_q_index=Math.max(a.current_q_index,b.current_q_index))}v(d.battle),"IN_PROGRESS"===d.battle.status&&B(!1),"COMPLETED"===d.battle.status&&g.toast.success("Battle Completed!")}}}catch(a){console.error("Failed to fetch battle data:",a)}};if((0,c.useEffect)(()=>{if(!G)return void console.warn("[BATTLE-REALTIME] Supabase client not available");console.log("[BATTLE-REALTIME] Setting up subscription for battle:",u.id);let a=G.channel(`battle:${u.id}`).on("broadcast",{event:"BATTLE_UPDATE"},a=>{if(console.log("[BATTLE-REALTIME] ✅ Received BATTLE_UPDATE:",a),a.payload?.type==="BATTLE_CANCELLED"){g.toast.error("Battle was cancelled by the host"),t.push("/app/practice/battle");return}if(a.payload?.type==="PARTICIPANT_LEFT"){a.payload.userId!==p.id&&(g.toast.info("Opponent left the lobby"),R());return}a.payload?.status==="IN_PROGRESS"&&(console.log("[BATTLE-REALTIME] Updating status to IN_PROGRESS"),v(a=>({...a,status:"IN_PROGRESS"}))),console.log("[BATTLE-REALTIME] Fetching latest battle data..."),R()}).on("broadcast",{event:"REMATCH"},a=>{console.log("[BATTLE-REALTIME] ✅ Received REMATCH:",a),a.payload?.newBattleId&&a.payload.requesterId!==p.id&&g.toast.success("Opponent wants a rematch!",{action:{label:"Join",onClick:()=>Q(a.payload.newBattleCode)},duration:1e4})}).subscribe(b=>{console.log("[BATTLE-REALTIME] Subscription status:",b),"SUBSCRIBED"===b&&(console.log("[BATTLE-REALTIME] Successfully subscribed to channel"),a.send({type:"broadcast",event:"BATTLE_UPDATE",payload:{type:"JOIN"}}))});return()=>{console.log("[BATTLE-REALTIME] Cleaning up subscription"),G.removeChannel(a)}},[u.id,G]),(0,c.useEffect)(()=>{if(A||M||"COMPLETED"===u.status||L?.finished)return;if(C<=0)return void U(!0);let a=setInterval(()=>{D(a=>a-1)},1e3);return()=>clearInterval(a)},[C,A,M,u.status,L?.finished]),(0,c.useEffect)(()=>{if("IN_PROGRESS"===u.status&&"WAITING"===a.status){N(!0),B(!1);let a=3;P(3);let b=setInterval(()=>{P(--a),a<=0&&(clearInterval(b),N(!1))},1e3);return()=>clearInterval(b)}},[u.status]),(0,c.useEffect)(()=>{let a=()=>{if(J.current)return;let a=I.current,b=a.participants.find(a=>a.user_id===p.id),c="WAITING"===a.status||"IN_PROGRESS"===a.status,d=!b?.finished&&"COMPLETED"!==a.status;c&&d&&fetch("/api/battle/leave",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({battleId:a.id}),keepalive:!0})};return window.addEventListener("beforeunload",a),()=>{window.removeEventListener("beforeunload",a)}},[p.id]),L?.finished||"COMPLETED"===u.status)return(0,b.jsx)(r,{battle:u,currentUser:p});let S=async()=>{try{let a=await fetch("/api/battle/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({battleId:u.id})});if(!a.ok){let b=await a.json();throw Error(b.error||"Failed to start battle")}if(v(a=>({...a,status:"IN_PROGRESS"})),G){let a=G.channel(`battle:${u.id}`);await a.send({type:"broadcast",event:"BATTLE_UPDATE",payload:{type:"START"}})}}catch(a){g.toast.error(a.message||"Failed to start battle")}},T=async()=>{J.current=!0;try{(await fetch("/api/battle/leave",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({battleId:u.id})})).ok?(t.push("/app/practice/battle"),g.toast.success("Left lobby")):g.toast.error("Failed to leave lobby")}catch(a){console.error("Error leaving lobby:",a),g.toast.error("Failed to leave lobby")}},U=async(a=!1)=>{let b="boolean"==typeof a&&a;if(E)return;F(!0);let c=u.quiz.questions[w];console.log("[BATTLE-ANSWER] ========== Answer Validation =========="),console.log("[BATTLE-ANSWER] Question:",c.question_text),console.log("[BATTLE-ANSWER] Question Type:",c.question_type),console.log("[BATTLE-ANSWER] Selected Answer:",y,"Type:",typeof y),console.log("[BATTLE-ANSWER] Correct Answer:",c.correct_answer,"Type:",typeof c.correct_answer),console.log("[BATTLE-ANSWER] Options:",c.options),console.log("[BATTLE-ANSWER] Is Auto-submit:",b);let d=!1;if(!b&&null!==y)if("MCQ"===c.question_type||"TRUE_FALSE"===c.question_type){let a=String(y).toLowerCase().trim(),b=String(c.correct_answer).toLowerCase().trim();if(console.log("[BATTLE-ANSWER] Comparing (lowercase, trimmed):"),console.log("[BATTLE-ANSWER]   Selected:",`"${a}"`),console.log("[BATTLE-ANSWER]   Correct:",`"${b}"`),console.log("[BATTLE-ANSWER] String match result:",d=a===b),!d&&"number"==typeof c.correct_answer){let a=c.options;a&&a[c.correct_answer]===y&&(d=!0,console.log("[BATTLE-ANSWER] Index match result: true"))}}else d=String(y).toLowerCase().trim()===String(c.correct_answer).toLowerCase().trim();console.log("[BATTLE-ANSWER] Final isCorrect:",d),console.log("[BATTLE-ANSWER] =====================================\n");let e=d?c.points:0,f=(L?.score||0)+e,h=w>=u.quiz.questions.length-1;try{if(await fetch("/api/battle/update-progress",{method:"POST",body:JSON.stringify({battleId:u.id,score:f,questionIndex:w+1,finished:h})}),G){let a=G.channel(`battle:${u.id}`);await a.send({type:"broadcast",event:"BATTLE_UPDATE",payload:{type:"PROGRESS",userId:p.id}})}d?g.toast.success(`Correct! +${e} pts`):b?g.toast.error("Time's up! No points"):b||g.toast.error("Incorrect!"),h?(g.toast.success("You finished!"),v(a=>({...a,participants:a.participants.map(a=>a.user_id===p.id?{...a,score:f,finished:!0}:a)}))):(x(a=>a+1),z(null),D(15))}catch(a){g.toast.error("Failed to submit answer")}finally{F(!1)}};if(M)return(0,b.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-white relative overflow-hidden",children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-indigo-900/40 via-slate-950 to-slate-950 pointer-events-none"}),(0,b.jsxs)("div",{className:"z-10 flex flex-col items-center animate-in zoom-in duration-500",children:[(0,b.jsx)("h2",{className:"text-4xl font-bold text-indigo-400 mb-4",children:"Get Ready!"}),(0,b.jsx)("div",{className:"text-9xl font-black bg-gradient-to-b from-white to-slate-500 bg-clip-text text-transparent drop-shadow-[0_0_30px_rgba(99,102,241,0.5)]",children:O})]})]});if(A)return(0,b.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-start pt-20 md:justify-center md:pt-0 p-4 bg-slate-950 text-slate-100 font-sans selection:bg-purple-500/30 relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-[url('/grid.svg')] bg-center [mask-image:linear-gradient(180deg,white,rgba(255,255,255,0))] opacity-20 pointer-events-none"}),(0,b.jsxs)("div",{className:"bg-slate-900/50 backdrop-blur-xl p-4 md:p-8 rounded-3xl max-w-md w-full text-center space-y-4 md:space-y-8 border border-slate-800 shadow-2xl relative z-10 animate-in fade-in zoom-in-95 duration-500",children:[(0,b.jsxs)("div",{className:"space-y-1 md:space-y-2 relative",children:[(0,b.jsx)("div",{className:"absolute left-0 top-0",children:(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:T,className:"text-slate-400 hover:text-red-400 hover:bg-red-500/10",title:"Leave Lobby",children:(0,b.jsx)(m.LogOut,{className:"h-5 w-5"})})}),(0,b.jsx)("h2",{className:"text-2xl md:text-4xl font-black tracking-tight bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:"BATTLE LOBBY"}),(0,b.jsx)("p",{className:"text-sm md:text-base text-slate-400",children:"Waiting for players to join..."})]}),(0,b.jsxs)("div",{className:"py-4 md:py-8 relative",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-indigo-500/5 blur-3xl rounded-full"}),(0,b.jsx)("p",{className:"text-[10px] md:text-xs font-bold text-indigo-400 uppercase tracking-widest mb-2 md:mb-4",children:"Join Code"}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-3 md:gap-4",children:[(0,b.jsx)("span",{className:"text-4xl md:text-6xl font-mono font-bold tracking-widest text-white drop-shadow-[0_0_15px_rgba(99,102,241,0.5)]",children:u.code}),(0,b.jsx)(e.Button,{size:"icon",variant:"outline",onClick:()=>{navigator.clipboard.writeText(u.code),g.toast.success("Code copied!")},className:"h-10 w-10 md:h-12 md:w-12 rounded-xl border-slate-700 bg-slate-800/50 hover:bg-slate-700 hover:text-white transition-all",children:(0,b.jsx)(k.Copy,{className:"h-4 w-4 md:h-5 md:w-5"})})]})]}),(0,b.jsxs)("div",{className:"space-y-3 md:space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between bg-slate-800/50 p-3 md:p-4 rounded-2xl border border-slate-700/50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 md:gap-4",children:[(0,b.jsx)("div",{className:"h-10 w-10 md:h-12 md:w-12 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center font-bold text-white shadow-lg text-sm md:text-base",children:p.username?.[0]?.toUpperCase()}),(0,b.jsxs)("div",{className:"flex flex-col items-start",children:[(0,b.jsx)("span",{className:"font-bold text-white text-sm md:text-base",children:p.username}),(0,b.jsx)("span",{className:"text-[10px] md:text-xs text-indigo-300",children:"You"})]})]}),(0,b.jsx)("span",{className:"px-2 py-0.5 md:px-3 md:py-1 rounded-full bg-emerald-500/10 text-emerald-400 text-[10px] md:text-xs font-bold border border-emerald-500/20",children:"READY"})]}),K?(0,b.jsxs)("div",{className:"flex items-center justify-between bg-slate-800/50 p-3 md:p-4 rounded-2xl border border-slate-700/50 animate-in slide-in-from-bottom-4 fade-in duration-300",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 md:gap-4",children:[(0,b.jsx)("div",{className:"h-10 w-10 md:h-12 md:w-12 rounded-full bg-gradient-to-br from-rose-500 to-orange-600 flex items-center justify-center font-bold text-white shadow-lg text-sm md:text-base",children:K.user?.username?.[0]?.toUpperCase()||"?"}),(0,b.jsxs)("div",{className:"flex flex-col items-start",children:[(0,b.jsx)("span",{className:"font-bold text-white text-sm md:text-base",children:K.user?.username||"Opponent"}),(0,b.jsx)("span",{className:"text-[10px] md:text-xs text-rose-300",children:"Challenger"})]})]}),(0,b.jsx)("span",{className:"px-2 py-0.5 md:px-3 md:py-1 rounded-full bg-emerald-500/10 text-emerald-400 text-[10px] md:text-xs font-bold border border-emerald-500/20",children:"READY"})]}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 md:p-8 border-2 border-dashed border-slate-800 rounded-2xl text-slate-500 gap-2 md:gap-3 animate-pulse bg-slate-900/30",children:[(0,b.jsx)(h.Loader2,{className:"h-6 w-6 md:h-8 md:w-8 animate-spin text-indigo-500/50"}),(0,b.jsx)("span",{className:"text-xs md:text-sm font-medium",children:"Waiting for opponent..."})]})]}),u.created_by===p.id&&(0,b.jsx)(e.Button,{className:"w-full h-16 text-xl font-bold bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-400 hover:to-teal-400 shadow-lg shadow-emerald-500/20 transition-all hover:scale-[1.02] active:scale-[0.98] rounded-xl",disabled:!K,onClick:S,children:K?(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.Swords,{className:"h-6 w-6"}),"START BATTLE"]}):"Waiting for Player..."}),u.created_by!==p.id&&(0,b.jsxs)("div",{className:"p-4 rounded-xl bg-slate-800/50 border border-slate-700 text-slate-400 text-sm animate-pulse flex items-center justify-center gap-2",children:[(0,b.jsx)(h.Loader2,{className:"h-4 w-4 animate-spin"}),"Waiting for host to start..."]})]})]});let V=u.quiz.questions[w];return V?(0,b.jsxs)("div",{className:"min-h-screen bg-slate-950 text-slate-100 p-2 md:p-4 font-sans selection:bg-purple-500/30",children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-indigo-900/40 via-slate-950 to-slate-950 pointer-events-none"}),(0,b.jsxs)("div",{className:"max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-4 md:gap-8 relative z-10 pt-2 md:pt-8",children:[(0,b.jsxs)("div",{className:"lg:col-span-12 flex items-center justify-between bg-slate-900/50 backdrop-blur-md border border-slate-800 p-3 md:p-4 rounded-2xl shadow-xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 md:gap-4",children:[(0,b.jsx)("div",{className:"h-8 w-8 md:h-10 md:w-10 rounded-xl bg-indigo-500/20 flex items-center justify-center text-indigo-400",children:(0,b.jsx)(j.Clock,{className:"h-5 w-5 md:h-6 md:w-6"})}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-[10px] md:text-xs text-slate-400 font-medium uppercase tracking-wider",children:"Time"}),(0,b.jsxs)("span",{className:`text-xl md:text-2xl font-bold font-mono ${C<=5?"text-red-400 animate-pulse":"text-white"}`,children:[C,"s"]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end",children:[(0,b.jsx)("span",{className:"text-[10px] md:text-xs text-slate-400 font-medium uppercase tracking-wider",children:"Round"}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"text-xl md:text-2xl font-bold text-white",children:w+1}),(0,b.jsx)("span",{className:"text-base md:text-lg text-slate-500",children:"/"}),(0,b.jsx)("span",{className:"text-base md:text-lg text-slate-500",children:u.quiz.questions.length})]})]})]}),(0,b.jsxs)("div",{className:"lg:hidden flex items-center justify-between gap-2 bg-slate-900/50 backdrop-blur-md border border-slate-800 p-2 rounded-xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-1 bg-indigo-500/10 rounded-lg p-2 border border-indigo-500/20",children:[(0,b.jsx)("div",{className:"h-6 w-6 rounded-full bg-indigo-500 flex items-center justify-center font-bold text-white text-[10px]",children:"YOU"}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs font-bold text-white leading-none",children:L?.score||0}),(0,b.jsx)(f.Progress,{value:(L?.current_q_index||0)/u.quiz.questions.length*100,className:"h-1 w-12 bg-slate-800 mt-1",indicatorClassName:"bg-indigo-500"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-1 justify-end bg-slate-800/30 rounded-lg p-2 border border-slate-700/50",children:[(0,b.jsxs)("div",{className:"flex flex-col items-end",children:[(0,b.jsx)("span",{className:"text-xs font-bold text-slate-200 leading-none",children:K?.score||0}),(0,b.jsx)(f.Progress,{value:(K?.current_q_index||0)/u.quiz.questions.length*100,className:"h-1 w-12 bg-slate-800 mt-1",indicatorClassName:"bg-rose-500"})]}),(0,b.jsx)("div",{className:"h-6 w-6 rounded-full bg-rose-500 flex items-center justify-center font-bold text-white text-[10px]",children:"OPP"})]})]}),(0,b.jsxs)("div",{className:"lg:col-span-8 space-y-4 md:space-y-6",children:[(0,b.jsx)(n.QuestionCard,{questionType:V.question_type,questionNumber:w+1,totalQuestions:u.quiz.questions.length,points:V.points,className:"bg-slate-900/80 border-slate-800 shadow-2xl backdrop-blur-sm dark",children:(0,b.jsxs)("div",{className:"space-y-4 md:space-y-8 py-2",children:[(0,b.jsx)("p",{className:"text-lg md:text-2xl font-medium leading-relaxed text-slate-100",children:V.question_text}),(0,b.jsx)("div",{className:"grid gap-3 md:gap-4",children:V.options?.map((a,c)=>(0,b.jsx)("button",{onClick:()=>z(a),className:`
                                            group relative w-full p-3 md:p-5 text-left rounded-xl border-2 transition-all duration-200
                                            hover:scale-[1.01] active:scale-[0.99]
                                            ${y===a?"bg-indigo-600/20 border-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.3)]":"bg-slate-800/50 border-slate-700 hover:bg-slate-800 hover:border-slate-600"}
                                        `,children:(0,b.jsxs)("div",{className:"flex items-center gap-3 md:gap-4",children:[(0,b.jsx)("div",{className:`
                                                h-6 w-6 md:h-8 md:w-8 rounded-lg flex items-center justify-center text-xs md:text-sm font-bold border transition-colors
                                                ${y===a?"bg-indigo-500 border-indigo-400 text-white":"bg-slate-700 border-slate-600 text-slate-400 group-hover:border-slate-500"}
                                            `,children:String.fromCharCode(65+c)}),(0,b.jsx)("span",{className:`text-sm md:text-lg ${y===a?"text-white font-medium":"text-slate-300"}`,children:a})]})},c))})]})}),(0,b.jsx)(e.Button,{className:"w-full h-12 md:h-14 text-base md:text-lg font-bold bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 shadow-lg shadow-indigo-500/25 transition-all hover:scale-[1.02] active:scale-[0.98]",onClick:()=>U(!1),disabled:!y||E,children:E?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Loader2,{className:"mr-2 h-4 w-4 md:h-5 md:w-5 animate-spin"}),"Locking in..."]}):"Submit Answer"})]}),(0,b.jsx)("div",{className:"hidden lg:block lg:col-span-4 space-y-6",children:(0,b.jsxs)("div",{className:"bg-slate-900/50 backdrop-blur-md border border-slate-800 p-6 rounded-2xl shadow-xl space-y-6 sticky top-8",children:[(0,b.jsxs)("h3",{className:"font-bold text-lg flex items-center gap-2 text-white",children:[(0,b.jsx)(i.Trophy,{className:"h-5 w-5 text-yellow-500"}),"Live Standings"]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-3 p-4 bg-indigo-500/10 rounded-xl border border-indigo-500/20",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-8 w-8 rounded-full bg-indigo-500 flex items-center justify-center font-bold text-white text-xs",children:"YOU"}),(0,b.jsx)("span",{className:"font-medium text-indigo-200",children:"You"})]}),(0,b.jsx)("span",{className:"font-bold text-2xl text-white",children:L?.score||0})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex justify-between text-xs text-indigo-300/70",children:[(0,b.jsx)("span",{children:"Progress"}),(0,b.jsxs)("span",{children:[Math.round((L?.current_q_index||0)/u.quiz.questions.length*100),"%"]})]}),(0,b.jsx)(f.Progress,{value:(L?.current_q_index||0)/u.quiz.questions.length*100,className:"h-2 bg-slate-800",indicatorClassName:"bg-gradient-to-r from-indigo-500 to-purple-500"})]})]}),(0,b.jsxs)("div",{className:"space-y-3 p-4 bg-slate-800/30 rounded-xl border border-slate-700/50",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-8 w-8 rounded-full bg-rose-500 flex items-center justify-center font-bold text-white text-xs",children:"OPP"}),(0,b.jsx)("span",{className:"font-medium text-slate-300",children:K?.user?.username||"Opponent"})]}),(0,b.jsx)("span",{className:"font-bold text-2xl text-slate-200",children:K?.score||0})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex justify-between text-xs text-slate-500",children:[(0,b.jsx)("span",{children:"Progress"}),(0,b.jsxs)("span",{children:[Math.round((K?.current_q_index||0)/u.quiz.questions.length*100),"%"]})]}),(0,b.jsx)(f.Progress,{value:(K?.current_q_index||0)/u.quiz.questions.length*100,className:"h-2 bg-slate-800",indicatorClassName:"bg-rose-500"})]})]})]})]})})]})]}):(0,b.jsx)("div",{children:"Battle Finished!"})}a.s(["BattleArena",()=>s],854041)}];

//# sourceMappingURL=src_components_battle_BattleArena_tsx_343768c6._.js.map