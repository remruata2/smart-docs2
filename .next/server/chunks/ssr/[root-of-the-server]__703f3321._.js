module.exports=[137936,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(211857)},713095,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},522734,(a,b,c)=>{b.exports=a.x("fs",()=>require("fs"))},750227,(a,b,c)=>{b.exports=a.x("node:path",()=>require("node:path"))},59639,(a,b,c)=>{b.exports=a.x("node:process",()=>require("node:process"))},660526,(a,b,c)=>{b.exports=a.x("node:os",()=>require("node:os"))},509656,(a,b,c)=>{b.exports=a.x("node:tty",()=>require("node:tty"))},902157,(a,b,c)=>{b.exports=a.x("node:fs",()=>require("node:fs"))},666680,(a,b,c)=>{b.exports=a.x("node:crypto",()=>require("node:crypto"))},874533,(a,b,c)=>{b.exports=a.x("node:child_process",()=>require("node:child_process"))},912714,(a,b,c)=>{b.exports=a.x("node:fs/promises",()=>require("node:fs/promises"))},812057,(a,b,c)=>{b.exports=a.x("node:util",()=>require("node:util"))},478500,(a,b,c)=>{b.exports=a.x("node:async_hooks",()=>require("node:async_hooks"))},687769,(a,b,c)=>{b.exports=a.x("node:events",()=>require("node:events"))},254799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},761469,a=>{"use strict";var b=a.i(107341);let c=global.prisma||new b.PrismaClient;a.s(["db",0,c])},766518,a=>{"use strict";let b=a.i(761469).db;a.s(["default",0,b,"prisma",0,b])},580949,(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={},i={VercelOidcTokenError:()=>k};for(var j in i)d(h,j,{get:i[j],enumerable:!0});b.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);class k extends Error{constructor(a,b){super(a),this.name="VercelOidcTokenError",this.cause=b}toString(){return this.cause?`${this.name}: ${this.message}: ${this.cause}`:`${this.name}: ${this.message}`}}},461607,a=>{"use strict";var b=a.i(137936),c=a.i(766518),d=a.i(133477),e=a.i(975523),f=a.i(983111),g=a.i(799633);let h=f.z.object({summary:f.z.string().describe("Executive summary of major changes"),differences:f.z.array(f.z.object({category:f.z.enum(["Critical","Major","Minor","Formatting"]),clause:f.z.string().describe("Name of the clause or section affected"),docA_content:f.z.string().describe("What Document A says (quote)"),docB_content:f.z.string().describe("What Document B says (quote)"),implication:f.z.string().describe("Why this change matters (risk analysis)"),page_A:f.z.number().optional().describe("Page number in Doc A"),page_B:f.z.number().optional().describe("Page number in Doc B")}))});async function i(a,b){let[f,i]=await Promise.all([c.prisma.fileList.findUnique({where:{id:a}}),c.prisma.fileList.findUnique({where:{id:b}})]);if(!f||!i)throw Error("One or both documents not found.");if(!f.note||!i.note)throw Error("One or both documents haven't been parsed yet (missing content in 'note' field).");let j=`
    Compare these two documents. Identify substantive differences, risks, and changes in obligations.
    Ignore minor formatting changes (spacing, fonts) unless they change meaning.

    DOCUMENT A (${f.title}):
    ${f.note}

    DOCUMENT B (${i.title}):
    ${i.note}
  `,{apiKey:k}=await (0,d.getProviderApiKey)({provider:"gemini"});if(!k)throw Error("Gemini API key not found. Please configure it in settings.");let l=(0,g.createGoogleGenerativeAI)({apiKey:k}),{object:m}=await (0,e.generateObject)({model:l("gemini-1.5-pro"),schema:h,prompt:j});return{...m,docA:{id:f.id,title:f.title},docB:{id:i.id,title:i.title}}}async function j(a,b){try{let c=await i(a,b);return{success:!0,data:c}}catch(a){return console.error("Comparison failed:",a),{success:!1,error:a.message}}}async function k(a,b){try{let d=(await c.prisma.fileChunk.findMany({where:{file_id:a,page_number:b},select:{content:!0,bbox:!0}})).map(a=>({text:a.content,bbox:a.bbox}));return{success:!0,data:d}}catch(a){return console.error("Failed to fetch layout:",a),{success:!1,error:a.message}}}(0,a.i(713095).ensureServerEntryExports)([j,k]),(0,b.registerServerReference)(j,"606d920075f7e199818691f5938b6cf844e34393ac",null),(0,b.registerServerReference)(k,"6051f027ab6bfcc16901beb78de439860ea89cf588",null),a.s([],351322),a.i(351322),a.s(["6051f027ab6bfcc16901beb78de439860ea89cf588",()=>k,"606d920075f7e199818691f5938b6cf844e34393ac",()=>j],461607)},682672,a=>{a.v(b=>Promise.all(["server/chunks/ssr/[root-of-the-server]__cd19bbe2._.js"].map(b=>a.l(b))).then(()=>b(72918)))},966249,a=>{a.v(b=>Promise.all(["server/chunks/ssr/[root-of-the-server]__03c6968e._.js"].map(b=>a.l(b))).then(()=>b(860544)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__703f3321._.js.map