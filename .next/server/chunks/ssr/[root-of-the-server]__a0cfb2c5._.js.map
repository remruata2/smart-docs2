{"version":3,"sources":["../../../../src/components/admin/FilterSelect.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/admin/subjects/subject-form.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/admin/subjects/subject-status-toggle.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/admin/subjects/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/admin/FilterSelect.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/admin/FilterSelect.tsx\",\n    \"default\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/subjects/subject-form.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/subjects/subject-form.tsx\",\n    \"default\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/subjects/subject-status-toggle.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/subjects/subject-status-toggle.tsx\",\n    \"default\",\n);\n","import { prisma } from \"@/lib/prisma\";\nimport { redirect } from \"next/navigation\";\nimport Link from \"next/link\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth-options\";\nimport { isAdmin } from \"@/lib/auth\";\nimport SubjectForm from \"./subject-form\";\nimport SubjectStatusToggle from \"./subject-status-toggle\";\nimport FilterSelect from \"@/components/admin/FilterSelect\";\n\nexport default async function SubjectsPage({\n    searchParams,\n}: {\n    searchParams: Promise<{ programId?: string }>;\n}) {\n    const session = await getServerSession(authOptions);\n    if (!session?.user || !isAdmin((session.user as any).role)) {\n        redirect(\"/\");\n    }\n\n    const { programId } = await searchParams;\n\n    const where: any = {};\n    if (programId) {\n        where.program_id = parseInt(programId);\n    }\n\n    const subjects = await prisma.subject.findMany({\n        where,\n        include: {\n            program: {\n                include: {\n                    board: true,\n                },\n            },\n            _count: {\n                select: { chapters: true },\n            },\n        },\n        orderBy: { created_at: \"desc\" },\n    });\n\n    const programs = await prisma.program.findMany({\n        where: { is_active: true },\n        include: {\n            board: true,\n        },\n        orderBy: { name: \"asc\" },\n    });\n\n    return (\n        <div className=\"container mx-auto py-10\">\n            <div className=\"flex justify-between items-center mb-8\">\n                <h1 className=\"text-3xl font-bold\">Subjects Management</h1>\n            </div>\n\n            {/* Add Subject Form */}\n            <SubjectForm programs={programs} />\n\n            {/* Filters */}\n            <div className=\"bg-white p-4 rounded-lg shadow mb-8\">\n                <FilterSelect\n                    name=\"programId\"\n                    placeholder=\"All Programs\"\n                    options={programs.map(p => ({ value: p.id.toString(), label: `${p.name} (${p.board.name})` }))}\n                />\n            </div>\n\n            {/* Subjects List */}\n            <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\n                <ul className=\"divide-y divide-gray-200\">\n                    {subjects.map((subject) => (\n                        <li key={subject.id}>\n                            <Link\n                                href={`/admin/chapters?subjectId=${subject.id}`}\n                                className=\"block hover:bg-gray-50 transition\"\n                            >\n                                <div className=\"px-4 py-4 sm:px-6\">\n                                    <div className=\"flex items-center justify-between\">\n                                        <div className=\"flex items-center\">\n                                            <span className=\"text-sm font-medium text-indigo-600 truncate\">\n                                                {subject.name}\n                                            </span>\n                                            {subject.code && (\n                                                <span className=\"ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800\">\n                                                    {subject.code}\n                                                </span>\n                                            )}\n                                            <span className={`ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${subject.is_active ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>\n                                                {subject.is_active ? 'Active' : 'Inactive'}\n                                            </span>\n                                        </div>\n                                        <div className=\"ml-2 flex-shrink-0 flex\">\n                                            <SubjectStatusToggle subjectId={subject.id} isActive={subject.is_active} />\n                                        </div>\n                                    </div>\n                                    <div className=\"mt-2 sm:flex sm:justify-between\">\n                                        <div className=\"sm:flex\">\n                                            <p className=\"flex items-center text-sm text-gray-500 mr-6\">\n                                                Program: {subject.program.name}\n                                            </p>\n                                            <p className=\"flex items-center text-sm text-gray-500 mr-6\">\n                                                Board: {subject.program.board.name}\n                                            </p>\n                                            {subject.term && (\n                                                <p className=\"flex items-center text-sm text-gray-500 mr-6\">\n                                                    Term: {subject.term}\n                                                </p>\n                                            )}\n                                        </div>\n                                        <div className=\"mt-2 flex items-center text-sm text-gray-500 sm:mt-0\">\n                                            <p>Chapters: {subject._count.chapters}</p>\n                                        </div>\n                                    </div>\n                                </div>\n                            </Link>\n                        </li>\n                    ))}\n                    {subjects.length === 0 && (\n                        <li className=\"px-4 py-4 text-center text-gray-500\">No subjects found.</li>\n                    )}\n                </ul>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","ignoreList":[0,1,2]}