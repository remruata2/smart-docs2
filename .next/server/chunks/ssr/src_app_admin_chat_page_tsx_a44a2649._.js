module.exports=[396518,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(238246),e=a.i(699570),f=a.i(866718),g=a.i(591119),h=a.i(786304),i=a.i(400187),j=a.i(368114);let k=(0,i.cva)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=c.forwardRef(({className:a,variant:c,...d},e)=>(0,b.jsx)("div",{ref:e,role:"alert",className:(0,j.cn)(k({variant:c}),a),...d}));l.displayName="Alert",c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("h5",{ref:d,className:(0,j.cn)("mb-1 font-medium leading-none tracking-tight",a),...c})).displayName="AlertTitle";let m=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("div",{ref:d,className:(0,j.cn)("text-sm [&_p]:leading-relaxed",a),...c}));m.displayName="AlertDescription";var n=a.i(596221),o=a.i(692759),p=a.i(182434),q=a.i(162041),r=a.i(104720),s=a.i(292e3),t=a.i(563588),u=a.i(452495),v=a.i(705151),w=a.i(533441);let x=(0,a.i(170106).default)("file-down",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);var y=a.i(823292),z=a.i(762180),A=a.i(558348),B=a.i(278917);function C(){let[i,j]=(0,c.useState)([]),[k,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)("New Conversation"),[L,M]=(0,c.useState)(0),[N,O]=(0,c.useState)("gemini-2.5-pro"),[P,Q]=(0,c.useState)([{name:"gemini-2.5-pro",label:"Gemini 2.5 Pro"},{name:"gemini-2.5-flash",label:"Gemini 2.5 Flash"}]),[R,S]=(0,c.useState)(!1),[T,U]=(0,c.useState)(null),[V,W]=(0,c.useState)(null),[X,Y]=(0,c.useState)({}),[Z,$]=(0,c.useState)([]),[_,aa]=(0,c.useState)(!1),[ab,ac]=(0,c.useState)("");(0,c.useEffect)(()=>{let a=!1;return async function(){try{S(!0);let b=await fetch("/api/admin/ai/models?provider=gemini");if(!b.ok)throw Error("Failed to load models");let c=await b.json();if(a)return;let d=Array.isArray(c.models)?c.models:[],e=d.length>0?d:[{name:"gemini-2.5-pro",label:"Gemini 2.5 Pro"},{name:"gemini-2.5-flash",label:"Gemini 2.5 Flash"}];Q(e),e.length>0&&!e.some(a=>a.name===N)&&O(e[0].name)}catch(b){if(console.error("[AdminChat] Failed to fetch models",b),!a){let a=[{name:"gemini-2.5-pro",label:"Gemini 2.5 Pro"},{name:"gemini-2.5-flash",label:"Gemini 2.5 Flash"}];Q(a),a.some(a=>a.name===N)||O(a[0].name)}}finally{a||S(!1)}}(),()=>{a=!0}},[N]),(0,c.useEffect)(()=>{!async function(){try{aa(!0);let a=await fetch("/api/admin/categories");if(!a.ok)throw Error("Failed to load categories");let b=await a.json();$(b.categories||[]),ab&&!b.categories?.includes(ab)&&ac("")}catch(a){console.error("[AdminChat] Failed to fetch categories",a),$([])}finally{aa(!1)}}()},[]);let ad=(0,c.useRef)(null),ae=(0,c.useRef)(null);(0,c.useEffect)(()=>{ad.current&&ad.current.scrollTo({top:ad.current.scrollHeight,behavior:"smooth"})},[i]);let af=async a=>{try{let b,c=a?((b=(b=a.trim()).replace(/^(show|list|find|get|tell|what|who|when|where|how|can you|please)\s+/i,"")).length>50&&(b=b.substring(0,47)+"..."),b.length>0&&(b=b.charAt(0).toUpperCase()+b.slice(1)),b||"New Conversation"):"New Conversation",d=await fetch("/api/admin/conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:c})});if(!d.ok)throw Error("Failed to create conversation");return(await d.json()).conversation.id}catch(a){throw console.error("Error creating conversation:",a),y.toast.error("Failed to create conversation"),a}},ag=async(a,b)=>{try{if(!(await fetch(`/api/admin/conversations/${a}/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok)throw Error("Failed to save message")}catch(a){console.error("Error saving message:",a)}},ah=async a=>{try{let b=await fetch(`/api/admin/conversations/${a}`);if(!b.ok)throw Error("Failed to load conversation");let c=(await b.json()).conversation;I(c.id),K(c.title);let d=c.messages.map(a=>({id:a.id.toString(),role:a.role,content:a.content,timestamp:new Date(a.timestamp),sources:a.sources||[],tokenCount:a.tokenCount,filters:"assistant"===a.role?a.metadata?.filters||{category:"All Categories"}:void 0}));j(d),G(null),y.toast.success(`Loaded: ${c.title}`)}catch(a){console.error("Error loading conversation:",a),y.toast.error("Failed to load conversation")}},ai=async()=>{if(!k.trim()||D)return;let a={id:`user_${Date.now()}`,role:"user",content:k.trim(),timestamp:new Date};j(b=>[...b,a]),C(""),E(!0),G(null);let b=H;if(!b)try{b=await af(a.content),I(b),M(a=>a+1)}catch(a){console.error("Failed to create conversation:",a)}b&&(await ag(b,{role:"user",content:a.content}),M(a=>a+1));let c=`assistant_${Date.now()}`,d={id:c,role:"assistant",content:"Analyzing your question and searching database...",timestamp:new Date,sources:[],filters:{category:ab||"All Categories"}};j(a=>[...a,d]);try{let d=await fetch("/api/admin/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:a.content,conversationHistory:i,provider:"gemini",model:N,category:ab||void 0,stream:!0})});if(!d.ok){let a=d.headers.get("content-type");if(a&&-1!==a.indexOf("application/json")){let a=await d.json();if(429===d.status){y.toast.error(a.error||"You are making requests too quickly. Please wait and try again."),j(a=>a.filter(a=>a.id!==c));return}throw Error(a.error||"An unknown error occurred")}{let a=await d.text();console.error("Received non-JSON error response:",a);let b="The server returned an unexpected response";throw a.includes("504 Gateway Time-out")?b="Server timeout. Please try again later.":a.includes("502 Bad Gateway")?b="Server error. Please try again later.":a.includes("500 Internal Server Error")&&(b="Internal server error. Please try again later."),y.toast.error(b),Error(b)}}let e=d.body?.getReader(),f=new TextDecoder,g="",h={},k=!0,l=[],m=null;if(!e)throw Error("Failed to get response reader");for(;;){let{done:a,value:b}=await e.read();if(a)break;for(let a of f.decode(b,{stream:!0}).split("\n"))if(a.startsWith("data: "))try{let b=JSON.parse(a.slice(6));if("metadata"===b.type)h=b,U({queryType:b.queryType,searchQuery:b.searchQuery,analysisUsed:b.analysisUsed});else if("progress"===b.type)j(a=>a.map(a=>a.id===c?{...a,content:b.progress||"Processing..."}:a));else if("token"===b.type)k?(k=!1,g=b.text||""):g+=b.text||"",j(a=>a.map(a=>a.id===c?{...a,content:g}:a));else if("sources"===b.type)l=b.sources||[],j(a=>a.map(a=>a.id===c?{...a,sources:l}:a));else if("done"===b.type)m=b.tokenCount,j(a=>a.map(a=>a.id===c?{...a,tokenCount:m}:a));else if("error"===b.type)throw Error(b.error||"Streaming error occurred")}catch(a){console.error("Error parsing SSE data:",a)}}if(!g)throw Error("No response received from server");b&&(await ag(b,{role:"assistant",content:g,sources:l,tokenCount:m,metadata:{queryType:h.queryType,searchMethod:h.searchMethod,analysisUsed:h.analysisUsed,filters:{category:ab||"All Categories"}}}),M(a=>a+1))}catch(d){console.error("Chat error:",d);let a=d instanceof Error?d.message:"An unexpected error occurred";G(a);let b=`I apologize, but I encountered an error: ${a}. Please try again.`;j(a=>a.map(a=>a.id===c?{...a,content:b}:a))}finally{E(!1)}},aj=async(a,b)=>{if(a)try{await navigator.clipboard.writeText(a),W(b),setTimeout(()=>{W(null)},2e3)}catch(a){console.error("Failed to copy text: ",a)}},ak=async b=>{if(b)try{let c=new(await a.A(375269)).default,d=c.internal.pageSize.getWidth(),e=c.internal.pageSize.getHeight(),f=20,g=d-2*f,h=f,i=(a=10)=>{h+a>e-f&&(c.addPage(),h=f)},j=(a,b=12,d=!1,e=!1)=>{for(let j of(c.setFontSize(b),d&&e?c.setFont("helvetica","bolditalic"):d?c.setFont("helvetica","bold"):e?c.setFont("helvetica","italic"):c.setFont("helvetica","normal"),c.splitTextToSize(a,g)))i(),c.text(j,f,h),h+=.6*b},k=a=>{if(a.length<2)return;let b=[];for(let c of a)if(c.includes("|")){let a=c.split("|").map(a=>a.trim()).filter(a=>a.length>0);if(a.every(a=>/^:?-+:?$/.test(a)))continue;b.push(a)}if(0===b.length)return;let d=Math.max(...b.map(a=>a.length)),e=(g-10)/d;if(h+=5,i(8*b.length+20),b.length>0){c.setFillColor(240,240,240),c.rect(f,h-5,g,10,"F"),c.setFont("helvetica","bold"),c.setFontSize(10);for(let a=0;a<b[0].length;a++){let d=f+a*e+2;c.text(b[0][a],d,h)}h+=8}c.setFont("helvetica","normal");for(let a=1;a<b.length;a++){i(10),a%2==0&&(c.setFillColor(250,250,250),c.rect(f,h-5,g,8,"F"));let d=b[a];for(let a=0;a<d.length;a++){let b=f+a*e+2,g=d[a],j=c.splitTextToSize(g,e-4);for(let a=0;a<j.length;a++)a>0&&(h+=6,i(10)),c.text(j[a],b,h)}h+=8}let j=8*b.length+3;c.setDrawColor(200,200,200),c.setLineWidth(.5),c.rect(f,h-j,g,j);for(let a=1;a<d;a++){let b=f+a*e;c.line(b,h-j,b,h)}h+=5},l=(a,b=f)=>{let d;if(!a.trim())return;let e=/\*\*(.*?)\*\*/g,j=[],k=0;for(;null!==(d=e.exec(a));)d.index>k&&j.push({text:a.substring(k,d.index),bold:!1,italic:!1,code:!1}),j.push({text:d[1],bold:!0,italic:!1,code:!1}),k=d.index+d[0].length;k<a.length&&j.push({text:a.substring(k),bold:!1,italic:!1,code:!1}),0===j.length&&(j=[{text:a,bold:!1,italic:!1,code:!1}]);let l=b;for(let a of(i(),j)){if(!a.text)continue;a.bold?c.setFont("helvetica","bold"):a.code?c.setFont("courier","normal"):c.setFont("helvetica","normal"),c.setFontSize(12);let b=c.splitTextToSize(a.text,g-(l-f));for(let a=0;a<b.length;a++)a>0&&(h+=7,i(),l=f),c.text(b[a],l,h),a===b.length-1&&(l+=c.getTextWidth(b[a]))}h+=7};c.setFontSize(16),c.setFont("helvetica","bold"),c.text("Zirna Response",f,h),h+=15,c.setFontSize(10),c.setFont("helvetica","normal"),c.text(`Generated: ${new Date().toLocaleString()}`,f,h),h+=20,(a=>{let b=a.split("\n"),d=!1,e=!1,g=[];for(let a=0;a<b.length;a++){let m=b[a];if(m.includes("|")&&!d){e?g.push(m):(e=!0,g=[m]),a!==b.length-1&&b[a+1].includes("|")||(k(g),e=!1,g=[]);continue}if(e&&!m.includes("|")&&(k(g),e=!1,g=[]),m.startsWith("```")){(d=!d)||(h+=5);continue}if(d){c.setFont("courier","normal"),c.setFontSize(10),i(),c.text(m,f+10,h),h+=12;continue}if(m.startsWith("# ")){h+=10,j(m.substring(2),18,!0),h+=5;continue}if(m.startsWith("## ")){h+=8,j(m.substring(3),16,!0),h+=4;continue}if(m.startsWith("### ")){h+=6,j(m.substring(4),14,!0),h+=3;continue}if(m.match(/^[\s]*[-*+]\s/)){let a=2*(m.match(/^(\s*)/)?.[1]?.length||0),b=m.replace(/^[\s]*[-*+]\s/,"");i(),c.setFont("helvetica","normal"),c.setFontSize(12),c.text("•",f+a,h),l(b,f+a+10);continue}if(m.match(/^[\s]*\d+\.\s/)){let a=2*(m.match(/^(\s*)/)?.[1]?.length||0),b=m.match(/^[\s]*(\d+)\.\s(.*)$/);if(b){let d=b[1],e=b[2];i(),c.setFont("helvetica","normal"),c.setFontSize(12),c.text(`${d}.`,f+a,h),l(e,f+a+15);continue}}if(""===m.trim()){h+=6;continue}l(m)}})(b);let m=`cid-ai-response-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.pdf`;c.save(m)}catch(a){console.error("Failed to export PDF:",a),alert("Failed to export PDF. Please try again.")}};return(0,b.jsxs)("div",{className:"flex h-full",children:[(0,b.jsx)(B.default,{currentConversationId:H,onSelectConversation:ah,onNewConversation:()=>{I(null),K("New Conversation"),j([]),G(null),U(null),C(""),y.toast.success("Started new conversation")},refreshTrigger:L}),(0,b.jsxs)("div",{className:"flex-1 p-2 overflow-hidden",children:[F&&(0,b.jsxs)(l,{className:"mb-4",variant:"destructive",children:[(0,b.jsx)(s.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)(m,{children:F})]}),(0,b.jsxs)(g.Card,{className:"h-[calc(100vh-24px)] flex flex-col",children:[(0,b.jsx)(g.CardHeader,{className:"pb-4 flex-shrink-0",children:(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)(g.CardTitle,{className:"flex items-center gap-2 whitespace-nowrap",children:[(0,b.jsx)(t.MessageSquare,{className:"h-5 w-5"}),"Chat History"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("label",{htmlFor:"model",className:"text-sm text-gray-600 whitespace-nowrap",children:"AI Model:"}),(0,b.jsxs)("select",{id:"model",className:"h-9 w-48 rounded-md border border-gray-300 bg-white px-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:N,onChange:a=>O(a.target.value),children:[R&&(0,b.jsx)("option",{children:"Loading models..."}),!R&&0===P.length&&(0,b.jsx)("option",{children:"No models configured"}),!R&&P.map(a=>(0,b.jsx)("option",{value:a.name,children:a.label||a.name},a.name))]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("label",{htmlFor:"category",className:"text-sm text-gray-600 whitespace-nowrap",children:"Category:"}),(0,b.jsxs)("select",{id:"category",className:"h-9 rounded-md border border-gray-300 bg-white px-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:ab,onChange:a=>ac(a.target.value),disabled:_,children:[(0,b.jsx)("option",{value:"",children:"All Categories"}),_&&(0,b.jsx)("option",{children:"Loading categories..."}),!_&&0===Z.length&&(0,b.jsx)("option",{children:"No categories found"}),!_&&Z.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]})]}),i.length>0&&(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>{j([]),G(null),Y({})},children:"Clear Chat"})]})}),(0,b.jsxs)(g.CardContent,{className:"flex-1 flex flex-col p-0 min-h-0",children:[(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-4 scroll-smooth",ref:ad,style:{scrollBehavior:"smooth"},children:0===i.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 space-y-4",children:[(0,b.jsx)(p.Bot,{className:"h-12 w-12"}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-lg font-medium",children:"Welcome to Zirna Assistant"}),(0,b.jsx)("p",{className:"text-sm",children:"Ask me anything about the database records"})]})]}):(0,b.jsx)("div",{className:"space-y-4",children:i.map(a=>{var c;return(0,b.jsx)("div",{className:`flex gap-3 ${"user"===a.role?"justify-end":"justify-start"}`,children:(0,b.jsxs)("div",{className:`flex gap-3 max-w-[90%] ${"user"===a.role?"flex-row-reverse":"flex-row"}`,children:[(0,b.jsx)("div",{className:`flex h-8 w-8 shrink-0 select-none items-center justify-center rounded-full ${"user"===a.role?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`,children:"user"===a.role?(0,b.jsx)(q.User,{className:"h-4 w-4"}):(0,b.jsx)(p.Bot,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:`rounded-lg px-4 py-2 break-words ${"user"===a.role?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"}`,children:[(0,b.jsx)("div",{className:"text-sm break-words prose prose-sm max-w-none",children:"assistant"===a.role?(0,b.jsx)(b.Fragment,{children:a.content.includes("Analyzing your question")||a.content.includes("Generating response")||a.content.includes("Processing")||a.content.includes("Synthesizing")?(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,b.jsx)(n.Loader2,{className:"h-4 w-4 animate-spin"}),(0,b.jsx)("span",{children:a.content})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(z.default,{remarkPlugins:[A.default],components:{p:({children:a})=>(0,b.jsx)("p",{className:"mb-2 last:mb-0 break-words leading-relaxed",children:a}),ul:({children:a})=>(0,b.jsx)("ul",{className:"list-disc list-outside ml-4 mb-2 space-y-1",children:a}),ol:({children:a})=>(0,b.jsx)("ol",{className:"list-decimal list-outside ml-4 mb-2 space-y-1",children:a}),li:({children:a})=>(0,b.jsx)("li",{className:"leading-relaxed",children:a}),strong:({children:a})=>(0,b.jsx)("strong",{className:"font-bold text-gray-900",children:a}),em:({children:a})=>(0,b.jsx)("em",{className:"italic",children:a}),code:({children:a})=>(0,b.jsx)("code",{className:"bg-gray-200 px-1 py-0.5 rounded text-xs font-mono",children:a}),h1:({children:a})=>(0,b.jsx)("h1",{className:"text-lg font-bold mb-3 mt-4 first:mt-0 text-gray-900",children:a}),h2:({children:a})=>(0,b.jsx)("h2",{className:"text-base font-bold mb-2 mt-3 first:mt-0 text-gray-900",children:a}),h3:({children:a})=>(0,b.jsx)("h3",{className:"text-sm font-bold mb-2 mt-2 first:mt-0 text-gray-900",children:a}),table:({children:a})=>(0,b.jsx)("div",{className:"overflow-x-auto my-4",children:(0,b.jsx)("table",{className:"min-w-full border-collapse border border-gray-300 text-sm",children:a})}),thead:({children:a})=>(0,b.jsx)("thead",{className:"bg-gray-50",children:a}),tbody:({children:a})=>(0,b.jsx)("tbody",{className:"bg-white",children:a}),tr:({children:a})=>(0,b.jsx)("tr",{className:"border-b border-gray-200",children:a}),th:({children:a})=>(0,b.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold text-gray-900 bg-gray-50",children:a}),td:({children:a})=>(0,b.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-gray-700",children:a})},children:a.content}),(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>aj(a.content,a.id),title:"Copy to clipboard",children:V===a.id?(0,b.jsx)(w.Check,{className:"h-3.5 w-3.5 text-green-500"}):(0,b.jsx)(v.Copy,{className:"h-3.5 w-3.5"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:async()=>await ak(a.content),title:"Download as PDF",children:(0,b.jsx)(x,{className:"h-3.5 w-3.5"})})]})]})}):(0,b.jsx)("div",{className:"whitespace-pre-wrap",children:a.content})}),(0,b.jsxs)("div",{className:`text-xs mt-1 flex items-center gap-2 ${"user"===a.role?"text-blue-100":"text-gray-500"}`,children:[(0,b.jsx)("span",{children:(c=a.timestamp)?new Date(c).toLocaleString():""}),"assistant"===a.role&&a.tokenCount&&(0,b.jsxs)("span",{className:"border-l border-gray-300 dark:border-gray-700 pl-2 flex items-center",children:[(0,b.jsxs)("span",{title:"Input tokens",children:["In:"," ",a.tokenCount.input.toLocaleString()]}),(0,b.jsx)("span",{className:"mx-1",children:"|"}),(0,b.jsxs)("span",{title:"Output tokens",children:["Out:"," ",a.tokenCount.output.toLocaleString()]})]})]}),"assistant"===a.role&&a.filters&&(0,b.jsx)("div",{className:"mt-2 flex flex-wrap gap-2 text-xs",children:(0,b.jsxs)("div",{className:"inline-flex items-center gap-1 bg-gray-100 text-gray-700 border border-gray-300 px-2 py-1 rounded",children:[(0,b.jsx)("span",{className:"font-medium",children:"Category:"}),(0,b.jsx)("span",{children:a.filters.category||"All Categories"})]})}),a.sources&&a.sources.length>0&&(0,b.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,b.jsxs)("div",{className:"text-xs font-medium text-gray-600",children:["Sources (",a.sources.length,"):"]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(X[a.id]?a.sources:a.sources.slice(0,15)).map((a,c)=>(0,b.jsx)(d.default,{href:`/admin/files/${a.id}`,target:"_blank",rel:"noopener noreferrer",className:"inline-block",title:a.title,children:(0,b.jsxs)(h.Badge,{variant:"secondary",className:"text-xs hover:bg-blue-100 hover:text-blue-800 transition-colors cursor-pointer group max-w-xs",children:[(0,b.jsx)(r.FileText,{className:"h-3 w-3 mr-1 flex-shrink-0"}),(0,b.jsx)("span",{className:"truncate",children:((a,b=40)=>a.length<=b?a:a.substring(0,b).trim()+"...")(a.title,35)}),(0,b.jsx)(u.ExternalLink,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0"})]})},`${a.id}-${c}`)),a.sources.length>15&&(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>{var b;return b=a.id,void Y(a=>({...a,[b]:!a[b]}))},className:"text-xs text-blue-600 hover:text-blue-800 py-1 h-auto",children:X[a.id]?"Show less":`Show ${a.sources.length-15} more...`})]})]})]})]})},a.id)})})}),(0,b.jsxs)("div",{className:"border-t p-4 flex-shrink-0",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Input,{ref:ae,value:k,onChange:a=>C(a.target.value),onKeyPress:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),ai())},placeholder:"Ask about Zirna database records...",disabled:D,className:"flex-1",maxLength:1e3}),(0,b.jsx)(e.Button,{onClick:ai,disabled:!k.trim()||D,size:"icon",children:D?(0,b.jsx)(n.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(o.Send,{className:"h-4 w-4"})})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center text-xs text-gray-500 mt-2",children:[(0,b.jsxs)("span",{children:[k.length,"/1000 characters"]}),T&&(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(h.Badge,{variant:"outline",className:"text-xs",children:["Type: ",T.queryType]}),T.analysisUsed&&(0,b.jsx)(h.Badge,{variant:"outline",className:"text-xs bg-green-50",children:"AI Analysis ✓"})]})]})]})]})]})]})]})}a.s(["default",()=>C],396518)}];

//# sourceMappingURL=src_app_admin_chat_page_tsx_a44a2649._.js.map