module.exports=[738783,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored["react-ssr"].ReactServerDOMTurbopackClient},935112,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored["react-ssr"].ReactDOM},596221,a=>{"use strict";let b=(0,a.i(170106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],596221)},346058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},288347,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={ACTION_HMR_REFRESH:function(){return k},ACTION_NAVIGATE:function(){return h},ACTION_REFRESH:function(){return g},ACTION_RESTORE:function(){return i},ACTION_SERVER_ACTION:function(){return l},ACTION_SERVER_PATCH:function(){return j},PrefetchKind:function(){return m}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g="refresh",h="navigate",i="restore",j="server-patch",k="hmr-refresh",l="server-action";var m=((d={}).AUTO="auto",d.FULL="full",d.TEMPORARY="temporary",d);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},467009,(a,b,c)=>{"use strict";function d(a){return null!==a&&"object"==typeof a&&"then"in a&&"function"==typeof a.then}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isThenable",{enumerable:!0,get:function(){return d}})},190841,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={dispatchAppRouterAction:function(){return i},useActionQueue:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(346058)._(a.r(572131)),g=a.r(467009),h=null;function i(a){if(null===h)throw Object.defineProperty(Error("Internal Next.js error: Router action dispatched before initialization."),"__NEXT_ERROR_CODE",{value:"E668",enumerable:!1,configurable:!0});h(a)}function j(a){let[b,c]=f.default.useState(a.state);h=b=>a.dispatch(b,c);let d=(0,f.useMemo)(()=>b,[b]);return(0,g.isThenable)(d)?(0,f.use)(d):d}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},120611,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"callServer",{enumerable:!0,get:function(){return g}});let d=a.r(572131),e=a.r(288347),f=a.r(190841);async function g(a,b){return new Promise((c,g)=>{(0,d.startTransition)(()=>{(0,f.dispatchAppRouterAction)({type:e.ACTION_SERVER_ACTION,actionId:a,actionArgs:b,resolve:c,reject:g})})})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},1722,(a,b,c)=>{"use strict";let d;Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"findSourceMapURL",{enumerable:!0,get:function(){return d}});("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},405050,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(120611),g=a.r(1722),h=a.r(738783)},104720,a=>{"use strict";let b=(0,a.i(170106).default)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);a.s(["FileText",()=>b],104720)},655918,a=>{"use strict";var b=a.i(187924),c=a.i(572131);function d({imageUrl:a,boundingBox:d,pageNumber:e,onClose:f,layoutItems:g,chunkContent:h,title:i}){let j,[k,l]=(0,c.useState)(!1);(0,c.useEffect)(()=>{l(!1)},[a]);let m=a=>{if(!a||4!==a.length)return null;let[b,c,d,e]=a;return b>1||c>1||d>1||e>1?[Math.max(0,Math.min(1,b/595)),Math.max(0,Math.min(1,c/842)),Math.max(0,Math.min(1,d/595)),Math.max(0,Math.min(1,e/842))]:[b,c,d,e]},n=(()=>{if(g&&g.length>0&&h){let a=h.toLowerCase().trim(),b=null;for(let c of g){let d=c.text.toLowerCase().trim();if(!d)continue;let e=0;(a.includes(d)||d.includes(a))&&(e+=100);let f=a.split(/\s+/).filter(a=>a.length>2),g=d.split(/\s+/).filter(a=>a.length>2);e+=10*f.filter(a=>g.includes(a)).length+2*((a,b)=>{let c=0;for(let d=0;d<a.length;d++)for(let e=0;e<b.length;e++){let f=0;for(;d+f<a.length&&e+f<b.length&&a[d+f]===b[e+f];)f++;c=Math.max(c,f)}return c})(a,d),(!b||e>b.score)&&(b={item:c,score:e})}if(b&&b.score>20)return m(b.item.bbox)}return m(d)})();return(0,b.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 border-l border-gray-200 shadow-xl w-full max-w-2xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-white border-b border-gray-200",children:[(0,b.jsxs)("div",{className:"flex flex-col min-w-0 flex-1",children:[(0,b.jsx)("h3",{className:"font-medium text-gray-900 truncate",children:i||"Evidence"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:["Page ",e]})]}),(0,b.jsx)("button",{onClick:f,className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Close evidence viewer",children:(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,b.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,b.jsx)("div",{className:"flex-1 overflow-auto p-4 relative flex justify-center",children:(0,b.jsxs)("div",{className:"relative shadow-lg border border-gray-200 bg-white inline-block",children:[!k&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 z-10",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),(0,b.jsx)("img",{src:a,alt:`Page ${e}`,className:"max-w-full h-auto block",style:{maxHeight:"calc(100vh - 150px)"},onLoad:()=>l(!0)}),k&&n&&(j=n[3]>.5,(0,b.jsx)("div",{className:"absolute border-2 border-yellow-500 mix-blend-multiply transition-all duration-300",style:{left:`${100*n[0]}%`,top:`${100*n[1]}%`,width:`${100*n[2]}%`,height:`${100*n[3]}%`,backgroundColor:`rgba(254, 240, 138, ${j?.15:.3})`,borderColor:`rgba(234, 179, 8, ${j?.5:1})`},children:(0,b.jsx)("div",{className:"absolute -top-6 left-0 bg-yellow-500 text-white text-xs px-1.5 py-0.5 rounded shadow-sm whitespace-nowrap",children:"Citation"})}))]})})]})}a.s(["EvidenceViewer",()=>d])},249031,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(104720),e=a.i(816201);function f({file:a,selected:c,onToggle:f,disabled:g}){return(0,b.jsx)("div",{onClick:()=>!g&&f(),className:`
        relative p-4 border rounded-xl cursor-pointer transition-all duration-200
        ${c?"border-blue-500 bg-blue-50 ring-2 ring-blue-200":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-sm"}
        ${g&&!c?"opacity-50 cursor-not-allowed hover:border-gray-200 hover:shadow-none":""}
      `,children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:`p-2 rounded-lg ${c?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-500"}`,children:(0,b.jsx)(d.FileText,{className:"w-6 h-6"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium text-gray-900 line-clamp-1",title:a.title,children:a.title}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:[a.category," â€¢ ",a.entry_date||"No date"]})]})]}),(0,b.jsx)("div",{className:`
          w-6 h-6 rounded-full border flex items-center justify-center transition-colors
          ${c?"bg-blue-500 border-blue-500 text-white":"border-gray-300 text-transparent"}
        `,children:(0,b.jsx)(e.CheckCircle,{className:"w-4 h-4"})})]})})}var g=a.i(655918),h=a.i(368114),i=a.i(405050),j=(0,i.createServerReference)("6051f027ab6bfcc16901beb78de439860ea89cf588",i.callServer,void 0,i.findSourceMapURL,"getPageLayout");function k({docA:a,docB:d,diffData:e,onBack:f}){let[i,k]=(0,c.useState)(null),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)([]);return c.default.useEffect(()=>{i&&(async()=>{if(i.page_A){let b=await j(a.id,i.page_A);b.success&&m(b.data||[])}if(i.page_B){let a=await j(d.id,i.page_B);a.success&&o(a.data||[])}})()},[i,a.id,d.id]),(0,b.jsxs)("div",{className:"flex h-[calc(100vh-4rem)] flex-col bg-white",children:[(0,b.jsxs)("div",{className:"border-b px-6 py-4 flex items-center justify-between bg-white",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Comparison Results"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:e.summary})]}),(0,b.jsx)("button",{onClick:f,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back to Selection"})]}),(0,b.jsx)("div",{className:"h-1/3 overflow-y-auto border-b bg-gray-50",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,b.jsx)("thead",{className:"text-xs text-gray-500 uppercase bg-gray-100 sticky top-0",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3",children:"Severity"}),(0,b.jsx)("th",{className:"px-6 py-3",children:"Clause"}),(0,b.jsx)("th",{className:"px-6 py-3",children:"Analysis"}),(0,b.jsx)("th",{className:"px-6 py-3",children:"Pages"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:e.differences.map((a,c)=>(0,b.jsxs)("tr",{onClick:()=>k(a),className:(0,h.cn)("cursor-pointer hover:bg-blue-50 transition-colors",i===a?"bg-blue-50 ring-1 ring-inset ring-blue-500":""),children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("span",{className:(0,h.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium","Critical"===a.category?"bg-red-100 text-red-800":"Major"===a.category?"bg-orange-100 text-orange-800":"Minor"===a.category?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:a.category})}),(0,b.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900",children:a.clause}),(0,b.jsx)("td",{className:"px-6 py-4 text-gray-500",children:a.implication}),(0,b.jsx)("td",{className:"px-6 py-4 text-gray-500",children:a.page_A&&a.page_B?`P${a.page_A} vs P${a.page_B}`:"-"})]},c))})]})})}),(0,b.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,b.jsxs)("div",{className:"w-1/2 border-r border-gray-200 flex flex-col relative bg-gray-100/50",children:[(0,b.jsxs)("div",{className:"absolute top-4 left-4 z-10 bg-gray-900/80 backdrop-blur-sm text-white px-3 py-1 rounded-full text-xs font-medium shadow-sm",children:["Original: ",a.title]}),(0,b.jsx)("div",{className:"flex-1 p-4 overflow-hidden",children:(0,b.jsx)(g.EvidenceViewer,{imageUrl:`/api/files/${a.id}/pages/${i?.page_A||1}`,chunkContent:i?.docA_content,pageNumber:i?.page_A||1,title:a.title,layoutItems:l})})]}),(0,b.jsxs)("div",{className:"w-1/2 flex flex-col relative bg-gray-100/50",children:[(0,b.jsxs)("div",{className:"absolute top-4 left-4 z-10 bg-blue-600/90 backdrop-blur-sm text-white px-3 py-1 rounded-full text-xs font-medium shadow-sm",children:["Modified: ",d.title]}),(0,b.jsx)("div",{className:"flex-1 p-4 overflow-hidden",children:(0,b.jsx)(g.EvidenceViewer,{imageUrl:`/api/files/${d.id}/pages/${i?.page_B||1}`,chunkContent:i?.docB_content,pageNumber:i?.page_B||1,title:d.title,layoutItems:n})})]})]})]})}var l=(0,i.createServerReference)("606d920075f7e199818691f5938b6cf844e34393ac",i.callServer,void 0,i.findSourceMapURL,"compareFilesAction"),m=a.i(596221),n=a.i(823292);function o({files:a}){let[d,e]=(0,c.useState)([]),[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(null),o=async()=>{if(2===d.length){h(!0);try{let a=await l(d[0],d[1]);a.success?j(a.data):n.toast.error("Comparison failed: "+a.error)}catch(a){n.toast.error("An unexpected error occurred"),console.error(a)}finally{h(!1)}}};return i?(0,b.jsx)(k,{docA:i.docA,docB:i.docB,diffData:i,onBack:()=>j(null)}):(0,b.jsxs)("div",{className:"p-8 max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Compare Documents"}),(0,b.jsx)("p",{className:"text-gray-500 mt-2",children:"Select two documents to analyze differences, risks, and changes."})]}),(0,b.jsx)("button",{disabled:2!==d.length||g,onClick:o,className:`
            flex items-center px-6 py-3 rounded-lg font-medium transition-all
            ${2===d.length?"bg-blue-600 text-white hover:bg-blue-700 shadow-md hover:shadow-lg":"bg-gray-100 text-gray-400 cursor-not-allowed"}
          `,children:g?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Loader2,{className:"w-5 h-5 mr-2 animate-spin"}),"Analyzing..."]}):(0,b.jsxs)(b.Fragment,{children:["Compare ",d.length,"/2 Files"]})})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(a=>(0,b.jsx)(f,{file:a,selected:d.includes(a.id),onToggle:()=>(a=>{if(d.includes(a))e(b=>b.filter(b=>b!==a));else{if(d.length>=2)return void n.toast.error("You can only compare 2 files at a time");e(b=>[...b,a])}})(a.id),disabled:d.length>=2&&!d.includes(a.id)},a.id))}),0===a.length&&(0,b.jsx)("div",{className:"text-center py-12 bg-gray-50 rounded-xl border border-dashed border-gray-300",children:(0,b.jsx)("p",{className:"text-gray-500",children:"No documents found. Upload some files to get started."})})]})}a.s(["default",()=>o],249031)}];

//# sourceMappingURL=_e69cbd36._.js.map