{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/loader-circle.ts","../../../../node_modules/%40radix-ui/react-label/dist/index.mjs","../../../../src/components/ui/label.tsx","../../../../node_modules/lucide-react/src/icons/trash-2.ts","../../../../node_modules/lucide-react/src/icons/pencil.ts","../../../../src/components/ui/table.tsx","../../../../src/components/auth/RoleGuard.tsx","../../../../node_modules/lucide-react/src/icons/circle-plus.ts","../../../../src/app/admin/settings/ai-keys/AiKeysClient.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'M21 12a9 9 0 1 1-6.219-8.56', key: '13zald' }]];\n\n/**\n * @component @name LoaderCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJhOSA5IDAgMSAxLTYuMjE5LTguNTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/loader-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LoaderCircle = createLucideIcon('loader-circle', __iconNode);\n\nexport default LoaderCircle;\n","\"use client\";\n\n// src/label.tsx\nimport * as React from \"react\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx } from \"react/jsx-runtime\";\nvar NAME = \"Label\";\nvar Label = React.forwardRef((props, forwardedRef) => {\n  return /* @__PURE__ */ jsx(\n    Primitive.label,\n    {\n      ...props,\n      ref: forwardedRef,\n      onMouseDown: (event) => {\n        const target = event.target;\n        if (target.closest(\"button, input, select, textarea\")) return;\n        props.onMouseDown?.(event);\n        if (!event.defaultPrevented && event.detail > 1) event.preventDefault();\n      }\n    }\n  );\n});\nLabel.displayName = NAME;\nvar Root = Label;\nexport {\n  Label,\n  Root\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M3 6h18', key: 'd0wm0j' }],\n  ['path', { d: 'M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6', key: '4alrt4' }],\n  ['path', { d: 'M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2', key: 'v07s0e' }],\n  ['line', { x1: '10', x2: '10', y1: '11', y2: '17', key: '1uufr5' }],\n  ['line', { x1: '14', x2: '14', y1: '11', y2: '17', key: 'xtxkd' }],\n];\n\n/**\n * @component @name Trash2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyA2aDE4IiAvPgogIDxwYXRoIGQ9Ik0xOSA2djE0YzAgMS0xIDItMiAySDdjLTEgMC0yLTEtMi0yVjYiIC8+CiAgPHBhdGggZD0iTTggNlY0YzAtMSAxLTIgMi0yaDRjMSAwIDIgMSAyIDJ2MiIgLz4KICA8bGluZSB4MT0iMTAiIHgyPSIxMCIgeTE9IjExIiB5Mj0iMTciIC8+CiAgPGxpbmUgeDE9IjE0IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjE3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/trash-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Trash2 = createLucideIcon('trash-2', __iconNode);\n\nexport default Trash2;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z',\n      key: '1a8usu',\n    },\n  ],\n  ['path', { d: 'm15 5 4 4', key: '1mk7zo' }],\n];\n\n/**\n * @component @name Pencil\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEuMTc0IDYuODEyYTEgMSAwIDAgMC0zLjk4Ni0zLjk4N0wzLjg0MiAxNi4xNzRhMiAyIDAgMCAwLS41LjgzbC0xLjMyMSA0LjM1MmEuNS41IDAgMCAwIC42MjMuNjIybDQuMzUzLTEuMzJhMiAyIDAgMCAwIC44My0uNDk3eiIgLz4KICA8cGF0aCBkPSJtMTUgNSA0IDQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/pencil\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Pencil = createLucideIcon('pencil', __iconNode);\n\nexport default Pencil;\n","\"use client\"\n\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Table({ className, ...props }: React.ComponentProps<\"table\">) {\n  return (\n    <div\n      data-slot=\"table-container\"\n      className=\"relative w-full overflow-x-auto\"\n    >\n      <table\n        data-slot=\"table\"\n        className={cn(\"w-full caption-bottom text-sm\", className)}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction TableHeader({ className, ...props }: React.ComponentProps<\"thead\">) {\n  return (\n    <thead\n      data-slot=\"table-header\"\n      className={cn(\"[&_tr]:border-b\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableBody({ className, ...props }: React.ComponentProps<\"tbody\">) {\n  return (\n    <tbody\n      data-slot=\"table-body\"\n      className={cn(\"[&_tr:last-child]:border-0\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableFooter({ className, ...props }: React.ComponentProps<\"tfoot\">) {\n  return (\n    <tfoot\n      data-slot=\"table-footer\"\n      className={cn(\n        \"bg-muted/50 border-t font-medium [&>tr]:last:border-b-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableRow({ className, ...props }: React.ComponentProps<\"tr\">) {\n  return (\n    <tr\n      data-slot=\"table-row\"\n      className={cn(\n        \"hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableHead({ className, ...props }: React.ComponentProps<\"th\">) {\n  return (\n    <th\n      data-slot=\"table-head\"\n      className={cn(\n        \"text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCell({ className, ...props }: React.ComponentProps<\"td\">) {\n  return (\n    <td\n      data-slot=\"table-cell\"\n      className={cn(\n        \"p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCaption({\n  className,\n  ...props\n}: React.ComponentProps<\"caption\">) {\n  return (\n    <caption\n      data-slot=\"table-caption\"\n      className={cn(\"text-muted-foreground mt-4 text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","\"use client\";\n\nimport { useSession } from \"next-auth/react\";\nimport { useRouter, usePathname, useSearchParams } from \"next/navigation\";\nimport { useEffect, useState, useCallback } from \"react\";\nimport { AlertCircle, Loader2 } from \"lucide-react\";\n\n// Import UserRole directly from Prisma\n\ninterface RoleGuardProps {\n\t/** The content to render if the user is authorized */\n\tchildren: React.ReactNode;\n\t/** The minimum role required to access the content */\n\trequiredRole: \"admin\" | \"institution\";\n\t/** Whether to allow admin access (admins bypass role checks) */\n\tallowAdmin?: boolean;\n\t/** Where to redirect if the user is not authorized */\n\tredirectTo?: string;\n\t/** Custom unauthorized content to render instead of redirecting */\n\tunauthorizedContent?: React.ReactNode;\n\t/** Whether to show loading state */\n\tshowLoading?: boolean;\n}\n\n/**\n * A component that renders its children only if the user has the required role.\n * If not, it will either redirect to the login page or show an unauthorized message.\n */\nconst RoleGuard = ({\n\tchildren,\n\trequiredRole,\n\tallowAdmin = true,\n\tredirectTo = \"/unauthorized\",\n\tunauthorizedContent,\n\tshowLoading = true,\n}: RoleGuardProps) => {\n\tconst { data: session, status } = useSession();\n\tconst router = useRouter();\n\tconst pathname = usePathname();\n\tconst searchParams = useSearchParams();\n\tconst [isChecking, setIsChecking] = useState(true);\n\tconst [error, setError] = useState<string | null>(null);\n\n\tconst checkAccess = useCallback(async () => {\n\t\tif (status === \"loading\") return;\n\n\t\ttry {\n\t\t\tsetIsChecking(true);\n\t\t\tsetError(null);\n\n\t\t\t// If user is not authenticated, redirect to login\n\t\t\tif (status === \"unauthenticated\" || !session?.user) {\n\t\t\t\tconst callbackUrl = encodeURIComponent(`${pathname}?${searchParams}`);\n\t\t\t\trouter.push(`/login?callbackUrl=${callbackUrl}`);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Get user role from session\n\t\t\tconst userRole = session?.user?.role;\n\n\t\t\t// If no role found, deny access\n\t\t\tif (!userRole) {\n\t\t\t\tconsole.warn(\"User role not found in session\");\n\t\t\t\tif (redirectTo) {\n\t\t\t\t\trouter.push(redirectTo);\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tsetError(\"User role not found. Please try logging in again.\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check if user has the required role or is admin (if allowed)\n\t\t\tconst hasAccess =\n\t\t\t\t(allowAdmin && userRole === \"admin\") ||\n\t\t\t\t(requiredRole === \"institution\" &&\n\t\t\t\t\t(userRole === \"institution\" || userRole === \"admin\")) ||\n\t\t\t\t(requiredRole === \"admin\" && userRole === \"admin\");\n\n\t\t\tif (!hasAccess) {\n\t\t\t\tconst errorMsg = `You don't have permission to access this page. Required role: ${requiredRole}`;\n\n\t\t\t\tif (redirectTo) {\n\t\t\t\t\trouter.push(redirectTo);\n\t\t\t\t} else {\n\t\t\t\t\tsetError(errorMsg);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error(\"Error checking access:\", err);\n\t\t\tsetError(\"An error occurred while checking your permissions.\");\n\t\t} finally {\n\t\t\tsetIsChecking(false);\n\t\t}\n\t}, [\n\t\tstatus,\n\t\tsession,\n\t\trequiredRole,\n\t\tallowAdmin,\n\t\tredirectTo,\n\t\trouter,\n\t\tpathname,\n\t\tsearchParams,\n\t]);\n\n\tuseEffect(() => {\n\t\tcheckAccess();\n\t}, [checkAccess]);\n\n\t// Show loading state\n\tif (isChecking && showLoading) {\n\t\treturn (\n\t\t\t<div className=\"flex flex-col items-center justify-center min-h-[200px] gap-4 p-8\">\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"relative\n          h-12 w-12\n          flex items-center justify-center\n          rounded-full\n          bg-primary/10\n          text-primary\n          animate-pulse\n        \"\n\t\t\t\t>\n\t\t\t\t\t<Loader2 className=\"h-6 w-6 animate-spin\" />\n\t\t\t\t</div>\n\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\tVerifying permissions...\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// Show error message if there was an error and we're not redirecting\n\tif (error && !redirectTo) {\n\t\treturn (\n\t\t\t<div className=\"container mx-auto p-6 max-w-2xl\">\n\t\t\t\t<div className=\"border border-destructive/20 bg-destructive/5 rounded-lg overflow-hidden\">\n\t\t\t\t\t<div className=\"p-6 space-y-4\">\n\t\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t\t<div className=\"flex-shrink-0 h-5 w-5 text-destructive\">\n\t\t\t\t\t\t\t\t<AlertCircle className=\"h-5 w-5\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"space-y-1.5\">\n\t\t\t\t\t\t\t\t<h3 className=\"text-lg font-medium text-foreground\">\n\t\t\t\t\t\t\t\t\tAccess Denied\n\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">{error}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex justify-end pt-2\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tonClick={() => window.history.back()}\n\t\t\t\t\t\t\t\tclassName=\"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors h-9 px-4 py-2 border border-destructive/20 text-destructive hover:bg-destructive/10 hover:text-destructive\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tGo Back\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// Show custom unauthorized content if provided\n\tif (error && unauthorizedContent) {\n\t\treturn <>{unauthorizedContent}</>;\n\t}\n\n\t// If we get here, the user is authorized\n\treturn <>{children}</>;\n};\n\nexport default RoleGuard;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'M8 12h8', key: '1wcyev' }],\n  ['path', { d: 'M12 8v8', key: 'napkw2' }],\n];\n\n/**\n * @component @name CirclePlus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJNOCAxMmg4IiAvPgogIDxwYXRoIGQ9Ik0xMiA4djgiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/circle-plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CirclePlus = createLucideIcon('circle-plus', __iconNode);\n\nexport default CirclePlus;\n","'use client';\n\nimport { useEffect, useMemo, useState } from 'react';\nimport { RoleGuard } from '@/components/auth';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { toast } from 'sonner';\nimport {\n  Table,\n  TableHeader,\n  TableRow,\n  TableHead,\n  TableBody,\n  TableCell,\n} from '@/components/ui/table';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from '@/components/ui/dialog';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from '@/components/ui/alert-dialog';\nimport { Loader2, Pencil, PlusCircle, Trash2 } from 'lucide-react';\n\ninterface AiKeyItem {\n  id: number;\n  provider: string;\n  label: string;\n  active: boolean;\n  priority: number;\n  last_used_at: string | null;\n  success_count: number;\n  error_count: number;\n  created_at: string | null;\n  updated_at: string | null;\n}\n\ntype FormState = {\n  provider: string;\n  label: string;\n  apiKeyPlain?: string;\n  active: boolean;\n  priority: number;\n};\n\nconst emptyForm: FormState = {\n  provider: 'gemini',\n  label: '',\n  apiKeyPlain: '',\n  active: true,\n  priority: 0,\n};\n\nexport default function AiKeysClient() {\n  const [items, setItems] = useState<AiKeyItem[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [editingId, setEditingId] = useState<number | null>(null);\n  const [form, setForm] = useState<FormState>(emptyForm);\n\n  const [isDeleteOpen, setIsDeleteOpen] = useState(false);\n  const [deleteId, setDeleteId] = useState<number | null>(null);\n\n  const title = useMemo(() => (editingId ? 'Update API Key' : 'Create API Key'), [editingId]);\n\n  const load = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await fetch('/api/admin/ai/keys', { cache: 'no-store' });\n      if (!res.ok) throw new Error('Failed to load API keys');\n      const data = await res.json();\n      setItems(Array.isArray(data.keys) ? data.keys : []);\n    } catch (e: any) {\n      console.error(e);\n      setError(e?.message || 'Failed to load API keys');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    load();\n  }, []);\n\n  const openCreate = () => {\n    setEditingId(null);\n    setForm(emptyForm);\n    setIsDialogOpen(true);\n  };\n\n  const openEdit = (item: AiKeyItem) => {\n    setEditingId(item.id);\n    setForm({ provider: item.provider, label: item.label, apiKeyPlain: '', active: item.active, priority: item.priority });\n    setIsDialogOpen(true);\n  };\n\n  const handleSave = async () => {\n    const payload: any = { ...form, priority: Number(form.priority) || 0 };\n    if (!payload.provider || !payload.label) {\n      toast.error('Please fill in provider and label.');\n      return;\n    }\n    try {\n      if (editingId) {\n        const res = await fetch(`/api/admin/ai/keys/${editingId}`, {\n          method: 'PUT',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload),\n          cache: 'no-store',\n        });\n        if (!res.ok) {\n          const err = await res.json().catch(() => ({}));\n          if (res.status === 409) {\n            toast.error(err?.error || 'This API key already exists for the selected provider.');\n          } else {\n            toast.error(err?.error || 'Failed to update API key');\n          }\n          return;\n        }\n        toast.success('API key updated');\n        const data = await res.json().catch(() => ({} as any));\n        const updated: AiKeyItem | undefined = data?.key;\n        if (updated) {\n          setItems((prev) => prev.map((k) => (k.id === updated.id ? { ...k, ...updated } : k)));\n        }\n      } else {\n        if (!payload.apiKeyPlain) {\n          toast.error('API key is required to create');\n          return;\n        }\n        const res = await fetch('/api/admin/ai/keys', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload),\n          cache: 'no-store',\n        });\n        if (!res.ok) {\n          const err = await res.json().catch(() => ({}));\n          if (res.status === 409) {\n            toast.error(err?.error || 'This API key already exists for the selected provider.');\n          } else {\n            toast.error(err?.error || 'Failed to create API key');\n          }\n          return;\n        }\n        toast.success('API key created');\n        const data = await res.json().catch(() => ({} as any));\n        const created: AiKeyItem | undefined = data?.key;\n        if (created) {\n          setItems((prev) => [created, ...prev]);\n        }\n      }\n      setIsDialogOpen(false);\n      setForm(emptyForm);\n      // small delay avoids flicker with DB commit\n      setTimeout(() => {\n        load();\n      }, 150);\n    } catch (e) {\n      // handled by toast\n    }\n  };\n\n  const confirmDelete = (id: number) => {\n    setDeleteId(id);\n    setIsDeleteOpen(true);\n  };\n\n  const doDelete = async () => {\n    if (!deleteId) return;\n    const id = deleteId;\n    // optimistic remove\n    const prev = items;\n    setItems((curr) => curr.filter((k) => k.id !== id));\n    setIsDeleteOpen(false);\n    setDeleteId(null);\n    try {\n      const res = await fetch(`/api/admin/ai/keys/${id}`, { method: 'DELETE', cache: 'no-store' });\n      if (!res.ok) {\n        // revert on failure\n        setItems(prev);\n        const err = await res.json().catch(() => ({}));\n        toast.error(err?.error || 'Failed to delete API key');\n        return;\n      }\n      toast.success('API key deleted');\n      // background refresh to sync counters/order\n      setTimeout(() => {\n        load();\n      }, 100);\n    } catch (e) {\n      setItems(prev);\n      toast.error('Failed to delete API key');\n    }\n  };\n\n  const fmt = (d: string | null) => (d ? new Date(d).toLocaleString() : '—');\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-48\">\n        <Loader2 className=\"h-6 w-6 animate-spin text-blue-500\" />\n        <span className=\"ml-2 text-gray-600\">Loading...</span>\n      </div>\n    );\n  }\n\n  return (\n    <RoleGuard requiredRole=\"admin\">\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"text-sm text-gray-500\">Keys are stored encrypted at rest. Rotate and toggle as needed.</div>\n          <Button className=\"bg-indigo-600 hover:bg-indigo-700 text-white\" onClick={openCreate}>\n            <PlusCircle className=\"mr-2 h-4 w-4\" /> Create New Key\n          </Button>\n        </div>\n        <Table>\n          <TableHeader className=\"bg-gray-50\">\n            <TableRow>\n              <TableHead className=\"w-[120px]\">Provider</TableHead>\n              <TableHead className=\"w-[240px]\">Label</TableHead>\n              <TableHead className=\"w-[100px]\">Active</TableHead>\n              <TableHead className=\"w-[100px]\">Priority</TableHead>\n              <TableHead className=\"w-[180px]\">Last Used</TableHead>\n              <TableHead className=\"w-[140px]\">Success/Error</TableHead>\n              <TableHead className=\"w-[180px]\">Updated</TableHead>\n              <TableHead className=\"w-[140px] text-right\">Actions</TableHead>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {items.map((k) => (\n              <TableRow key={k.id}>\n                <TableCell className=\"font-medium capitalize\">{k.provider}</TableCell>\n                <TableCell>{k.label}</TableCell>\n                <TableCell>\n                  <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k.active ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>\n                    {k.active ? 'Yes' : 'No'}\n                  </span>\n                </TableCell>\n                <TableCell>{k.priority}</TableCell>\n                <TableCell>{fmt(k.last_used_at)}</TableCell>\n                <TableCell>\n                  <span className=\"text-xs\">{k.success_count} / {k.error_count}</span>\n                </TableCell>\n                <TableCell>{fmt(k.updated_at)}</TableCell>\n                <TableCell className=\"text-right\">\n                  <Button variant=\"ghost\" size=\"sm\" className=\"mr-2\" onClick={() => openEdit(k)} title=\"Edit\">\n                    <Pencil className=\"h-5 w-5\" />\n                  </Button>\n                  <Button variant=\"ghost\" size=\"sm\" className=\"text-red-600 hover:text-red-900\" onClick={() => confirmDelete(k.id)} title=\"Delete\">\n                    <Trash2 className=\"h-5 w-5\" />\n                  </Button>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n        {items.length === 0 && (\n          <p className=\"py-4 text-center text-sm text-gray-500\">No API keys found. Click \"Create New Key\" to add one.</p>\n        )}\n      </div>\n\n      <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>{title}</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"provider\">Provider</Label>\n                <Input\n                  id=\"provider\"\n                  placeholder=\"gemini\"\n                  value={form.provider}\n                  onChange={(e) => setForm((f) => ({ ...f, provider: e.target.value.toLowerCase() }))}\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"label\">Label</Label>\n                <Input\n                  id=\"label\"\n                  placeholder=\"Primary Key\"\n                  value={form.label}\n                  onChange={(e) => setForm((f) => ({ ...f, label: e.target.value }))}\n                />\n              </div>\n            </div>\n            <div>\n              <Label htmlFor=\"apiKeyPlain\">API Key {editingId ? '(leave blank to keep unchanged)' : ''}</Label>\n              <Input\n                id=\"apiKeyPlain\"\n                placeholder={editingId ? '••••••••••••' : 'paste key here'}\n                value={form.apiKeyPlain}\n                onChange={(e) => setForm((f) => ({ ...f, apiKeyPlain: e.target.value }))}\n              />\n            </div>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"priority\">Priority</Label>\n                <Input\n                  id=\"priority\"\n                  type=\"number\"\n                  value={form.priority}\n                  onChange={(e) => setForm((f) => ({ ...f, priority: Number(e.target.value) }))}\n                />\n              </div>\n              <div className=\"flex items-end\">\n                <label className=\"inline-flex items-center space-x-2\">\n                  <input\n                    type=\"checkbox\"\n                    className=\"h-4 w-4 rounded border-gray-300\"\n                    checked={form.active}\n                    onChange={(e) => setForm((f) => ({ ...f, active: e.target.checked }))}\n                  />\n                  <span className=\"text-sm text-gray-700\">Active</span>\n                </label>\n              </div>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setIsDialogOpen(false)}>Cancel</Button>\n            <Button className=\"bg-indigo-600 hover:bg-indigo-700 text-white\" onClick={handleSave}>\n              {editingId ? 'Update Key' : 'Create Key'}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      <AlertDialog open={isDeleteOpen} onOpenChange={setIsDeleteOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Delete API key?</AlertDialogTitle>\n            <AlertDialogDescription>\n              This action cannot be undone. This will permanently delete the selected API key.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel onClick={() => setDeleteId(null)}>Cancel</AlertDialogCancel>\n            <AlertDialogAction onClick={doDelete}>Delete</AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </RoleGuard>\n  );\n}\n"],"names":[],"mappings":"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","ignoreList":[0,1,3,4,7]}