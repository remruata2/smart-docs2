module.exports=[767552,a=>{"use strict";let b=(0,a.i(170106).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);a.s(["ChevronUp",()=>b],767552)},400210,a=>{"use strict";let b=(0,a.i(170106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],400210)},787654,a=>{"use strict";let b=(0,a.i(170106).default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);a.s(["RotateCcw",()=>b],787654)},180834,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(699570),e=a.i(866718),f=a.i(599209),g=a.i(400210),h=a.i(587532),i=a.i(633508),j=a.i(767552),k=a.i(170106);let l=(0,k.default)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),m=(0,k.default)("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);var n=a.i(787654);let o=(0,k.default)("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),p=(0,k.default)("minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);function q({pages:a}){let[k,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(1),[x,y]=(0,c.useState)(!1),z=(0,c.useRef)(null),A=(0,c.useRef)(new Map),B=[...a].sort((a,b)=>a.page_number-b.page_number),C=(()=>{if(!k.trim())return[];let a=k.toLowerCase(),b=[];return B.forEach((c,d)=>{if(!c.text_items)return;let e=0,f="";c.text_items.forEach(b=>{let c=b.text.toLowerCase(),d=(c.match(RegExp(a,"g"))||[]).length;if(d>0&&(e+=d,!f)){let d=c.indexOf(a),e=Math.max(0,d-40),g=Math.min(b.text.length,d+a.length+40);f=b.text.substring(e,g)}}),e>0&&b.push({pageIndex:d,pageNumber:c.page_number,snippet:f,matchCount:e})}),b})();return((0,c.useEffect)(()=>{let a=()=>{z.current&&u(z.current.scrollTop>300)},b=z.current;return b?.addEventListener("scroll",a),()=>b?.removeEventListener("scroll",a)},[]),a&&0!==a.length)?(0,b.jsxs)("div",{ref:z,className:`relative bg-gray-100 dark:bg-black overflow-y-auto ${x?"h-screen w-screen":"h-[85vh]"}`,children:[(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>window.history.back(),className:"fixed top-4 left-4 z-50 h-10 w-10 rounded-full bg-black/60 hover:bg-black/80 text-white backdrop-blur-sm",children:(0,b.jsx)(g.ArrowLeft,{className:"h-5 w-5"})}),(0,b.jsx)("div",{className:"flex items-start justify-center p-4",children:(0,b.jsx)("div",{className:"transition-transform duration-200 ease-out origin-top",style:{transform:`scale(${v})`,transformOrigin:"top center"},children:(0,b.jsx)("div",{className:"max-w-4xl mx-auto space-y-2",children:B.map((a,c)=>(0,b.jsx)("div",{ref:a=>{a&&A.current.set(c,a)},children:(0,b.jsx)("div",{className:"relative bg-white shadow-lg",children:a.image_url?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("img",{src:a.image_url,alt:`Page ${a.page_number}`,className:"w-full h-auto select-none",draggable:!1}),a.text_items&&(0,b.jsx)("div",{className:"absolute inset-0 w-full h-full select-text pointer-events-none",children:a.text_items.map((a,c)=>(0,b.jsx)("span",{style:{position:"absolute",left:`${100*a.bbox[0]}%`,top:`${100*a.bbox[1]}%`,width:`${100*a.bbox[2]}%`,height:`${100*a.bbox[3]}%`,fontSize:"1.8cqw",lineHeight:1,color:"transparent",cursor:"text",whiteSpace:"pre-wrap",overflow:"hidden",pointerEvents:"auto"},className:"selection:bg-blue-400/40 selection:text-transparent",children:a.text},c))})]}):(0,b.jsx)("div",{className:"flex items-center justify-center h-96 bg-muted border-2 border-dashed",children:(0,b.jsxs)("div",{className:"text-center p-6",children:[(0,b.jsx)("p",{className:"text-muted-foreground font-medium",children:"Image not available"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground/70 mt-1",children:["Page ",a.page_number]})]})})})},a.id))})})}),(0,b.jsxs)("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 flex items-center gap-2 bg-black/60 backdrop-blur-md p-2 rounded-full shadow-xl z-50",children:[(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white hover:bg-white/20 rounded-full",onClick:()=>{w(a=>Math.max(a-.25,.5))},children:(0,b.jsx)(m,{className:"h-4 w-4"})}),(0,b.jsxs)("span",{className:"text-white text-xs w-12 text-center",children:[Math.round(100*v),"%"]}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white hover:bg-white/20 rounded-full",onClick:()=>{w(a=>Math.min(a+.25,3))},children:(0,b.jsx)(l,{className:"h-4 w-4"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white hover:bg-white/20 rounded-full",onClick:()=>{w(1)},children:(0,b.jsx)(n.RotateCcw,{className:"h-4 w-4"})}),(0,b.jsx)("div",{className:"w-px h-4 bg-white/20 mx-1"}),(0,b.jsxs)(f.Popover,{open:r,onOpenChange:s,children:[(0,b.jsx)(f.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white hover:bg-white/20 rounded-full relative",children:[(0,b.jsx)(h.Search,{className:"h-4 w-4"}),C.length>0&&(0,b.jsx)("span",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:C.length})]})}),(0,b.jsxs)(f.PopoverContent,{className:"w-80 p-0",align:"end",children:[(0,b.jsx)("div",{className:"p-3 border-b",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(h.Search,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(e.Input,{placeholder:"Search in this chapter...",value:k,onChange:a=>q(a.target.value),className:"pl-8 pr-8"}),k&&(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"absolute right-1 top-1 h-6 w-6",onClick:()=>{q("")},children:(0,b.jsx)(i.X,{className:"h-3 w-3"})})]})}),(0,b.jsxs)("div",{className:"max-h-80 overflow-y-auto",children:[0===C.length&&k&&(0,b.jsx)("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"No results found"}),0===C.length&&!k&&(0,b.jsx)("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Search across all pages"}),C.map((a,c)=>(0,b.jsxs)("button",{onClick:()=>{let b;(b=A.current.get(a.pageIndex))&&b.scrollIntoView({behavior:"smooth",block:"start"}),s(!1)},className:"w-full text-left p-3 hover:bg-muted/50 border-b last:border-b-0 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,b.jsxs)("span",{className:"text-sm font-medium",children:["Page ",a.pageNumber]}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:[a.matchCount," ",1===a.matchCount?"match":"matches"]})]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground line-clamp-2",children:["...",a.snippet,"..."]})]},c))]})]})]}),(0,b.jsx)("div",{className:"w-px h-4 bg-white/20 mx-1"}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white hover:bg-white/20 rounded-full",onClick:()=>{document.fullscreenElement?(document.exitFullscreen(),y(!1)):(z.current?.requestFullscreen(),y(!0))},children:x?(0,b.jsx)(p,{className:"h-4 w-4"}):(0,b.jsx)(o,{className:"h-4 w-4"})})]}),t&&(0,b.jsx)(d.Button,{onClick:()=>{z.current?.scrollTo({top:0,behavior:"smooth"})},className:"fixed bottom-20 right-6 z-50 h-12 w-12 rounded-full shadow-2xl bg-indigo-600 hover:bg-indigo-700 text-white",size:"icon",children:(0,b.jsx)(j.ChevronUp,{className:"h-5 w-5"})})]}):(0,b.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No pages available for this chapter."})}a.s(["ChapterPagesViewer",()=>q],180834)}];

//# sourceMappingURL=_6ceddd77._.js.map