{"version":3,"sources":["../../../../src/components/admin/FilterSelect.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/admin/programs/program-form.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/admin/programs/program-status-toggle.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/admin/programs/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/admin/FilterSelect.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/admin/FilterSelect.tsx\",\n    \"default\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/programs/program-form.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/programs/program-form.tsx\",\n    \"default\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/programs/program-status-toggle.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/programs/program-status-toggle.tsx\",\n    \"default\",\n);\n","import { prisma } from \"@/lib/prisma\";\nimport { redirect } from \"next/navigation\";\nimport Link from \"next/link\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth-options\";\nimport { isAdmin } from \"@/lib/auth\";\nimport ProgramForm from \"./program-form\";\nimport ProgramStatusToggle from \"./program-status-toggle\";\nimport FilterSelect from \"@/components/admin/FilterSelect\";\n\nexport default async function ProgramsPage({\n    searchParams,\n}: {\n    searchParams: Promise<{ boardId?: string; institutionId?: string }>;\n}) {\n    const session = await getServerSession(authOptions);\n    if (!session?.user || !isAdmin((session.user as any).role)) {\n        redirect(\"/\");\n    }\n\n    const { boardId, institutionId } = await searchParams;\n\n    const where: any = {};\n    if (boardId) {\n        where.board_id = boardId;\n    }\n    if (institutionId) {\n        where.institution_id = BigInt(institutionId);\n    }\n\n    const programs = await prisma.program.findMany({\n        where,\n        include: {\n            board: true,\n            institution: true,\n            _count: {\n                select: { subjects: true, profiles: true },\n            },\n        },\n        orderBy: { created_at: \"desc\" },\n    });\n\n    const boards = await prisma.board.findMany({\n        where: { is_active: true },\n        orderBy: { name: \"asc\" },\n    });\n\n    const institutions = await prisma.institution.findMany({\n        where: { is_active: true },\n        orderBy: { name: \"asc\" },\n    });\n\n    return (\n        <div className=\"container mx-auto py-10\">\n            <div className=\"flex justify-between items-center mb-8\">\n                <h1 className=\"text-3xl font-bold\">Programs Management</h1>\n            </div>\n\n            {/* Add Program Form */}\n            <ProgramForm boards={boards} institutions={institutions} />\n\n            {/* Filters */}\n            <div className=\"bg-white p-4 rounded-lg shadow mb-8 flex gap-4\">\n                <FilterSelect\n                    name=\"boardId\"\n                    placeholder=\"All Boards\"\n                    options={boards.map(b => ({ value: b.id, label: b.name }))}\n                />\n                <FilterSelect\n                    name=\"institutionId\"\n                    placeholder=\"All Institutions\"\n                    options={institutions.map(i => ({ value: i.id.toString(), label: i.name }))}\n                />\n            </div>\n\n            {/* Programs List */}\n            <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\n                <ul className=\"divide-y divide-gray-200\">\n                    {programs.map((program) => (\n                        <li key={program.id}>\n                            <Link\n                                href={`/admin/subjects?programId=${program.id}`}\n                                className=\"block hover:bg-gray-50 transition\"\n                            >\n                                <div className=\"px-4 py-4 sm:px-6\">\n                                    <div className=\"flex items-center justify-between\">\n                                        <div className=\"flex items-center\">\n                                            <span className=\"text-sm font-medium text-indigo-600 truncate\">\n                                                {program.name}\n                                            </span>\n                                            {program.level && (\n                                                <span className=\"ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-purple-800\">\n                                                    {program.level}\n                                                </span>\n                                            )}\n                                            <span className={`ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${program.is_active ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>\n                                                {program.is_active ? 'Active' : 'Inactive'}\n                                            </span>\n                                        </div>\n                                        <div className=\"ml-2 flex-shrink-0 flex\">\n                                            <ProgramStatusToggle programId={program.id} isActive={program.is_active} />\n                                        </div>\n                                    </div>\n                                </div>\n                                <div className=\"mt-2 sm:flex sm:justify-between\">\n                                    <div className=\"sm:flex\">\n                                        <p className=\"flex items-center text-sm text-gray-500 mr-6\">\n                                            Board: {program.board.name}\n                                        </p>\n                                        {program.institution && (\n                                            <p className=\"flex items-center text-sm text-gray-500 mr-6\">\n                                                Institution: {program.institution.name}\n                                            </p>\n                                        )}\n                                        {!program.institution && (\n                                            <p className=\"flex items-center text-sm text-gray-500 mr-6 italic\">\n                                                Board-level program\n                                            </p>\n                                        )}\n                                    </div>\n                                    <div className=\"mt-2 flex items-center text-sm text-gray-500 sm:mt-0\">\n                                        <p className=\"mr-4\">Subjects: {program._count.subjects}</p>\n                                        <p>Students: {program._count.profiles}</p>\n                                    </div>\n                                </div>\n                            </Link>\n                        </li>\n                    ))}\n                    {programs.length === 0 && (\n                        <li className=\"px-4 py-4 text-center text-gray-500\">No programs found.</li>\n                    )}\n                </ul>\n            </div>\n        </div >\n    );\n}\n"],"names":[],"mappings":"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","ignoreList":[0,1,2]}