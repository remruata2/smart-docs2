{"version":3,"sources":["../../../../node_modules/next/src/build/webpack/loaders/next-flight-loader/server-reference.ts","../../../../node_modules/next/src/build/webpack/loaders/next-flight-loader/action-validate.ts","../../../../src/lib/db.ts","../../../../src/lib/prisma.ts","../../../../src/app/app/chat/actions.ts"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nexport { registerServerReference } from 'react-server-dom-webpack/server'\n","// This function ensures that all the exported values are valid server actions,\n// during the runtime. By definition all actions are required to be async\n// functions, but here we can only check that they are functions.\nexport function ensureServerEntryExports(actions: any[]) {\n  for (let i = 0; i < actions.length; i++) {\n    const action = actions[i]\n    if (typeof action !== 'function') {\n      throw new Error(\n        `A \"use server\" file can only export async functions, found ${typeof action}.\\nRead more: https://nextjs.org/docs/messages/invalid-use-server-value`\n      )\n    }\n  }\n}\n","import { PrismaClient } from '../generated/prisma';\n\n// Define the global type for PrismaClient\ndeclare global {\n  var prisma: PrismaClient | undefined;\n}\n\n// PrismaClient is attached to the `global` object in development to prevent\n// exhausting your database connection limit.\nexport const db = global.prisma || new PrismaClient();\n\n// In development, keep the connection alive between hot reloads\nif (process.env.NODE_ENV !== 'production') global.prisma = db;\n","import { db } from \"./db\";\n\nexport const prisma = db;\nexport default prisma;\n","\"use server\";\n\nimport { getGeminiClient, getActiveModelNames, recordKeyUsage } from \"@/lib/ai-key-store\";\nimport { prisma } from \"@/lib/prisma\";\n\nexport async function translateContent(text: string, targetLanguage: string) {\n    try {\n        const { client, keyId } = await getGeminiClient();\n\n        const modelName = \"gemini-2.5-flash\";\n        console.log(\"Translation using model:\", modelName);\n\n        const model = client.getGenerativeModel({ model: modelName });\n\n        const prompt = `You are a professional translator. Translate the following educational text into ${targetLanguage}.\n    \n    CRITICAL INSTRUCTIONS:\n    1. Maintain ALL Markdown formatting exactly as is (headers, bold, italics, lists, tables).\n    2. Do not add any conversational filler (e.g., \"Here is the translation\", \"Sure\").\n    3. Only output the translated text.\n    4. Ensure technical terms are translated accurately but keep them in English if they are commonly used as such in the target language context (especially for Mizo/Hindi).\n    5. Preserve double newlines for paragraph breaks.\n\n    TEXT TO TRANSLATE:\n    ${text}`;\n\n        const result = await model.generateContent(prompt);\n        const response = result.response;\n        const translatedText = response.text();\n\n        if (keyId) {\n            await recordKeyUsage(keyId, true);\n        }\n\n        return { success: true, translatedText };\n    } catch (error) {\n        console.error(\"Translation error:\", error);\n        return text; // Fallback to original text\n    }\n}\n"],"names":["registerServerReference","ensureServerEntryExports","actions","i","length","action","Error"],"mappings":"8CAAoD,OAAA,cAAA,CAAA,EAAA,aAAA,oCAC3CA,0BAAAA,qCAAAA,EAAAA,uBAAuB,YAAQ,CAAA,CAAA,IAAA,mCCEjC,SAASC,EAAyBC,CAAc,EACrD,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAQE,MAAM,CAAED,IAAK,CACvC,IAAME,EAASH,CAAO,CAACC,EAAE,CACzB,GAAsB,YAAlB,AAA8B,OAAvBE,EACT,MAAM,OAAA,cAEL,CAFK,AAAIC,MACR,CAAC,2DAA2D,EAAE,OAAOD,EAAO;AAAA,oEAAuE,CAAC,EADhJ,oBAAA,OAAA,mBAAA,eAAA,EAEN,EAEJ,CACF,0EATgBJ,2BAAAA,qCAAAA,y8BCHhB,IAAA,EAAA,EAAA,CAAA,CAAA,QASO,IAAM,EAAK,OAAO,MAAM,EAAI,IAAI,EAAA,YAAY,0CCP5C,IAAM,EAFb,AAEsB,EAFtB,CAAA,CAAA,QAEsB,EAAE,kBACT,4DCDf,EAAA,EAAA,CAAA,CAAA,QAGO,eAAe,EAAiB,CAAY,CAAE,CAAsB,EACvE,GAAI,CACA,GAAM,QAAE,CAAM,OAAE,CAAK,CAAE,CAAG,MAAM,CAAA,EAAA,EAAA,eAAA,AAAe,IAEzC,EAAY,mBAClB,QAAQ,GAAG,CAAC,2BAA4B,GAExC,IAAM,EAAQ,EAAO,kBAAkB,CAAC,CAAE,MAAO,CAAU,GAErD,EAAS,CAAC,iFAAiF,EAAE,EAAe;;;;;;;;;;IAUtH,EAAE,EAAA,CAAM,CAIE,EADW,AACM,CAFR,MAAM,EAAM,eAAe,CAAC,EAAA,EACnB,QAAQ,CACA,IAAI,GAMpC,OAJI,GACA,IADO,EACD,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,GAAO,GAGzB,CAAE,SAAS,iBAAM,CAAe,CAC3C,CAAE,MAAO,EAAO,CAEZ,OADA,QAAQ,KAAK,CAAC,qBAAsB,GAC7B,CACX,CACJ,IAFqB,4BAA4B,WAhC3B,IAAA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA","ignoreList":[0,1]}