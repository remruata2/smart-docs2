{"version":3,"sources":["../../../../node_modules/next/src/build/webpack/loaders/next-flight-loader/action-client-wrapper.ts","../../../../src/components/admin/FilterSelect.tsx","../../../../src/app/admin/institutions/institution-form.tsx","../../../../src/app/actions/data%3A279425%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3Afe8b2e%20%3Ctext/javascript%3E","../../../../src/app/admin/institutions/institution-status-toggle.tsx"],"sourcesContent":["// This file must be bundled in the app's client layer, it shouldn't be directly\n// imported by the server.\n\nexport { callServer } from 'next/dist/client/app-call-server'\nexport { findSourceMapURL } from 'next/dist/client/app-find-source-map-url'\n\n// A noop wrapper to let the Flight client create the server reference.\n// See also: https://github.com/facebook/react/pull/26632\n// eslint-disable-next-line import/no-extraneous-dependencies\nexport { createServerReference } from 'react-server-dom-webpack/client'\n","'use client';\n\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { useCallback } from \"react\";\n\ninterface FilterSelectProps {\n    name: string;\n    options: { value: string; label: string }[];\n    placeholder: string;\n    className?: string;\n}\n\nexport default function FilterSelect({ name, options, placeholder, className = \"\" }: FilterSelectProps) {\n    const router = useRouter();\n    const searchParams = useSearchParams();\n    const currentValue = searchParams.get(name) || \"\";\n\n    const handleChange = useCallback((e: React.ChangeEvent<HTMLSelectElement>) => {\n        const value = e.target.value;\n        const params = new URLSearchParams(searchParams.toString());\n\n        if (value) {\n            params.set(name, value);\n        } else {\n            params.delete(name);\n        }\n\n        router.push(`?${params.toString()}`);\n    }, [name, router, searchParams]);\n\n    return (\n        <select\n            name={name}\n            value={currentValue}\n            onChange={handleChange}\n            className={`block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm border p-2 ${className}`}\n        >\n            <option value=\"\">{placeholder}</option>\n            {options.map(opt => (\n                <option key={opt.value} value={opt.value}>{opt.label}</option>\n            ))}\n        </select>\n    );\n}\n","'use client';\n\nimport { useState } from \"react\";\nimport { createInstitution } from \"@/app/actions/admin-extended\";\nimport { useRouter } from \"next/navigation\";\n\ninterface Board {\n    id: string;\n    name: string;\n}\n\nexport default function InstitutionForm({ boards }: { boards: Board[] }) {\n    const router = useRouter();\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n\n    async function handleSubmit(formData: FormData) {\n        setIsLoading(true);\n        setError(null);\n\n        try {\n            await createInstitution(formData);\n            const form = document.getElementById(\"create-institution-form\") as HTMLFormElement;\n            form?.reset();\n        } catch (err: any) {\n            setError(err.message || \"Failed to create institution\");\n        } finally {\n            setIsLoading(false);\n        }\n    }\n\n    return (\n        <div className=\"bg-white p-6 rounded-lg shadow mb-8\">\n            <h2 className=\"text-xl font-semibold mb-4\">Add New Institution</h2>\n            {error && (\n                <div className=\"mb-4 bg-red-50 border-l-4 border-red-400 p-4\">\n                    <p className=\"text-sm text-red-700\">{error}</p>\n                </div>\n            )}\n            <form id=\"create-institution-form\" action={handleSubmit} className=\"grid grid-cols-1 md:grid-cols-5 gap-4 items-end\">\n                <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">Name</label>\n                    <input type=\"text\" name=\"name\" required className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm border p-2\" placeholder=\"Delhi Public School\" />\n                </div>\n                <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">Type</label>\n                    <select name=\"type\" required className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm border p-2\">\n                        <option value=\"\">Select Type</option>\n                        <option value=\"school\">School</option>\n                        <option value=\"college\">College</option>\n                        <option value=\"university\">University</option>\n                        <option value=\"coaching_center\">Coaching Center</option>\n                    </select>\n                </div>\n                <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">Board</label>\n                    <select name=\"boardId\" required className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm border p-2\">\n                        <option value=\"\">Select Board</option>\n                        {boards.map(b => (\n                            <option key={b.id} value={b.id}>{b.name}</option>\n                        ))}\n                    </select>\n                </div>\n                <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">District (Optional)</label>\n                    <input type=\"text\" name=\"district\" className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm border p-2\" />\n                </div>\n                <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">State (Optional)</label>\n                    <input type=\"text\" name=\"state\" className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm border p-2\" />\n                </div>\n                <button type=\"submit\" disabled={isLoading} className=\"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 disabled:opacity-50\">\n                    {isLoading ? \"Adding...\" : \"Add Institution\"}\n                </button>\n            </form>\n        </div>\n    );\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"403e25c404ba4e79c19ca285875430544f7f3007e9\":\"createInstitution\"},\"src/app/actions/admin-extended.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var createInstitution=/*#__PURE__*/createServerReference(\"403e25c404ba4e79c19ca285875430544f7f3007e9\",callServer,void 0,findSourceMapURL,\"createInstitution\");","/* __next_internal_action_entry_do_not_use__ [{\"602cb35c73071a1e4080c12398c9011ead3611140b\":\"updateInstitutionStatus\"},\"src/app/actions/admin-extended.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var updateInstitutionStatus=/*#__PURE__*/createServerReference(\"602cb35c73071a1e4080c12398c9011ead3611140b\",callServer,void 0,findSourceMapURL,\"updateInstitutionStatus\");","'use client';\n\nimport { updateInstitutionStatus } from \"@/app/actions/admin-extended\";\nimport { useState } from \"react\";\n\nexport default function InstitutionStatusToggle({\n    institutionId,\n    isActive\n}: {\n    institutionId: bigint;\n    isActive: boolean;\n}) {\n    const [isLoading, setIsLoading] = useState(false);\n\n    async function handleToggle(e: React.MouseEvent) {\n        e.preventDefault(); // Prevent navigation\n        e.stopPropagation(); // Stop event bubbling\n        setIsLoading(true);\n        try {\n            await updateInstitutionStatus(institutionId, !isActive);\n        } catch (error) {\n            console.error(\"Failed to toggle status\", error);\n        } finally {\n            setIsLoading(false);\n        }\n    }\n\n    return (\n        <button\n            onClick={handleToggle}\n            disabled={isLoading}\n            className=\"text-sm text-gray-500 hover:text-gray-700 disabled:opacity-50\"\n        >\n            {isLoading ? \"Updating...\" : (isActive ? 'Deactivate' : 'Activate')}\n        </button>\n    );\n}\n"],"names":["callServer","createServerReference","findSourceMapURL"],"mappings":"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","ignoreList":[0]}