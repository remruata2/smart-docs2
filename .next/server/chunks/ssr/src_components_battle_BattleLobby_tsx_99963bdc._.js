module.exports=[905826,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(699570),f=a.i(866718),g=a.i(591119),h=a.i(580701),i=a.i(875083),j=a.i(823292),k=a.i(419221),l=a.i(660246);let m=(0,a.i(170106).default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var n=a.i(596221),o=a.i(426694),p=a.i(845630),q=a.i(868435);function r(){let a=(0,d.useRouter)(),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)("");(0,c.useEffect)(()=>{(0,o.getSubjectsForUserProgram)().then(a=>{a&&a.subjects&&w(a.subjects)}).catch(console.error)},[]),(0,c.useEffect)(()=>{z?(0,p.getChaptersForSubject)(parseInt(z)).then(a=>{a&&a.chapters&&(y(a.chapters),C(""))}).catch(console.error):(y([]),C(""))},[z]);let D=async()=>{if(!z||!B)return void j.toast.error("Please select a subject and chapter");u(!0);try{j.toast.info("Preparing battle...");let b=await (0,q.generateQuizAction)(parseInt(z),parseInt(B),"medium",5,["MCQ"],!1),c=await fetch("/api/battle/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({quizId:b.id})}),d=await c.json();if(!c.ok)throw Error(d.error);j.toast.success("Battle created! Waiting for opponent..."),a.push(`/app/practice/battle/${d.battle.id}`)}catch(a){console.error(a),a.message?.includes("Not enough questions")?j.toast.error("Not enough questions available for this chapter. Please select a different chapter or contact admin."):j.toast.error(a.message||"Failed to create battle")}finally{u(!1)}},E=async()=>{if(6!==r.length)return void j.toast.error("Please enter a valid 6-digit code");u(!0);try{let b=await fetch("/api/battle/join",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:r})}),c=await b.json();if(!b.ok)throw Error(c.error);j.toast.success("Joined battle!"),a.push(`/app/practice/battle/${c.battle.id}`)}catch(a){j.toast.error(a.message||"Failed to join battle")}finally{u(!1)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-slate-950 text-slate-100 font-sans selection:bg-purple-500/30 relative overflow-hidden",children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-indigo-900/40 via-slate-950 to-slate-950 pointer-events-none"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-[url('/grid.svg')] bg-center [mask-image:linear-gradient(180deg,white,rgba(255,255,255,0))] opacity-20 pointer-events-none"}),(0,b.jsxs)("div",{className:"container max-w-5xl mx-auto py-4 md:py-12 px-4 relative z-10",children:[(0,b.jsxs)("div",{className:"text-center mb-4 md:mb-16 space-y-2 md:space-y-6 animate-in slide-in-from-top-4 fade-in duration-700",children:[(0,b.jsx)("div",{className:"inline-flex items-center justify-center p-2 md:p-4 bg-indigo-500/10 rounded-3xl mb-2 md:mb-4 border border-indigo-500/20 shadow-[0_0_30px_rgba(99,102,241,0.2)]",children:(0,b.jsx)(k.Swords,{className:"h-6 w-6 md:h-12 md:w-12 text-indigo-400"})}),(0,b.jsx)("h1",{className:"text-2xl md:text-5xl lg:text-6xl font-black tracking-tight bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 bg-clip-text text-transparent drop-shadow-sm",children:"BATTLE ARENA"}),(0,b.jsx)("p",{className:"text-sm md:text-xl text-slate-400 max-w-2xl mx-auto leading-relaxed px-4",children:"Challenge your friends to a realtime quiz battle. Prove your mastery and climb the leaderboard!"})]}),(0,b.jsx)("div",{className:"md:hidden",children:(0,b.jsxs)(i.Tabs,{defaultValue:"create",className:"w-full",children:[(0,b.jsxs)(i.TabsList,{className:"grid w-full grid-cols-2 bg-slate-900/50 p-1 mb-6 h-14 rounded-2xl border border-slate-800",children:[(0,b.jsx)(i.TabsTrigger,{value:"create",className:"rounded-xl text-base font-bold text-slate-200 data-[state=active]:bg-gradient-to-r data-[state=active]:from-yellow-500 data-[state=active]:to-orange-600 data-[state=active]:text-white h-full transition-all",children:"Create"}),(0,b.jsx)(i.TabsTrigger,{value:"join",className:"rounded-xl text-base font-bold text-slate-200 data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-cyan-600 data-[state=active]:text-white h-full transition-all",children:"Join"})]}),(0,b.jsx)(i.TabsContent,{value:"create",className:"mt-0 focus-visible:ring-0",children:(0,b.jsxs)("div",{className:"group relative",children:[(0,b.jsx)("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-yellow-500 to-orange-600 rounded-3xl blur opacity-20 group-hover:opacity-50 transition duration-500"}),(0,b.jsxs)(g.Card,{className:"relative h-full bg-slate-900/80 border-slate-800 hover:border-yellow-500/50 transition-all duration-300 backdrop-blur-xl",children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsxs)(g.CardTitle,{className:"flex items-center gap-3 text-xl text-white",children:[(0,b.jsx)("div",{className:"p-2 bg-yellow-500/10 rounded-xl",children:(0,b.jsx)(m,{className:"h-5 w-5 text-yellow-500"})}),"Create Battle"]}),(0,b.jsx)(g.CardDescription,{className:"text-slate-400",children:"Start a new match and invite friends"})]}),(0,b.jsxs)(g.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-300",children:"Subject"}),(0,b.jsxs)(h.Select,{value:z,onValueChange:A,children:[(0,b.jsx)(h.SelectTrigger,{className:"bg-slate-950/50 border-slate-700 text-slate-100 h-12",children:(0,b.jsx)(h.SelectValue,{placeholder:"Select Subject"})}),(0,b.jsx)(h.SelectContent,{className:"bg-slate-900 border-slate-800 text-slate-100",children:v.map(a=>(0,b.jsx)(h.SelectItem,{value:a.id.toString(),className:"focus:bg-slate-800 focus:text-white",children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-300",children:"Chapter"}),(0,b.jsxs)(h.Select,{value:B,onValueChange:C,disabled:!z||0===x.length,children:[(0,b.jsx)(h.SelectTrigger,{className:"bg-slate-950/50 border-slate-700 text-slate-100 h-12 disabled:opacity-50",children:(0,b.jsx)(h.SelectValue,{placeholder:"Select Chapter"})}),(0,b.jsx)(h.SelectContent,{className:"bg-slate-900 border-slate-800 text-slate-100",children:x.map(a=>(0,b.jsxs)(h.SelectItem,{value:a.id.toString(),className:"focus:bg-slate-800 focus:text-white",children:[a.chapter_number?`Ch ${a.chapter_number}: `:"",a.title]},a.id))})]})]}),(0,b.jsx)(e.Button,{className:"w-full h-14 text-lg font-bold bg-gradient-to-r from-yellow-500 to-orange-600 hover:from-yellow-400 hover:to-orange-500 text-white shadow-lg shadow-orange-500/20 transition-all hover:scale-[1.02] active:scale-[0.98]",onClick:D,disabled:t||!z||!B,children:t?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.Loader2,{className:"mr-2 h-5 w-5 animate-spin"}),"Creating..."]}):"Create Battle"})]})]})]})}),(0,b.jsx)(i.TabsContent,{value:"join",className:"mt-0 focus-visible:ring-0",children:(0,b.jsxs)("div",{className:"group relative",children:[(0,b.jsx)("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-blue-500 to-cyan-600 rounded-3xl blur opacity-20 group-hover:opacity-50 transition duration-500"}),(0,b.jsxs)(g.Card,{className:"relative h-full bg-slate-900/80 border-slate-800 hover:border-blue-500/50 transition-all duration-300 backdrop-blur-xl",children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsxs)(g.CardTitle,{className:"flex items-center gap-3 text-xl text-white",children:[(0,b.jsx)("div",{className:"p-2 bg-blue-500/10 rounded-xl",children:(0,b.jsx)(l.Users,{className:"h-5 w-5 text-blue-500"})}),"Join Battle"]}),(0,b.jsx)(g.CardDescription,{className:"text-slate-400",children:"Enter a code to join an existing match"})]}),(0,b.jsxs)(g.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-300",children:"Battle Code"}),(0,b.jsx)(f.Input,{placeholder:"123456",className:"text-center text-3xl tracking-[0.5em] uppercase h-16 bg-slate-950/50 border-slate-700 text-white placeholder:text-slate-700 font-mono",maxLength:6,value:r,onChange:a=>s(a.target.value.replace(/\D/g,""))})]}),(0,b.jsx)("div",{className:"pt-4",children:(0,b.jsx)(e.Button,{className:"w-full h-14 text-lg font-bold bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 text-white shadow-lg shadow-blue-500/20 transition-all hover:scale-[1.02] active:scale-[0.98]",onClick:E,disabled:t||6!==r.length,children:t?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.Loader2,{className:"mr-2 h-5 w-5 animate-spin"}),"Joining..."]}):"Join Battle"})})]})]})]})})]})}),(0,b.jsxs)("div",{className:"hidden md:grid md:grid-cols-2 gap-8",children:[(0,b.jsxs)("div",{className:"group relative",children:[(0,b.jsx)("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-yellow-500 to-orange-600 rounded-3xl blur opacity-20 group-hover:opacity-50 transition duration-500"}),(0,b.jsxs)(g.Card,{className:"relative h-full bg-slate-900/80 border-slate-800 hover:border-yellow-500/50 transition-all duration-300 backdrop-blur-xl",children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsxs)(g.CardTitle,{className:"flex items-center gap-3 text-2xl text-white",children:[(0,b.jsx)("div",{className:"p-2 bg-yellow-500/10 rounded-xl",children:(0,b.jsx)(m,{className:"h-6 w-6 text-yellow-500"})}),"Create Battle"]}),(0,b.jsx)(g.CardDescription,{className:"text-slate-400 text-base",children:"Start a new match and invite friends"})]}),(0,b.jsxs)(g.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-300",children:"Subject"}),(0,b.jsxs)(h.Select,{value:z,onValueChange:A,children:[(0,b.jsx)(h.SelectTrigger,{className:"bg-slate-950/50 border-slate-700 text-slate-100 h-12",children:(0,b.jsx)(h.SelectValue,{placeholder:"Select Subject"})}),(0,b.jsx)(h.SelectContent,{className:"bg-slate-900 border-slate-800 text-slate-100",children:v.map(a=>(0,b.jsx)(h.SelectItem,{value:a.id.toString(),className:"focus:bg-slate-800 focus:text-white",children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-300",children:"Chapter"}),(0,b.jsxs)(h.Select,{value:B,onValueChange:C,disabled:!z||0===x.length,children:[(0,b.jsx)(h.SelectTrigger,{className:"bg-slate-950/50 border-slate-700 text-slate-100 h-12 disabled:opacity-50",children:(0,b.jsx)(h.SelectValue,{placeholder:"Select Chapter"})}),(0,b.jsx)(h.SelectContent,{className:"bg-slate-900 border-slate-800 text-slate-100",children:x.map(a=>(0,b.jsxs)(h.SelectItem,{value:a.id.toString(),className:"focus:bg-slate-800 focus:text-white",children:[a.chapter_number?`Ch ${a.chapter_number}: `:"",a.title]},a.id))})]})]}),(0,b.jsx)(e.Button,{className:"w-full h-14 text-lg font-bold bg-gradient-to-r from-yellow-500 to-orange-600 hover:from-yellow-400 hover:to-orange-500 text-white shadow-lg shadow-orange-500/20 transition-all hover:scale-[1.02] active:scale-[0.98]",onClick:D,disabled:t||!z||!B,children:t?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.Loader2,{className:"mr-2 h-5 w-5 animate-spin"}),"Creating..."]}):"Create Battle"})]})]})]}),(0,b.jsxs)("div",{className:"group relative",children:[(0,b.jsx)("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-blue-500 to-cyan-600 rounded-3xl blur opacity-20 group-hover:opacity-50 transition duration-500"}),(0,b.jsxs)(g.Card,{className:"relative h-full bg-slate-900/80 border-slate-800 hover:border-blue-500/50 transition-all duration-300 backdrop-blur-xl",children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsxs)(g.CardTitle,{className:"flex items-center gap-3 text-2xl text-white",children:[(0,b.jsx)("div",{className:"p-2 bg-blue-500/10 rounded-xl",children:(0,b.jsx)(l.Users,{className:"h-6 w-6 text-blue-500"})}),"Join Battle"]}),(0,b.jsx)(g.CardDescription,{className:"text-slate-400 text-base",children:"Enter a code to join an existing match"})]}),(0,b.jsxs)(g.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-300",children:"Battle Code"}),(0,b.jsx)(f.Input,{placeholder:"123456",className:"text-center text-3xl tracking-[0.5em] uppercase h-16 bg-slate-950/50 border-slate-700 text-white placeholder:text-slate-700 font-mono",maxLength:6,value:r,onChange:a=>s(a.target.value.replace(/\D/g,""))})]}),(0,b.jsx)("div",{className:"pt-8",children:(0,b.jsx)(e.Button,{className:"w-full h-14 text-lg font-bold bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 text-white shadow-lg shadow-blue-500/20 transition-all hover:scale-[1.02] active:scale-[0.98]",onClick:E,disabled:t||6!==r.length,children:t?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.Loader2,{className:"mr-2 h-5 w-5 animate-spin"}),"Joining..."]}):"Join Battle"})})]})]})]})]})]})]})}a.s(["BattleLobby",()=>r],905826)}];

//# sourceMappingURL=src_components_battle_BattleLobby_tsx_99963bdc._.js.map