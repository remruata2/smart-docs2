{"version":3,"sources":["../../../../src/app/admin/chat/page.tsx","../../../../src/components/ui/alert.tsx","../../../../node_modules/lucide-react/src/icons/file-down.ts"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport Link from \"next/link\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport {\n\tLoader2,\n\tSend,\n\tBot,\n\tUser,\n\tFileText,\n\tAlertCircle,\n\tMessageSquare,\n\tExternalLink,\n\tCopy,\n\tCheck,\n\tFileDown,\n} from \"lucide-react\";\n// PDF generation removed - using text export instead\nimport { toast } from \"sonner\";\nimport { ChatMessage } from \"@/lib/ai-service-enhanced\";\nimport ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport ConversationSidebar from \"@/components/ConversationSidebar\";\n\ninterface ChatSource {\n\tid: number;\n\ttitle: string;\n}\n\n\n\nexport default function AdminChatPage() {\n\tconst [messages, setMessages] = useState<ChatMessage[]>([]);\n\tconst [inputMessage, setInputMessage] = useState(\"\");\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst [error, setError] = useState<string | null>(null);\n\n\t// Conversation state\n\tconst [currentConversationId, setCurrentConversationId] = useState<\n\t\tnumber | null\n\t>(null);\n\tconst [conversationTitle, setConversationTitle] =\n\t\tuseState<string>(\"New Conversation\");\n\tconst [sidebarRefreshTrigger, setSidebarRefreshTrigger] = useState(0);\n\n\tconst [model, setModel] = useState<string>(\"gemini-2.5-pro\");\n\tconst [models, setModels] = useState<Array<{ name: string; label: string }>>([\n\t\t{ name: \"gemini-2.5-pro\", label: \"Gemini 2.5 Pro\" },\n\t\t{ name: \"gemini-2.5-flash\", label: \"Gemini 2.5 Flash\" },\n\t]);\n\tconst [modelsLoading, setModelsLoading] = useState<boolean>(false);\n\tconst [lastResponseMeta, setLastResponseMeta] = useState<{\n\t\tqueryType?: string;\n\t\tsearchQuery?: string;\n\t\tanalysisUsed?: boolean;\n\t} | null>(null);\n\tconst [copiedMessageId, setCopiedMessageId] = useState<string | null>(null);\n\t// Track expanded source lists by message ID\n\tconst [expandedSources, setExpandedSources] = useState<\n\t\tRecord<string, boolean>\n\t>({});\n\tconst [categories, setCategories] = useState<string[]>([]);\n\tconst [categoriesLoading, setCategoriesLoading] = useState<boolean>(false);\n\tconst [selectedCategory, setSelectedCategory] = useState<string>(\"\");\n\n\t// Load available models for current provider\n\tuseEffect(() => {\n\t\tlet cancelled = false;\n\t\tasync function loadModels() {\n\t\t\ttry {\n\t\t\t\tsetModelsLoading(true);\n\t\t\t\tconst res = await fetch(`/api/admin/ai/models?provider=gemini`);\n\t\t\t\tif (!res.ok) throw new Error(\"Failed to load models\");\n\t\t\t\tconst data = await res.json();\n\t\t\t\tif (cancelled) return;\n\t\t\t\tconst list: Array<{ name: string; label: string }> = Array.isArray(\n\t\t\t\t\tdata.models\n\t\t\t\t)\n\t\t\t\t\t? data.models\n\t\t\t\t\t: [];\n\t\t\t\t// Always have at least fallback models\n\t\t\t\tconst finalModels =\n\t\t\t\t\tlist.length > 0\n\t\t\t\t\t\t? list\n\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t{ name: \"gemini-2.5-pro\", label: \"Gemini 2.5 Pro\" },\n\t\t\t\t\t\t\t{ name: \"gemini-2.5-flash\", label: \"Gemini 2.5 Flash\" },\n\t\t\t\t\t\t];\n\t\t\t\tsetModels(finalModels);\n\t\t\t\t// If current model not in list, set to first available\n\t\t\t\tif (\n\t\t\t\t\tfinalModels.length > 0 &&\n\t\t\t\t\t!finalModels.some((m) => m.name === model)\n\t\t\t\t) {\n\t\t\t\t\tsetModel(finalModels[0].name);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\"[AdminChat] Failed to fetch models\", e);\n\t\t\t\t// Fallback to default models if API fails\n\t\t\t\tif (!cancelled) {\n\t\t\t\t\tconst fallbackModels = [\n\t\t\t\t\t\t{ name: \"gemini-2.5-pro\", label: \"Gemini 2.5 Pro\" },\n\t\t\t\t\t\t{ name: \"gemini-2.5-flash\", label: \"Gemini 2.5 Flash\" },\n\t\t\t\t\t];\n\t\t\t\t\tsetModels(fallbackModels);\n\t\t\t\t\tif (!fallbackModels.some((m) => m.name === model)) {\n\t\t\t\t\t\tsetModel(fallbackModels[0].name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (!cancelled) setModelsLoading(false);\n\t\t\t}\n\t\t}\n\t\tloadModels();\n\t\treturn () => {\n\t\t\tcancelled = true;\n\t\t};\n\t}, [model]);\n\n\t// Load available categories\n\tuseEffect(() => {\n\t\tasync function loadCategories() {\n\t\t\ttry {\n\t\t\t\tsetCategoriesLoading(true);\n\t\t\t\tconst res = await fetch(\"/api/admin/categories\");\n\t\t\t\tif (!res.ok) throw new Error(\"Failed to load categories\");\n\t\t\t\tconst data = await res.json();\n\t\t\t\tsetCategories(data.categories || []);\n\t\t\t\t// Reset selected category if it's not in the new list\n\t\t\t\tif (selectedCategory && !data.categories?.includes(selectedCategory)) {\n\t\t\t\t\tsetSelectedCategory(\"\");\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\"[AdminChat] Failed to fetch categories\", e);\n\t\t\t\tsetCategories([]);\n\t\t\t} finally {\n\t\t\t\tsetCategoriesLoading(false);\n\t\t\t}\n\t\t}\n\t\tloadCategories();\n\t}, []);\n\n\tconst scrollAreaRef = useRef<HTMLDivElement>(null);\n\tconst inputRef = useRef<HTMLInputElement>(null);\n\n\t// Initial number of sources to show\n\tconst INITIAL_SOURCES_SHOWN = 15;\n\n\t// Auto-scroll to bottom when new messages arrive\n\tuseEffect(() => {\n\t\tif (scrollAreaRef.current) {\n\t\t\tscrollAreaRef.current.scrollTo({\n\t\t\t\ttop: scrollAreaRef.current.scrollHeight,\n\t\t\t\tbehavior: \"smooth\",\n\t\t\t});\n\t\t}\n\t}, [messages]);\n\n\t// === CONVERSATION MANAGEMENT FUNCTIONS ===\n\n\t// Generate a title from the first user message\n\tconst generateTitleFromQuery = (query: string): string => {\n\t\t// Clean up the query\n\t\tlet title = query.trim();\n\n\t\t// Remove common prefixes\n\t\ttitle = title.replace(\n\t\t\t/^(show|list|find|get|tell|what|who|when|where|how|can you|please)\\s+/i,\n\t\t\t\"\"\n\t\t);\n\n\t\t// Limit length to 50 characters\n\t\tif (title.length > 50) {\n\t\t\ttitle = title.substring(0, 47) + \"...\";\n\t\t}\n\n\t\t// Capitalize first letter\n\t\tif (title.length > 0) {\n\t\t\ttitle = title.charAt(0).toUpperCase() + title.slice(1);\n\t\t}\n\n\t\t// Fallback if empty\n\t\treturn title || \"New Conversation\";\n\t};\n\n\t// Create a new conversation\n\tconst createNewConversation = async (\n\t\tfirstMessage?: string\n\t): Promise<number> => {\n\t\ttry {\n\t\t\tconst title = firstMessage\n\t\t\t\t? generateTitleFromQuery(firstMessage)\n\t\t\t\t: \"New Conversation\";\n\n\t\t\tconst response = await fetch(\"/api/admin/conversations\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\tbody: JSON.stringify({ title }),\n\t\t\t});\n\n\t\t\tif (!response.ok) throw new Error(\"Failed to create conversation\");\n\n\t\t\tconst data = await response.json();\n\t\t\treturn data.conversation.id;\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error creating conversation:\", error);\n\t\t\ttoast.error(\"Failed to create conversation\");\n\t\t\tthrow error;\n\t\t}\n\t};\n\n\t// Save a message to the current conversation\n\tconst saveMessageToConversation = async (\n\t\tconversationId: number,\n\t\tmessage: {\n\t\t\trole: \"user\" | \"assistant\";\n\t\t\tcontent: string;\n\t\t\tsources?: any[];\n\t\t\ttokenCount?: any;\n\t\t\tmetadata?: any;\n\t\t}\n\t) => {\n\t\ttry {\n\t\t\tconst response = await fetch(\n\t\t\t\t`/api/admin/conversations/${conversationId}/messages`,\n\t\t\t\t{\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\tbody: JSON.stringify(message),\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tif (!response.ok) throw new Error(\"Failed to save message\");\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error saving message:\", error);\n\t\t\t// Don't show error toast - this is background operation\n\t\t}\n\t};\n\n\t// Generate AI title for conversation after first exchange\n\tconst generateConversationTitle = async (conversationId: number) => {\n\t\ttry {\n\t\t\tconst response = await fetch(\n\t\t\t\t`/api/admin/conversations/${conversationId}/generate-title`,\n\t\t\t\t{\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tif (!response.ok) throw new Error(\"Failed to generate title\");\n\n\t\t\tconst data = await response.json();\n\t\t\tsetConversationTitle(data.title);\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error generating title:\", error);\n\t\t\t// Don't show error toast\n\t\t}\n\t};\n\n\t// Load a conversation and its messages\n\tconst loadConversation = async (conversationId: number) => {\n\t\ttry {\n\t\t\tconst response = await fetch(\n\t\t\t\t`/api/admin/conversations/${conversationId}`\n\t\t\t);\n\n\t\t\tif (!response.ok) throw new Error(\"Failed to load conversation\");\n\n\t\t\tconst data = await response.json();\n\t\t\tconst conversation = data.conversation;\n\n\t\t\t// Set conversation details\n\t\t\tsetCurrentConversationId(conversation.id);\n\t\t\tsetConversationTitle(conversation.title);\n\n\t\t\t// Load messages\n\t\t\tconst loadedMessages: ChatMessage[] = conversation.messages.map(\n\t\t\t\t(msg: any) => ({\n\t\t\t\t\tid: msg.id.toString(),\n\t\t\t\t\trole: msg.role,\n\t\t\t\t\tcontent: msg.content,\n\t\t\t\t\ttimestamp: new Date(msg.timestamp),\n\t\t\t\t\tsources: msg.sources || [],\n\t\t\t\t\ttokenCount: msg.tokenCount,\n\t\t\t\t\t// For assistant messages, always show filters (default to \"All\" if not saved)\n\t\t\t\t\tfilters:\n\t\t\t\t\t\tmsg.role === \"assistant\"\n\t\t\t\t\t\t\t? msg.metadata?.filters || {\n\t\t\t\t\t\t\t\tcategory: \"All Categories\",\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tsetMessages(loadedMessages);\n\t\t\tsetError(null);\n\n\t\t\ttoast.success(`Loaded: ${conversation.title}`);\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error loading conversation:\", error);\n\t\t\ttoast.error(\"Failed to load conversation\");\n\t\t}\n\t};\n\n\t// Start a new conversation (clear messages, reset state)\n\tconst startNewConversation = () => {\n\t\tsetCurrentConversationId(null);\n\t\tsetConversationTitle(\"New Conversation\");\n\t\tsetMessages([]);\n\t\tsetError(null);\n\t\tsetLastResponseMeta(null);\n\t\tsetInputMessage(\"\");\n\t\ttoast.success(\"Started new conversation\");\n\t};\n\n\t// === END CONVERSATION MANAGEMENT ===\n\n\tconst handleSendMessage = async () => {\n\t\tif (!inputMessage.trim() || isLoading) return;\n\n\t\tconst userMessage: ChatMessage = {\n\t\t\tid: `user_${Date.now()}`,\n\t\t\trole: \"user\",\n\t\t\tcontent: inputMessage.trim(),\n\t\t\ttimestamp: new Date(),\n\t\t};\n\n\t\t// Add user message to chat\n\t\tsetMessages((prev) => [...prev, userMessage]);\n\t\tsetInputMessage(\"\");\n\t\tsetIsLoading(true);\n\t\tsetError(null);\n\n\t\t// === AUTO-SAVE: Create conversation if it doesn't exist ===\n\t\tlet conversationId = currentConversationId;\n\t\tif (!conversationId) {\n\t\t\ttry {\n\t\t\t\t// Generate title from first user message\n\t\t\t\tconversationId = await createNewConversation(userMessage.content);\n\t\t\t\tsetCurrentConversationId(conversationId);\n\t\t\t\t// Trigger sidebar refresh to show new conversation\n\t\t\t\tsetSidebarRefreshTrigger((prev) => prev + 1);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\"Failed to create conversation:\", error);\n\t\t\t\t// Continue anyway - conversation saving is not critical\n\t\t\t}\n\t\t}\n\n\t\t// === AUTO-SAVE: Save user message ===\n\t\tif (conversationId) {\n\t\t\tawait saveMessageToConversation(conversationId, {\n\t\t\t\trole: \"user\",\n\t\t\t\tcontent: userMessage.content,\n\t\t\t});\n\t\t\t// Trigger sidebar refresh to update message count\n\t\t\tsetSidebarRefreshTrigger((prev) => prev + 1);\n\t\t}\n\n\t\t// Create a placeholder assistant message for streaming with thinking indicator\n\t\tconst assistantMessageId = `assistant_${Date.now()}`;\n\n\t\t// Always include filters (show \"All Districts\" / \"All Categories\" if not selected)\n\t\tconst activeFilters: { category: string } = {\n\t\t\tcategory: selectedCategory || \"All Categories\",\n\t\t};\n\n\t\tconst assistantMessage: ChatMessage = {\n\t\t\tid: assistantMessageId,\n\t\t\trole: \"assistant\",\n\t\t\tcontent: \"Analyzing your question and searching database...\",\n\t\t\ttimestamp: new Date(),\n\t\t\tsources: [],\n\t\t\tfilters: activeFilters,\n\t\t};\n\t\tsetMessages((prev) => [...prev, assistantMessage]);\n\n\t\ttry {\n\t\t\tconst response = await fetch(\"/api/admin/chat\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tmessage: userMessage.content,\n\t\t\t\t\tconversationHistory: messages,\n\t\t\t\t\tprovider: \"gemini\",\n\t\t\t\t\tmodel,\n\t\t\t\t\tcategory: selectedCategory || undefined,\n\t\t\t\t\tstream: true, // Enable streaming\n\t\t\t\t}),\n\t\t\t});\n\n\t\t\tif (!response.ok) {\n\t\t\t\tconst contentType = response.headers.get(\"content-type\");\n\t\t\t\tif (contentType && contentType.indexOf(\"application/json\") !== -1) {\n\t\t\t\t\tconst errorData = await response.json();\n\t\t\t\t\tif (response.status === 429) {\n\t\t\t\t\t\ttoast.error(\n\t\t\t\t\t\t\terrorData.error ||\n\t\t\t\t\t\t\t\"You are making requests too quickly. Please wait and try again.\"\n\t\t\t\t\t\t);\n\t\t\t\t\t\t// Remove the placeholder message\n\t\t\t\t\t\tsetMessages((prev) =>\n\t\t\t\t\t\t\tprev.filter((m) => m.id !== assistantMessageId)\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthrow new Error(errorData.error || \"An unknown error occurred\");\n\t\t\t\t} else {\n\t\t\t\t\tconst errorText = await response.text();\n\t\t\t\t\tconsole.error(\"Received non-JSON error response:\", errorText);\n\n\t\t\t\t\tlet errorMessage = \"The server returned an unexpected response\";\n\t\t\t\t\tif (errorText.includes(\"504 Gateway Time-out\")) {\n\t\t\t\t\t\terrorMessage = \"Server timeout. Please try again later.\";\n\t\t\t\t\t} else if (errorText.includes(\"502 Bad Gateway\")) {\n\t\t\t\t\t\terrorMessage = \"Server error. Please try again later.\";\n\t\t\t\t\t} else if (errorText.includes(\"500 Internal Server Error\")) {\n\t\t\t\t\t\terrorMessage = \"Internal server error. Please try again later.\";\n\t\t\t\t\t}\n\n\t\t\t\t\ttoast.error(errorMessage);\n\t\t\t\t\tthrow new Error(errorMessage);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Handle streaming response\n\t\t\tconst reader = response.body?.getReader();\n\t\t\tconst decoder = new TextDecoder();\n\t\t\tlet accumulatedContent = \"\";\n\t\t\tlet metadata: any = {};\n\t\t\tlet isFirstToken = true;\n\t\t\tlet assistantSources: any[] = [];\n\t\t\tlet assistantTokenCount: any = null;\n\n\t\t\tif (!reader) {\n\t\t\t\tthrow new Error(\"Failed to get response reader\");\n\t\t\t}\n\n\t\t\twhile (true) {\n\t\t\t\tconst { done, value } = await reader.read();\n\t\t\t\tif (done) break;\n\n\t\t\t\tconst chunk = decoder.decode(value, { stream: true });\n\t\t\t\tconst lines = chunk.split(\"\\n\");\n\n\t\t\t\tfor (const line of lines) {\n\t\t\t\t\tif (line.startsWith(\"data: \")) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst data = JSON.parse(line.slice(6));\n\n\t\t\t\t\t\t\tif (data.type === \"metadata\") {\n\t\t\t\t\t\t\t\tmetadata = data;\n\t\t\t\t\t\t\t\tsetLastResponseMeta({\n\t\t\t\t\t\t\t\t\tqueryType: data.queryType,\n\t\t\t\t\t\t\t\t\tsearchQuery: data.searchQuery,\n\t\t\t\t\t\t\t\t\tanalysisUsed: data.analysisUsed,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t// Don't update content here - progress events handle that\n\t\t\t\t\t\t\t} else if (data.type === \"progress\") {\n\t\t\t\t\t\t\t\t// Update with progress message\n\t\t\t\t\t\t\t\tsetMessages((prev) =>\n\t\t\t\t\t\t\t\t\tprev.map((msg) =>\n\t\t\t\t\t\t\t\t\t\tmsg.id === assistantMessageId\n\t\t\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\t\t...msg,\n\t\t\t\t\t\t\t\t\t\t\t\tcontent: data.progress || \"Processing...\",\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t: msg\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else if (data.type === \"token\") {\n\t\t\t\t\t\t\t\t// Clear placeholder only on first token\n\t\t\t\t\t\t\t\tif (isFirstToken) {\n\t\t\t\t\t\t\t\t\tisFirstToken = false;\n\t\t\t\t\t\t\t\t\taccumulatedContent = data.text || \"\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\taccumulatedContent += data.text || \"\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tsetMessages((prev) =>\n\t\t\t\t\t\t\t\t\tprev.map((msg) =>\n\t\t\t\t\t\t\t\t\t\tmsg.id === assistantMessageId\n\t\t\t\t\t\t\t\t\t\t\t? { ...msg, content: accumulatedContent }\n\t\t\t\t\t\t\t\t\t\t\t: msg\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else if (data.type === \"sources\") {\n\t\t\t\t\t\t\t\t// Update sources\n\t\t\t\t\t\t\t\tassistantSources = data.sources || [];\n\t\t\t\t\t\t\t\tsetMessages((prev) =>\n\t\t\t\t\t\t\t\t\tprev.map((msg) =>\n\t\t\t\t\t\t\t\t\t\tmsg.id === assistantMessageId\n\t\t\t\t\t\t\t\t\t\t\t? { ...msg, sources: assistantSources }\n\t\t\t\t\t\t\t\t\t\t\t: msg\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else if (data.type === \"done\") {\n\t\t\t\t\t\t\t\t// Update token count\n\t\t\t\t\t\t\t\tassistantTokenCount = data.tokenCount;\n\t\t\t\t\t\t\t\tsetMessages((prev) =>\n\t\t\t\t\t\t\t\t\tprev.map((msg) =>\n\t\t\t\t\t\t\t\t\t\tmsg.id === assistantMessageId\n\t\t\t\t\t\t\t\t\t\t\t? { ...msg, tokenCount: assistantTokenCount }\n\t\t\t\t\t\t\t\t\t\t\t: msg\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else if (data.type === \"error\") {\n\t\t\t\t\t\t\t\tthrow new Error(data.error || \"Streaming error occurred\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (parseError) {\n\t\t\t\t\t\t\tconsole.error(\"Error parsing SSE data:\", parseError);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If no content was received, show error\n\t\t\tif (!accumulatedContent) {\n\t\t\t\tthrow new Error(\"No response received from server\");\n\t\t\t}\n\n\t\t\t// === AUTO-SAVE: Save assistant message ===\n\t\t\tif (conversationId) {\n\t\t\t\t// Always include filters (show \"All Districts\" / \"All Categories\" if not selected)\n\t\t\t\tconst saveFilters: { category: string } = {\n\t\t\t\t\tcategory: selectedCategory || \"All Categories\",\n\t\t\t\t};\n\n\t\t\t\tawait saveMessageToConversation(conversationId, {\n\t\t\t\t\trole: \"assistant\",\n\t\t\t\t\tcontent: accumulatedContent,\n\t\t\t\t\tsources: assistantSources,\n\t\t\t\t\ttokenCount: assistantTokenCount,\n\t\t\t\t\tmetadata: {\n\t\t\t\t\t\tqueryType: metadata.queryType,\n\t\t\t\t\t\tsearchMethod: metadata.searchMethod,\n\t\t\t\t\t\tanalysisUsed: metadata.analysisUsed,\n\t\t\t\t\t\tfilters: saveFilters,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\t// Trigger sidebar refresh to update message count\n\t\t\t\tsetSidebarRefreshTrigger((prev) => prev + 1);\n\t\t\t}\n\t\t} catch (error: unknown) {\n\t\t\tconsole.error(\"Chat error:\", error);\n\t\t\tconst errorMessage =\n\t\t\t\terror instanceof Error ? error.message : \"An unexpected error occurred\";\n\t\t\tsetError(errorMessage);\n\n\t\t\tconst displayMessage = `I apologize, but I encountered an error: ${errorMessage}. Please try again.`;\n\n\t\t\t// Update the assistant message with error\n\t\t\tsetMessages((prev) =>\n\t\t\t\tprev.map((msg) =>\n\t\t\t\t\tmsg.id === assistantMessageId\n\t\t\t\t\t\t? { ...msg, content: displayMessage }\n\t\t\t\t\t\t: msg\n\t\t\t\t)\n\t\t\t);\n\t\t} finally {\n\t\t\tsetIsLoading(false);\n\t\t}\n\t};\n\n\tconst handleKeyPress = (e: React.KeyboardEvent) => {\n\t\tif (e.key === \"Enter\" && !e.shiftKey) {\n\t\t\te.preventDefault();\n\t\t\thandleSendMessage();\n\t\t}\n\t};\n\n\tconst clearChat = () => {\n\t\tsetMessages([]);\n\t\tsetError(null);\n\t\tsetExpandedSources({});\n\t};\n\n\t// Toggle source expansion for a specific message\n\tconst toggleSourceExpansion = (messageId: string) => {\n\t\tsetExpandedSources((prev) => ({\n\t\t\t...prev,\n\t\t\t[messageId]: !prev[messageId],\n\t\t}));\n\t};\n\n\tconst formatTimestamp = (timestamp: Date | string | undefined) => {\n\t\tif (!timestamp) return \"\";\n\t\tconst date = new Date(timestamp);\n\t\treturn date.toLocaleString();\n\t};\n\n\t// Truncate source title for display\n\tconst truncateTitle = (title: string, maxLength: number = 40) => {\n\t\tif (title.length <= maxLength) return title;\n\t\treturn title.substring(0, maxLength).trim() + \"...\";\n\t};\n\n\t// Copy message content to clipboard\n\tconst handleCopy = async (text: string, messageId: string) => {\n\t\tif (!text) return;\n\t\ttry {\n\t\t\tawait navigator.clipboard.writeText(text);\n\t\t\tsetCopiedMessageId(messageId);\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetCopiedMessageId(null);\n\t\t\t}, 2000);\n\t\t} catch (err) {\n\t\t\tconsole.error(\"Failed to copy text: \", err);\n\t\t}\n\t};\n\n\t// Types for formatted content\n\n\t// Helper function to wrap bullet segments together\n\n\t// Export content as PDF with markdown support\n\tconst handleExportText = async (text: string) => {\n\t\tif (!text) return;\n\n\t\ttry {\n\t\t\t// Dynamic imports to avoid SSR issues\n\t\t\tconst jsPDF = (await import(\"jspdf\")).default;\n\n\t\t\tconst doc = new jsPDF();\n\t\t\tconst pageWidth = doc.internal.pageSize.getWidth();\n\t\t\tconst pageHeight = doc.internal.pageSize.getHeight();\n\t\t\tconst margin = 20;\n\t\t\tconst maxWidth = pageWidth - 2 * margin;\n\t\t\tlet currentY = margin;\n\n\t\t\t// Helper function to check if we need a new page\n\t\t\tconst checkNewPage = (requiredHeight: number = 10) => {\n\t\t\t\tif (currentY + requiredHeight > pageHeight - margin) {\n\t\t\t\t\tdoc.addPage();\n\t\t\t\t\tcurrentY = margin;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Helper function to render text with formatting\n\t\t\tconst renderFormattedText = (\n\t\t\t\tcontent: string,\n\t\t\t\tfontSize: number = 12,\n\t\t\t\tisBold: boolean = false,\n\t\t\t\tisItalic: boolean = false\n\t\t\t) => {\n\t\t\t\tdoc.setFontSize(fontSize);\n\n\t\t\t\t// Set font style\n\t\t\t\tif (isBold && isItalic) {\n\t\t\t\t\tdoc.setFont(\"helvetica\", \"bolditalic\");\n\t\t\t\t} else if (isBold) {\n\t\t\t\t\tdoc.setFont(\"helvetica\", \"bold\");\n\t\t\t\t} else if (isItalic) {\n\t\t\t\t\tdoc.setFont(\"helvetica\", \"italic\");\n\t\t\t\t} else {\n\t\t\t\t\tdoc.setFont(\"helvetica\", \"normal\");\n\t\t\t\t}\n\n\t\t\t\tconst lines = doc.splitTextToSize(content, maxWidth);\n\t\t\t\tfor (const line of lines) {\n\t\t\t\t\tcheckNewPage();\n\t\t\t\t\tdoc.text(line, margin, currentY);\n\t\t\t\t\tcurrentY += fontSize * 0.6; // Line height based on font size\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Helper function to render markdown tables\n\t\t\tconst renderMarkdownTable = (tableLines: string[]) => {\n\t\t\t\tif (tableLines.length < 2) return;\n\n\t\t\t\t// Parse table rows\n\t\t\t\tconst rows: string[][] = [];\n\t\t\t\tfor (const line of tableLines) {\n\t\t\t\t\tif (line.includes(\"|\")) {\n\t\t\t\t\t\tconst cells = line\n\t\t\t\t\t\t\t.split(\"|\")\n\t\t\t\t\t\t\t.map((cell) => cell.trim())\n\t\t\t\t\t\t\t.filter((cell) => cell.length > 0);\n\n\t\t\t\t\t\t// Skip separator row (| :--- | :--- |)\n\t\t\t\t\t\tif (cells.every((cell) => /^:?-+:?$/.test(cell))) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trows.push(cells);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (rows.length === 0) return;\n\n\t\t\t\t// Calculate column widths\n\t\t\t\tconst numCols = Math.max(...rows.map((r) => r.length));\n\t\t\t\tconst colWidth = (maxWidth - 10) / numCols;\n\n\t\t\t\t// Add some spacing before table\n\t\t\t\tcurrentY += 5;\n\t\t\t\tcheckNewPage(rows.length * 8 + 20);\n\n\t\t\t\t// Render table header (first row)\n\t\t\t\tif (rows.length > 0) {\n\t\t\t\t\tdoc.setFillColor(240, 240, 240);\n\t\t\t\t\tdoc.rect(margin, currentY - 5, maxWidth, 10, \"F\");\n\n\t\t\t\t\tdoc.setFont(\"helvetica\", \"bold\");\n\t\t\t\t\tdoc.setFontSize(10);\n\n\t\t\t\t\tfor (let i = 0; i < rows[0].length; i++) {\n\t\t\t\t\t\tconst x = margin + i * colWidth + 2;\n\t\t\t\t\t\tdoc.text(rows[0][i], x, currentY);\n\t\t\t\t\t}\n\t\t\t\t\tcurrentY += 8;\n\t\t\t\t}\n\n\t\t\t\t// Render table rows\n\t\t\t\tdoc.setFont(\"helvetica\", \"normal\");\n\t\t\t\tfor (let rowIdx = 1; rowIdx < rows.length; rowIdx++) {\n\t\t\t\t\tcheckNewPage(10);\n\n\t\t\t\t\t// Alternate row colors\n\t\t\t\t\tif (rowIdx % 2 === 0) {\n\t\t\t\t\t\tdoc.setFillColor(250, 250, 250);\n\t\t\t\t\t\tdoc.rect(margin, currentY - 5, maxWidth, 8, \"F\");\n\t\t\t\t\t}\n\n\t\t\t\t\tconst row = rows[rowIdx];\n\t\t\t\t\tfor (let colIdx = 0; colIdx < row.length; colIdx++) {\n\t\t\t\t\t\tconst x = margin + colIdx * colWidth + 2;\n\t\t\t\t\t\tconst cellText = row[colIdx];\n\n\t\t\t\t\t\t// Handle text wrapping in cells\n\t\t\t\t\t\tconst wrappedText = doc.splitTextToSize(cellText, colWidth - 4);\n\t\t\t\t\t\tfor (let lineIdx = 0; lineIdx < wrappedText.length; lineIdx++) {\n\t\t\t\t\t\t\tif (lineIdx > 0) {\n\t\t\t\t\t\t\t\tcurrentY += 6;\n\t\t\t\t\t\t\t\tcheckNewPage(10);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdoc.text(wrappedText[lineIdx], x, currentY);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcurrentY += 8;\n\t\t\t\t}\n\n\t\t\t\t// Draw table borders\n\t\t\t\tconst tableHeight = rows.length * 8 + 3;\n\t\t\t\tdoc.setDrawColor(200, 200, 200);\n\t\t\t\tdoc.setLineWidth(0.5);\n\n\t\t\t\t// Outer border\n\t\t\t\tdoc.rect(margin, currentY - tableHeight, maxWidth, tableHeight);\n\n\t\t\t\t// Vertical lines\n\t\t\t\tfor (let i = 1; i < numCols; i++) {\n\t\t\t\t\tconst x = margin + i * colWidth;\n\t\t\t\t\tdoc.line(x, currentY - tableHeight, x, currentY);\n\t\t\t\t}\n\n\t\t\t\tcurrentY += 5; // Add spacing after table\n\t\t\t};\n\n\t\t\t// Parse markdown and render content\n\t\t\tconst parseAndRenderMarkdown = (markdownText: string) => {\n\t\t\t\t// Split content by lines to handle different markdown elements\n\t\t\t\tconst lines = markdownText.split(\"\\n\");\n\t\t\t\tlet inCodeBlock = false;\n\t\t\t\tlet inTable = false;\n\t\t\t\tlet tableLines: string[] = [];\n\n\t\t\t\tfor (let i = 0; i < lines.length; i++) {\n\t\t\t\t\tconst line = lines[i];\n\n\t\t\t\t\t// Detect table start/end\n\t\t\t\t\tif (line.includes(\"|\") && !inCodeBlock) {\n\t\t\t\t\t\tif (!inTable) {\n\t\t\t\t\t\t\tinTable = true;\n\t\t\t\t\t\t\ttableLines = [line];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttableLines.push(line);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Check if next line is not a table line\n\t\t\t\t\t\tif (i === lines.length - 1 || !lines[i + 1].includes(\"|\")) {\n\t\t\t\t\t\t\trenderMarkdownTable(tableLines);\n\t\t\t\t\t\t\tinTable = false;\n\t\t\t\t\t\t\ttableLines = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// If we were in a table and hit a non-table line, render it\n\t\t\t\t\tif (inTable && !line.includes(\"|\")) {\n\t\t\t\t\t\trenderMarkdownTable(tableLines);\n\t\t\t\t\t\tinTable = false;\n\t\t\t\t\t\ttableLines = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle code blocks\n\t\t\t\t\tif (line.startsWith(\"```\")) {\n\t\t\t\t\t\tinCodeBlock = !inCodeBlock;\n\t\t\t\t\t\tif (!inCodeBlock) currentY += 5; // Add spacing after code block\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (inCodeBlock) {\n\t\t\t\t\t\t// Render code with monospace-like formatting\n\t\t\t\t\t\tdoc.setFont(\"courier\", \"normal\");\n\t\t\t\t\t\tdoc.setFontSize(10);\n\t\t\t\t\t\tcheckNewPage();\n\t\t\t\t\t\tdoc.text(line, margin + 10, currentY);\n\t\t\t\t\t\tcurrentY += 12;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle headers\n\t\t\t\t\tif (line.startsWith(\"# \")) {\n\t\t\t\t\t\tcurrentY += 10;\n\t\t\t\t\t\trenderFormattedText(line.substring(2), 18, true);\n\t\t\t\t\t\tcurrentY += 5;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (line.startsWith(\"## \")) {\n\t\t\t\t\t\tcurrentY += 8;\n\t\t\t\t\t\trenderFormattedText(line.substring(3), 16, true);\n\t\t\t\t\t\tcurrentY += 4;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (line.startsWith(\"### \")) {\n\t\t\t\t\t\tcurrentY += 6;\n\t\t\t\t\t\trenderFormattedText(line.substring(4), 14, true);\n\t\t\t\t\t\tcurrentY += 3;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle bullet points\n\t\t\t\t\tif (line.match(/^[\\s]*[-*+]\\s/)) {\n\t\t\t\t\t\tconst indent = (line.match(/^(\\s*)/)?.[1]?.length || 0) * 2;\n\t\t\t\t\t\tconst content = line.replace(/^[\\s]*[-*+]\\s/, \"\");\n\t\t\t\t\t\tcheckNewPage();\n\t\t\t\t\t\tdoc.setFont(\"helvetica\", \"normal\");\n\t\t\t\t\t\tdoc.setFontSize(12);\n\t\t\t\t\t\tdoc.text(\"â€¢\", margin + indent, currentY);\n\n\t\t\t\t\t\t// Handle inline formatting in bullet points\n\t\t\t\t\t\trenderInlineFormatting(content, margin + indent + 10);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle numbered lists\n\t\t\t\t\tif (line.match(/^[\\s]*\\d+\\.\\s/)) {\n\t\t\t\t\t\tconst indent = (line.match(/^(\\s*)/)?.[1]?.length || 0) * 2;\n\t\t\t\t\t\tconst match = line.match(/^[\\s]*(\\d+)\\.\\s(.*)$/);\n\t\t\t\t\t\tif (match) {\n\t\t\t\t\t\t\tconst number = match[1];\n\t\t\t\t\t\t\tconst content = match[2];\n\t\t\t\t\t\t\tcheckNewPage();\n\t\t\t\t\t\t\tdoc.setFont(\"helvetica\", \"normal\");\n\t\t\t\t\t\t\tdoc.setFontSize(12);\n\t\t\t\t\t\t\tdoc.text(`${number}.`, margin + indent, currentY);\n\n\t\t\t\t\t\t\trenderInlineFormatting(content, margin + indent + 15);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle empty lines\n\t\t\t\t\tif (line.trim() === \"\") {\n\t\t\t\t\t\tcurrentY += 6;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle regular paragraphs with inline formatting\n\t\t\t\t\trenderInlineFormatting(line);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Helper function to render text with inline markdown formatting\n\t\t\tconst renderInlineFormatting = (\n\t\t\t\ttext: string,\n\t\t\t\tstartX: number = margin\n\t\t\t) => {\n\t\t\t\tif (!text.trim()) return;\n\n\t\t\t\t// Simple regex patterns for inline formatting\n\t\t\t\tconst boldPattern = /\\*\\*(.*?)\\*\\*/g;\n\t\t\t\tlet segments: Array<{\n\t\t\t\t\ttext: string;\n\t\t\t\t\tbold: boolean;\n\t\t\t\t\titalic: boolean;\n\t\t\t\t\tcode: boolean;\n\t\t\t\t}> = [];\n\n\t\t\t\t// Parse the text into segments with formatting\n\t\t\t\tlet lastIndex = 0;\n\t\t\t\tlet match;\n\n\t\t\t\t// Handle bold text\n\t\t\t\twhile ((match = boldPattern.exec(text)) !== null) {\n\t\t\t\t\tif (match.index > lastIndex) {\n\t\t\t\t\t\tsegments.push({\n\t\t\t\t\t\t\ttext: text.substring(lastIndex, match.index),\n\t\t\t\t\t\t\tbold: false,\n\t\t\t\t\t\t\titalic: false,\n\t\t\t\t\t\t\tcode: false,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tsegments.push({\n\t\t\t\t\t\ttext: match[1],\n\t\t\t\t\t\tbold: true,\n\t\t\t\t\t\titalic: false,\n\t\t\t\t\t\tcode: false,\n\t\t\t\t\t});\n\t\t\t\t\tlastIndex = match.index + match[0].length;\n\t\t\t\t}\n\n\t\t\t\tif (lastIndex < text.length) {\n\t\t\t\t\tsegments.push({\n\t\t\t\t\t\ttext: text.substring(lastIndex),\n\t\t\t\t\t\tbold: false,\n\t\t\t\t\t\titalic: false,\n\t\t\t\t\t\tcode: false,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// If no bold formatting found, treat as single segment\n\t\t\t\tif (segments.length === 0) {\n\t\t\t\t\tsegments = [{ text: text, bold: false, italic: false, code: false }];\n\t\t\t\t}\n\n\t\t\t\t// Render each segment\n\t\t\t\tlet currentX = startX;\n\t\t\t\tcheckNewPage();\n\n\t\t\t\tfor (const segment of segments) {\n\t\t\t\t\tif (!segment.text) continue;\n\n\t\t\t\t\t// Set font based on formatting\n\t\t\t\t\tif (segment.bold) {\n\t\t\t\t\t\tdoc.setFont(\"helvetica\", \"bold\");\n\t\t\t\t\t} else if (segment.code) {\n\t\t\t\t\t\tdoc.setFont(\"courier\", \"normal\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdoc.setFont(\"helvetica\", \"normal\");\n\t\t\t\t\t}\n\n\t\t\t\t\tdoc.setFontSize(12);\n\n\t\t\t\t\t// Handle text wrapping\n\t\t\t\t\tconst lines = doc.splitTextToSize(\n\t\t\t\t\t\tsegment.text,\n\t\t\t\t\t\tmaxWidth - (currentX - margin)\n\t\t\t\t\t);\n\t\t\t\t\tfor (let i = 0; i < lines.length; i++) {\n\t\t\t\t\t\tif (i > 0) {\n\t\t\t\t\t\t\tcurrentY += 7;\n\t\t\t\t\t\t\tcheckNewPage();\n\t\t\t\t\t\t\tcurrentX = margin;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdoc.text(lines[i], currentX, currentY);\n\t\t\t\t\t\tif (i === lines.length - 1) {\n\t\t\t\t\t\t\tcurrentX += doc.getTextWidth(lines[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcurrentY += 7;\n\t\t\t};\n\n\t\t\t// Add title\n\t\t\tdoc.setFontSize(16);\n\t\t\tdoc.setFont(\"helvetica\", \"bold\");\n\t\t\tdoc.text(\"Zirna Response\", margin, currentY);\n\t\t\tcurrentY += 15;\n\n\t\t\t// Add timestamp\n\t\t\tdoc.setFontSize(10);\n\t\t\tdoc.setFont(\"helvetica\", \"normal\");\n\t\t\tdoc.text(`Generated: ${new Date().toLocaleString()}`, margin, currentY);\n\t\t\tcurrentY += 20;\n\n\t\t\t// Parse and render main content\n\t\t\tparseAndRenderMarkdown(text);\n\n\t\t\t// Sources are kept in chat display but excluded from PDF export\n\n\t\t\t// Generate filename and download\n\t\t\tconst filename = `cid-ai-response-${new Date()\n\t\t\t\t.toISOString()\n\t\t\t\t.slice(0, 19)\n\t\t\t\t.replace(/:/g, \"-\")}.pdf`;\n\n\t\t\tdoc.save(filename);\n\t\t} catch (err) {\n\t\t\tconsole.error(\"Failed to export PDF:\", err);\n\t\t\talert(\"Failed to export PDF. Please try again.\");\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"flex h-full\">\n\t\t\t{/* Conversation Sidebar */}\n\t\t\t<ConversationSidebar\n\t\t\t\tcurrentConversationId={currentConversationId}\n\t\t\t\tonSelectConversation={loadConversation}\n\t\t\t\tonNewConversation={startNewConversation}\n\t\t\t\trefreshTrigger={sidebarRefreshTrigger}\n\t\t\t/>\n\n\t\t\t{/* Main Chat Area */}\n\t\t\t<div className=\"flex-1 p-2 overflow-hidden\">\n\t\t\t\t{error && (\n\t\t\t\t\t<Alert className=\"mb-4\" variant=\"destructive\">\n\t\t\t\t\t\t<AlertCircle className=\"h-4 w-4\" />\n\t\t\t\t\t\t<AlertDescription>{error}</AlertDescription>\n\t\t\t\t\t</Alert>\n\t\t\t\t)}\n\n\t\t\t\t<Card className=\"h-[calc(100vh-24px)] flex flex-col\">\n\t\t\t\t\t<CardHeader className=\"pb-4 flex-shrink-0\">\n\t\t\t\t\t\t<div className=\"flex flex-wrap items-center justify-between gap-4\">\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-4\">\n\t\t\t\t\t\t\t\t<CardTitle className=\"flex items-center gap-2 whitespace-nowrap\">\n\t\t\t\t\t\t\t\t\t<MessageSquare className=\"h-5 w-5\" />\n\t\t\t\t\t\t\t\t\tChat History\n\t\t\t\t\t\t\t\t</CardTitle>\n\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\thtmlFor=\"model\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-sm text-gray-600 whitespace-nowrap\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tAI Model:\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\tid=\"model\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"h-9 w-48 rounded-md border border-gray-300 bg-white px-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500\"\n\t\t\t\t\t\t\t\t\t\tvalue={model}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setModel(e.target.value)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{modelsLoading && <option>Loading models...</option>}\n\t\t\t\t\t\t\t\t\t\t{!modelsLoading && models.length === 0 && (\n\t\t\t\t\t\t\t\t\t\t\t<option>No models configured</option>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{!modelsLoading &&\n\t\t\t\t\t\t\t\t\t\t\tmodels.map((m) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<option key={m.name} value={m.name}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{m.label || m.name}\n\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\thtmlFor=\"category\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-sm text-gray-600 whitespace-nowrap\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tCategory:\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\tid=\"category\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"h-9 rounded-md border border-gray-300 bg-white px-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500\"\n\t\t\t\t\t\t\t\t\t\tvalue={selectedCategory}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setSelectedCategory(e.target.value)}\n\t\t\t\t\t\t\t\t\t\tdisabled={categoriesLoading}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<option value=\"\">All Categories</option>\n\t\t\t\t\t\t\t\t\t\t{categoriesLoading && (\n\t\t\t\t\t\t\t\t\t\t\t<option>Loading categories...</option>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{!categoriesLoading && categories.length === 0 && (\n\t\t\t\t\t\t\t\t\t\t\t<option>No categories found</option>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{!categoriesLoading &&\n\t\t\t\t\t\t\t\t\t\t\tcategories.map((category) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<option key={category} value={category}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{category}\n\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{messages.length > 0 && (\n\t\t\t\t\t\t\t\t<Button variant=\"outline\" size=\"sm\" onClick={clearChat}>\n\t\t\t\t\t\t\t\t\tClear Chat\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</CardHeader>\n\n\t\t\t\t\t<CardContent className=\"flex-1 flex flex-col p-0 min-h-0\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"flex-1 overflow-y-auto p-4 scroll-smooth\"\n\t\t\t\t\t\t\tref={scrollAreaRef}\n\t\t\t\t\t\t\tstyle={{ scrollBehavior: \"smooth\" }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{messages.length === 0 ? (\n\t\t\t\t\t\t\t\t<div className=\"flex flex-col items-center justify-center h-full text-gray-500 space-y-4\">\n\t\t\t\t\t\t\t\t\t<Bot className=\"h-12 w-12\" />\n\t\t\t\t\t\t\t\t\t<div className=\"text-center\">\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-lg font-medium\">\n\t\t\t\t\t\t\t\t\t\t\tWelcome to Zirna Assistant\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm\">\n\t\t\t\t\t\t\t\t\t\t\tAsk me anything about the database records\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t\t\t{messages.map((message) => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tkey={message.id}\n\t\t\t\t\t\t\t\t\t\t\tclassName={`flex gap-3 ${message.role === \"user\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"justify-end\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"justify-start\"\n\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={`flex gap-3 max-w-[90%] ${message.role === \"user\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"flex-row-reverse\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"flex-row\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`flex h-8 w-8 shrink-0 select-none items-center justify-center rounded-full ${message.role === \"user\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-blue-500 text-white\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-gray-200 text-gray-700\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{message.role === \"user\" ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<User className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Bot className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`rounded-lg px-4 py-2 break-words ${message.role === \"user\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-blue-500 text-white\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-gray-100 text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm break-words prose prose-sm max-w-none\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{message.role === \"assistant\" ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Show loading indicator for placeholder and progress messages */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{message.content.includes(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Analyzing your question\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage.content.includes(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Generating response\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage.content.includes(\"Processing\") ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage.content.includes(\"Synthesizing\") ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2 text-gray-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Loader2 className=\"h-4 w-4 animate-spin\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{message.content}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ReactMarkdown\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tremarkPlugins={[remarkGfm]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcomponents={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Custom styling for markdown elements\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tp: ({ children }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"mb-2 last:mb-0 break-words leading-relaxed\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tul: ({ children }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ul className=\"list-disc list-outside ml-4 mb-2 space-y-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tol: ({ children }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ol className=\"list-decimal list-outside ml-4 mb-2 space-y-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ol>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tli: ({ children }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li className=\"leading-relaxed\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrong: ({ children }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<strong className=\"font-bold text-gray-900\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tem: ({ children }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<em className=\"italic\">{children}</em>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcode: ({ children }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<code className=\"bg-gray-200 px-1 py-0.5 rounded text-xs font-mono\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\th1: ({ children }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h1 className=\"text-lg font-bold mb-3 mt-4 first:mt-0 text-gray-900\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\th2: ({ children }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h2 className=\"text-base font-bold mb-2 mt-3 first:mt-0 text-gray-900\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\th3: ({ children }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h3 className=\"text-sm font-bold mb-2 mt-2 first:mt-0 text-gray-900\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttable: ({ children }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"overflow-x-auto my-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<table className=\"min-w-full border-collapse border border-gray-300 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthead: ({ children }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<thead className=\"bg-gray-50\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttbody: ({ children }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tbody className=\"bg-white\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttr: ({ children }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr className=\"border-b border-gray-200\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tth: ({ children }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th className=\"border border-gray-300 px-4 py-2 text-left font-semibold text-gray-900 bg-gray-50\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd: ({ children }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"border border-gray-300 px-4 py-2 text-gray-700\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{message.content}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ReactMarkdown>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-1 mt-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-7 w-7\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleCopy(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage.content,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Copy to clipboard\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{copiedMessageId === message.id ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Check className=\"h-3.5 w-3.5 text-green-500\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Copy className=\"h-3.5 w-3.5\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-7 w-7\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={async () =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait handleExportText(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage.content\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Download as PDF\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FileDown className=\"h-3.5 w-3.5\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"whitespace-pre-wrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{message.content}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`text-xs mt-1 flex items-center gap-2 ${message.role === \"user\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"text-blue-100\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"text-gray-500\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{formatTimestamp(message.timestamp)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{message.role === \"assistant\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage.tokenCount && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"border-l border-gray-300 dark:border-gray-700 pl-2 flex items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span title=\"Input tokens\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tIn:{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{message.tokenCount.input.toLocaleString()}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"mx-1\">|</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span title=\"Output tokens\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tOut:{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{message.tokenCount.output.toLocaleString()}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Display active filters */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{message.role === \"assistant\" && message.filters && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-2 flex flex-wrap gap-2 text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"inline-flex items-center gap-1 bg-gray-100 text-gray-700 border border-gray-300 px-2 py-1 rounded\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-medium\">Category:</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{message.filters.category || \"All Categories\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{message.sources && message.sources.length > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-2 space-y-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-xs font-medium text-gray-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tSources ({message.sources.length}):\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex flex-wrap gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Show initial sources or all if expanded */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(expandedSources[message.id]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? message.sources\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: message.sources.slice(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tINITIAL_SOURCES_SHOWN\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t).map((source, index) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={`${source.id}-${index}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={`/admin/files/${source.id}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"inline-block\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={source.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-xs hover:bg-blue-100 hover:text-blue-800 transition-colors cursor-pointer group max-w-xs\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FileText className=\"h-3 w-3 mr-1 flex-shrink-0\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"truncate\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{truncateTitle(source.title, 35)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ExternalLink className=\"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Show \"Show more/less\" button if there are more sources than the initial limit */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{message.sources.length >\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tINITIAL_SOURCES_SHOWN && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoggleSourceExpansion(message.id)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-xs text-blue-600 hover:text-blue-800 py-1 h-auto\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{expandedSources[message.id]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? `Show less`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: `Show ${message.sources.length -\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tINITIAL_SOURCES_SHOWN\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} more...`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"border-t p-4 flex-shrink-0\">\n\t\t\t\t\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t\t\tvalue={inputMessage}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setInputMessage(e.target.value)}\n\t\t\t\t\t\t\t\t\tonKeyPress={handleKeyPress}\n\t\t\t\t\t\t\t\t\tplaceholder=\"Ask about Zirna database records...\"\n\t\t\t\t\t\t\t\t\tdisabled={isLoading}\n\t\t\t\t\t\t\t\t\tclassName=\"flex-1\"\n\t\t\t\t\t\t\t\t\tmaxLength={1000}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={handleSendMessage}\n\t\t\t\t\t\t\t\t\tdisabled={!inputMessage.trim() || isLoading}\n\t\t\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{isLoading ? (\n\t\t\t\t\t\t\t\t\t\t<Loader2 className=\"h-4 w-4 animate-spin\" />\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Send className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex justify-between items-center text-xs text-gray-500 mt-2\">\n\t\t\t\t\t\t\t\t<span>{inputMessage.length}/1000 characters</span>\n\t\t\t\t\t\t\t\t{lastResponseMeta && (\n\t\t\t\t\t\t\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t\t\t\t\t\t\t<Badge variant=\"outline\" className=\"text-xs\">\n\t\t\t\t\t\t\t\t\t\t\tType: {lastResponseMeta.queryType}\n\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t{lastResponseMeta.analysisUsed && (\n\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"outline\" className=\"text-xs bg-green-50\">\n\t\t\t\t\t\t\t\t\t\t\t\tAI Analysis âœ“\n\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</CardContent>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z', key: '1rqfz7' }],\n  ['path', { d: 'M14 2v4a2 2 0 0 0 2 2h4', key: 'tnqrlb' }],\n  ['path', { d: 'M12 18v-6', key: '17g6i2' }],\n  ['path', { d: 'm9 15 3 3 3-3', key: '1npd3o' }],\n];\n\n/**\n * @component @name FileDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUgMkg2YTIgMiAwIDAgMC0yIDJ2MTZhMiAyIDAgMCAwIDIgMmgxMmEyIDIgMCAwIDAgMi0yVjdaIiAvPgogIDxwYXRoIGQ9Ik0xNCAydjRhMiAyIDAgMCAwIDIgMmg0IiAvPgogIDxwYXRoIGQ9Ik0xMiAxOHYtNiIgLz4KICA8cGF0aCBkPSJtOSAxNSAzIDMgMy0zIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/file-down\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst FileDown = createLucideIcon('file-down', __iconNode);\n\nexport default FileDown;\n"],"names":[],"mappings":"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","ignoreList":[2]}