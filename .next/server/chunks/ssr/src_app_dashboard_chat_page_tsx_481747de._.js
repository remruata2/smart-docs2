module.exports=[196878,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(238246),e=a.i(50944),f=a.i(699570),g=a.i(866718),h=a.i(591119),i=a.i(786304),j=a.i(596221),k=a.i(692759),l=a.i(182434),m=a.i(162041),n=a.i(104720),o=a.i(563588),p=a.i(452495),q=a.i(705151),r=a.i(533441),s=a.i(823292),t=a.i(762180),u=a.i(558348),v=a.i(278917),w=a.i(97251);function x(){let[a,x]=(0,c.useState)([]),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)("New Conversation"),[I,J]=(0,c.useState)(0),[K,L]=(0,c.useState)("gemini-2.5-pro"),[M,N]=(0,c.useState)([{name:"gemini-2.5-pro",label:"Gemini 2.5 Pro"},{name:"gemini-2.5-flash",label:"Gemini 2.5 Flash"}]),[O,P]=(0,c.useState)(!1),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)(null),[U,V]=(0,c.useState)({}),[W,X]=(0,c.useState)([]),[Y,Z]=(0,c.useState)(!1),[$,_]=(0,c.useState)(null),[aa,ab]=(0,c.useState)(""),[ac,ad]=(0,c.useState)([]),[ae,af]=(0,c.useState)(!1),[ag,ah]=(0,c.useState)(null),[ai,aj]=(0,c.useState)(""),ak=(0,e.useSearchParams)(),al=ak.get("subjectId"),am=ak.get("chapterId");(0,c.useEffect)(()=>{let a=!1;return async function(){try{P(!0);let b=await fetch("/api/dashboard/ai/models?provider=gemini");if(!b.ok)throw Error("Failed to load models");let c=await b.json();if(a)return;let d=Array.isArray(c.models)?c.models:[],e=d.length>0?d:[{name:"gemini-2.5-pro",label:"Gemini 2.5 Pro"},{name:"gemini-2.5-flash",label:"Gemini 2.5 Flash"}];N(e),e.length>0&&!e.some(a=>a.name===K)&&L(e[0].name)}catch(b){if(console.error("[DashboardChat] Failed to fetch models",b),!a){let a=[{name:"gemini-2.5-pro",label:"Gemini 2.5 Pro"},{name:"gemini-2.5-flash",label:"Gemini 2.5 Flash"}];N(a),a.some(a=>a.name===K)||L(a[0].name)}}finally{a||P(!1)}}(),()=>{a=!0}},[K]),(0,c.useEffect)(()=>{!async function(){try{Z(!0);let a=await fetch("/api/dashboard/subjects");if(!a.ok)throw Error("Failed to load subjects");let b=await a.json();X(b.subjects||[])}catch(a){console.error("[DashboardChat] Failed to fetch subjects",a),X([])}finally{Z(!1)}}()},[]),(0,c.useEffect)(()=>{if(!$){ad([]),ah(null),aj("");return}!async function(){try{af(!0);let a=await fetch(`/api/dashboard/chapters?subjectId=${$}`);if(!a.ok)throw Error("Failed to load chapters");let b=await a.json();if(ad(b.chapters||[]),am&&b.chapters){let a=b.chapters.find(a=>a.id===am);a&&(ah(a.id),aj(a.title))}}catch(a){console.error("[DashboardChat] Failed to fetch chapters",a),ad([])}finally{af(!1)}}()},[$,am]),(0,c.useEffect)(()=>{if(al&&W.length>0){let a=parseInt(al,10);if(!isNaN(a)){let b=W.find(b=>b.id===a);b&&(_(a),ab(b.name))}}},[al,W]);let an=(0,c.useRef)(null),ao=(0,c.useRef)(null);(0,c.useEffect)(()=>{an.current&&an.current.scrollTo({top:an.current.scrollHeight,behavior:"smooth"})},[a]),(0,c.useEffect)(()=>{ao.current?.focus()},[]);let ap=async a=>{try{let b,c=a?((b=(b=a.trim()).replace(/^(show|list|find|get|tell|what|who|when|where|how|can you|please)\s+/i,"")).length>50&&(b=b.substring(0,47)+"..."),b.length>0&&(b=b.charAt(0).toUpperCase()+b.slice(1)),b||"New Conversation"):"New Conversation",d=await fetch("/api/dashboard/conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:c})});if(!d.ok)throw Error("Failed to create conversation");return(await d.json()).conversation.id}catch(a){throw console.error("Error creating conversation:",a),s.toast.error("Failed to create conversation"),a}},aq=async(a,b)=>{try{if(!(await fetch(`/api/dashboard/conversations/${a}/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok)throw Error("Failed to save message")}catch(a){console.error("Error saving message:",a)}},ar=async a=>{try{let b=await fetch(`/api/dashboard/conversations/${a}`);if(!b.ok)throw Error("Failed to load conversation");let c=(await b.json()).conversation;F(c.id),H(c.title);let d=c.messages.map(a=>({id:a.id.toString(),role:a.role,content:a.content,timestamp:new Date(a.timestamp),sources:a.sources||[],tokenCount:a.tokenCount,chartData:a.metadata?.chartData||null,filters:"assistant"===a.role?a.metadata?.filters||{}:void 0}));x(d),D(null),s.toast.success(`Loaded: ${c.title}`)}catch(a){console.error("Error loading conversation:",a),s.toast.error("Failed to load conversation")}},as=async()=>{if(!y.trim()||A)return;let b={id:`user_${Date.now()}`,role:"user",content:y.trim(),timestamp:new Date};x(a=>[...a,b]),z(""),B(!0),D(null);let c=E;if(!c)try{c=await ap(b.content),F(c),J(a=>a+1)}catch(a){console.error("Failed to create conversation:",a)}c&&(await aq(c,{role:"user",content:b.content}),J(a=>a+1));let d=`assistant_${Date.now()}`,e={};$&&(e.subjectId=$,e.subjectName=aa),ag&&(e.chapterId=parseInt(ag,10),e.chapterTitle=ai);let f={id:d,role:"assistant",content:"Analyzing your question and searching database...",timestamp:new Date,sources:[],filters:e};x(a=>[...a,f]);try{let e=await fetch("/api/dashboard/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:b.content,conversationHistory:a,provider:"gemini",model:K,subjectId:$||void 0,chapterId:ag?parseInt(ag,10):void 0,stream:!0})});if(!e.ok){let a=e.headers.get("content-type");if(a&&-1!==a.indexOf("application/json")){let a=await e.json();if(429===e.status){s.toast.error(a.error||"You are making requests too quickly. Please wait and try again."),x(a=>a.filter(a=>a.id!==d));return}throw Error(a.error||"An unknown error occurred")}{let a=await e.text();console.error("Received non-JSON error response:",a);let b="The server returned an unexpected response";throw a.includes("504 Gateway Time-out")?b="Server timeout. Please try again later.":a.includes("502 Bad Gateway")?b="Server error. Please try again later.":a.includes("500 Internal Server Error")&&(b="Internal server error. Please try again later."),s.toast.error(b),Error(b)}}let f=e.body?.getReader(),g=new TextDecoder,h="",i={},j=!0,k=[],l=null,m=null;if(!f)throw Error("Failed to get response reader");for(;;){let{done:a,value:b}=await f.read();if(a)break;for(let a of g.decode(b,{stream:!0}).split("\n"))if(a.startsWith("data: "))try{let b=JSON.parse(a.slice(6));if(console.log("[STREAM] Received event type:",b.type,"for message:",d),"metadata"===b.type)i=b,R({queryType:b.queryType,searchQuery:b.searchQuery,analysisUsed:b.analysisUsed});else if("progress"===b.type)x(a=>a.map(a=>a.id===d?{...a,content:b.progress||"Processing..."}:a));else if("token"===b.type)j?(j=!1,h=b.text||""):h+=b.text||"",x(a=>a.map(a=>a.id===d?{...a,content:h}:a));else if("sources"===b.type)k=b.sources||[],x(a=>a.map(a=>a.id===d?{...a,sources:k}:a));else if("data"===b.type)console.log("[CHART FRONTEND] Received 'data' event:",b),console.log("[CHART FRONTEND] Current assistantMessageId:",d),b.chartData?(console.log("[CHART FRONTEND] Chart data present, updating message:",d),console.log("[CHART FRONTEND] Chart data:",JSON.stringify(b.chartData,null,2)),x(a=>{console.log("[CHART FRONTEND] Current messages before update:",a.map(a=>({id:a.id,hasChartData:!!a.chartData})));let c=a.some(a=>a.id===d);if(console.log("[CHART FRONTEND] Message exists:",c),!c)return console.error("[CHART FRONTEND] Message not found! Cannot update chartData"),a;let e=a.map(a=>a.id===d?{...a,chartData:b.chartData}:a),f=e.find(a=>a.id===d);return console.log("[CHART FRONTEND] Updated message chartData:",f?.chartData?"PRESENT":"MISSING"),f?.chartData&&console.log("[CHART FRONTEND] Chart data structure:",Object.keys(f.chartData)),e})):console.warn("[CHART FRONTEND] 'data' event received but chartData is missing");else if("done"===b.type){l=b.tokenCount;let a=b.chartData;if(a&&(m=a,console.log("[CHART] Chart data in done event:",a)),x(b=>b.map(b=>{if(b.id===d){let c=a||m||b.chartData;return console.log("[CHART DONE] Final chartData:",c?"PRESENT":"MISSING"),{...b,tokenCount:l,chartData:c}}return b})),c){let b={};$&&(b.subjectId=$,b.subjectName=aa),ag&&(b.chapterId=parseInt(ag,10),b.chapterTitle=ai);let d=a||m;await aq(c,{role:"assistant",content:h,sources:k,tokenCount:l,metadata:{queryType:i.queryType,searchMethod:i.searchMethod,analysisUsed:i.analysisUsed,filters:b,chartData:d}}),J(a=>a+1)}}else if("error"===b.type)throw Error(b.error||"Streaming error occurred")}catch(a){console.error("Error parsing SSE data:",a)}}if(!h)throw Error("No response received from server")}catch(c){console.error("Chat error:",c);let a=c instanceof Error?c.message:"An unexpected error occurred";D(a);let b=`I apologize, but I encountered an error: ${a}. Please try again.`;x(a=>a.map(a=>a.id===d?{...a,content:b}:a))}finally{B(!1)}},at=async(a,b)=>{if(a)try{await navigator.clipboard.writeText(a),T(b),setTimeout(()=>{T(null)},2e3)}catch(a){console.error("Failed to copy text: ",a)}};return(0,b.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[(0,b.jsx)(v.default,{currentConversationId:E,onSelectConversation:ar,onNewConversation:()=>{F(null),H("New Conversation"),x([]),D(null),R(null),z(""),s.toast.success("Started new conversation")},refreshTrigger:I,basePath:"/api/dashboard/conversations"}),(0,b.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden bg-gray-50/50 dark:bg-gray-900/50",children:(0,b.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,b.jsxs)("div",{className:"border-b bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm p-4 flex items-center justify-between sticky top-0 z-10",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,b.jsx)(l.Bot,{className:"h-5 w-5 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"font-semibold text-gray-900 dark:text-gray-100",children:G}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),"Online"]}),(0,b.jsx)("span",{children:"•"}),(0,b.jsx)("span",{children:K})]})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>{x([]),D(null),V({})},disabled:0===a.length||A,className:"hidden sm:flex",children:[(0,b.jsx)(o.MessageSquare,{className:"h-4 w-4 mr-2"}),"New Chat"]})})]}),(0,b.jsx)("div",{ref:an,className:"flex-1 overflow-y-auto p-4 space-y-6 scroll-smooth min-h-0",children:0===a.length?(0,b.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center p-8 animate-in fade-in duration-500",children:[(0,b.jsx)("div",{className:"w-24 h-24 bg-primary/5 rounded-full flex items-center justify-center mb-6 ring-1 ring-primary/10",children:(0,b.jsx)(l.Bot,{className:"h-12 w-12 text-primary/80"})}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"How can I help you today?"}),(0,b.jsx)("p",{className:"text-gray-500 max-w-md mb-8",children:"I can analyze your documents, summarize information, and answer questions about your files."}),(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-w-2xl w-full",children:["Summarize the latest documents","Find information about...","What are the key points in...","Compare documents related to..."].map((a,c)=>(0,b.jsx)("button",{onClick:()=>{z(a),ao.current?.focus()},className:"p-4 text-left text-sm bg-white dark:bg-gray-800 border rounded-xl hover:border-primary/50 hover:shadow-sm transition-all duration-200 group",children:(0,b.jsx)("span",{className:"text-gray-700 dark:text-gray-300 group-hover:text-primary transition-colors",children:a})},c))})]}):(0,b.jsxs)("div",{className:"space-y-6 pb-4",children:[a.map(a=>{var c;let e;return(0,b.jsxs)("div",{className:`flex gap-4 ${"assistant"===a.role?"bg-transparent":""} animate-in slide-in-from-bottom-2 duration-300`,children:[(0,b.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 mt-1 shadow-sm ${"assistant"===a.role?"bg-primary text-primary-foreground ring-2 ring-primary/20":"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300"}`,children:"assistant"===a.role?(0,b.jsx)(l.Bot,{className:"h-5 w-5"}):(0,b.jsx)(m.User,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"font-medium text-sm text-gray-900 dark:text-gray-100",children:"assistant"===a.role?"AI Assistant":"You"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-xs text-gray-400",children:(c=a.timestamp)?new Date(c).toLocaleString():""}),"assistant"===a.role&&(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:"h-6 w-6 text-gray-400 hover:text-gray-600",onClick:()=>at(a.content,a.id),children:S===a.id?(0,b.jsx)(r.Check,{className:"h-3 w-3 text-green-500"}):(0,b.jsx)(q.Copy,{className:"h-3 w-3"})})]})]}),"assistant"===a.role&&a.filters&&(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[a.filters.subjectName&&(0,b.jsxs)(i.Badge,{variant:"outline",className:"text-[10px] h-5 px-2 bg-purple-50 text-purple-700 border-purple-200",children:["Subject: ",a.filters.subjectName]}),a.filters.chapterTitle&&(0,b.jsxs)(i.Badge,{variant:"outline",className:"text-[10px] h-5 px-2 bg-blue-50 text-blue-700 border-blue-200",children:["Chapter: ",a.filters.chapterTitle]})]}),(0,b.jsx)("div",{className:`prose prose-sm max-w-none dark:prose-invert ${"user"===a.role?"bg-white dark:bg-gray-800 p-4 rounded-2xl rounded-tl-none shadow-sm border border-gray-100 dark:border-gray-700":""}`,children:"assistant"===a.role?(0,b.jsx)(b.Fragment,{children:a.content.includes("Analyzing your question")||a.content.includes("Generating response")||a.content.includes("Processing")||a.content.includes("Synthesizing")?(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[(0,b.jsx)(j.Loader2,{className:"h-4 w-4 animate-spin"}),(0,b.jsx)("span",{children:a.content})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.default,{remarkPlugins:[u.default],components:{table:({node:a,...c})=>(0,b.jsx)("div",{className:"overflow-x-auto my-4 rounded-lg border",children:(0,b.jsx)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",...c})}),thead:({node:a,...c})=>(0,b.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",...c}),th:({node:a,...c})=>(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",...c}),td:({node:a,...c})=>(0,b.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300 border-t border-gray-100 dark:border-gray-700",...c}),a:({node:a,...c})=>(0,b.jsx)("a",{className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",...c}),p:({node:a,...c})=>(0,b.jsx)("p",{className:"mb-2 last:mb-0",...c}),ul:({node:a,...c})=>(0,b.jsx)("ul",{className:"list-disc pl-4 mb-2 space-y-1",...c}),ol:({node:a,...c})=>(0,b.jsx)("ol",{className:"list-decimal pl-4 mb-2 space-y-1",...c}),li:({node:a,...c})=>(0,b.jsx)("li",{className:"pl-1",...c}),blockquote:({node:a,...c})=>(0,b.jsx)("blockquote",{className:"border-l-4 border-primary/30 pl-4 italic text-gray-600 dark:text-gray-400 my-2",...c}),code:({node:a,...c})=>(0,b.jsx)("code",{className:"bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded text-sm font-mono text-pink-600 dark:text-pink-400",...c})},children:a.content}),(e=!!a.chartData,console.log(`[CHART RENDER] Message ${a.id} - hasChartData:`,e,"chartData:",a.chartData),e?(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(w.SmartChart,{config:a.chartData})}):null)]})}):a.content}),a.sources&&a.sources.length>0&&(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",onClick:()=>{var b;return b=a.id,void V(a=>({...a,[b]:!a[b]}))},className:"text-xs text-gray-500 hover:text-gray-900 flex items-center gap-1 h-6 px-2",children:[(0,b.jsx)(n.FileText,{className:"h-3 w-3"}),a.sources.length," Source",1!==a.sources.length?"s":""," Used",U[a.id]?(0,b.jsx)("span",{className:"text-[10px] ml-1",children:"(Click to hide)"}):(0,b.jsx)("span",{className:"text-[10px] ml-1",children:"(Click to view)"})]}),U[a.id]&&(0,b.jsx)("div",{className:"mt-2 grid gap-2 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 animate-in fade-in slide-in-from-top-1 duration-200",children:a.sources.slice(0,U[a.id]?void 0:15).map((a,c)=>(0,b.jsx)(d.default,{href:`/dashboard/files/${a.id}`,className:"block group",children:(0,b.jsx)(h.Card,{className:"h-full hover:shadow-md transition-all duration-200 border-l-4 border-l-primary/20 hover:border-l-primary cursor-pointer bg-white/50 dark:bg-gray-800/50",children:(0,b.jsx)(h.CardContent,{className:"p-3",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-xs font-medium text-gray-900 dark:text-gray-100 truncate group-hover:text-primary transition-colors",children:((a,b=40)=>a.length<=b?a:a.substring(0,b).trim()+"...")(a.title||"Untitled Document")}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsxs)(i.Badge,{variant:"secondary",className:"text-[10px] h-4 px-1 font-normal bg-gray-100 text-gray-600",children:["ID: ",a.id]}),a.similarity&&(0,b.jsxs)("span",{className:"text-[10px] text-green-600 font-medium",children:[(100*a.similarity).toFixed(0),"% match"]})]})]}),(0,b.jsx)(p.ExternalLink,{className:"h-3 w-3 text-gray-400 group-hover:text-primary opacity-0 group-hover:opacity-100 transition-all"})]})})})},c))})]}),a.tokenCount&&(0,b.jsxs)("div",{className:"mt-1 text-[10px] text-gray-400 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,b.jsxs)("span",{children:["Input: ",a.tokenCount.input||0," tokens"]}),(0,b.jsx)("span",{children:"•"}),(0,b.jsxs)("span",{children:["Output: ",a.tokenCount.output||0," tokens"]})]})]})]},a.id)}),A&&a[a.length-1]?.role==="user"&&(0,b.jsxs)("div",{className:"flex gap-4 animate-in fade-in duration-300",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0 ring-1 ring-primary/20",children:(0,b.jsx)(j.Loader2,{className:"h-4 w-4 text-primary animate-spin"})}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-medium text-sm text-gray-900 dark:text-gray-100",children:"AI Assistant"}),(0,b.jsx)("span",{className:"text-xs text-gray-400 animate-pulse",children:"Thinking..."})]}),(0,b.jsx)("div",{className:"h-4 w-24 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})]}),(0,b.jsx)("div",{ref:an})]})}),(0,b.jsx)("div",{className:"p-4 bg-white dark:bg-gray-900 border-t shadow-lg z-20 flex-shrink-0",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto space-y-3",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsxs)("select",{className:"text-xs border rounded-md px-2 py-1 bg-gray-50 dark:bg-gray-800 focus:ring-1 focus:ring-primary outline-none",value:$||"",onChange:a=>{let b=a.target.value?parseInt(a.target.value,10):null;if(_(b),b){let a=W.find(a=>a.id===b);ab(a?.name||"")}else ab("");ah(null),aj("")},disabled:A||Y,children:[(0,b.jsx)("option",{value:"",children:"All Subjects"}),W.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]}),$&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"h-4 w-px bg-gray-200 dark:bg-gray-700 mx-1"}),(0,b.jsxs)("select",{className:"text-xs border rounded-md px-2 py-1 bg-gray-50 dark:bg-gray-800 focus:ring-1 focus:ring-primary outline-none",value:ag||"",onChange:a=>{let b=a.target.value||null;if(ah(b),b){let a=ac.find(a=>a.id===b);aj(a?.title||"")}else aj("")},disabled:A||ae,children:[(0,b.jsx)("option",{value:"",children:"All Chapters"}),ac.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.chapter_number?`Ch. ${a.chapter_number}: `:"",a.title]},a.id))]})]}),(0,b.jsx)("div",{className:"h-4 w-px bg-gray-200 dark:bg-gray-700 mx-1"}),(0,b.jsx)("select",{className:"text-xs border rounded-md px-2 py-1 bg-gray-50 dark:bg-gray-800 focus:ring-1 focus:ring-primary outline-none",value:K,onChange:a=>L(a.target.value),disabled:A||O,children:M.map(a=>(0,b.jsx)("option",{value:a.name,children:a.label},a.name))})]}),(0,b.jsxs)("div",{className:"flex gap-2 relative",children:[(0,b.jsx)(g.Input,{ref:ao,placeholder:A?"Please wait for response...":"Ask a question about your documents...",value:y,onChange:a=>z(a.target.value),onKeyDown:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),as())},disabled:A,className:"flex-1 pr-12 py-6 text-base shadow-sm focus-visible:ring-primary/50"}),(0,b.jsx)(f.Button,{onClick:as,disabled:!y.trim()||A,className:"absolute right-1.5 top-1.5 h-9 w-9 p-0 rounded-lg shadow-sm",size:"icon",children:A?(0,b.jsx)(j.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(k.Send,{className:"h-4 w-4"})})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center px-1",children:[(0,b.jsx)("p",{className:"text-[10px] text-gray-400",children:"AI can make mistakes. Please verify important information from source documents."}),a.length>0&&(0,b.jsxs)("span",{className:"text-[10px] text-gray-400",children:[a.length," message",1!==a.length?"s":""]})]})]})})]})})]})}function y(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"container mx-auto px-4 py-8",children:"Loading..."}),children:(0,b.jsx)(x,{})})}a.s(["default",()=>y])}];

//# sourceMappingURL=src_app_dashboard_chat_page_tsx_481747de._.js.map