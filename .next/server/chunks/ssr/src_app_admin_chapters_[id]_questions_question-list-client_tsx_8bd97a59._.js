module.exports=[83753,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(823292),f=a.i(405050),g=(0,f.createServerReference)("40df35e55a35727faf7f01e3106f9d789490e083e1",f.callServer,void 0,f.findSourceMapURL,"deleteQuestion"),h=(0,f.createServerReference)("408bd96419fadc7e6ec02b953502587ffe9ad6d02d",f.callServer,void 0,f.findSourceMapURL,"deleteMultipleQuestions"),i=(0,f.createServerReference)("6043362c97080fff0ef43fb418428f6cf50f3063fb",f.callServer,void 0,f.findSourceMapURL,"createQuestion"),j=(0,f.createServerReference)("60f8107efab589a8495108848c0a7205001ec44599",f.callServer,void 0,f.findSourceMapURL,"updateQuestion");function k({isOpen:a,onClose:d,chapterId:f,question:g,onSuccess:h}){let[k,l]=(0,c.useTransition)(),m=!!g,[n,o]=(0,c.useState)({question_text:g?.question_text||"",question_type:g?.question_type||"MCQ",difficulty:g?.difficulty||"medium",options:g?.options||["","","",""],correct_answer:g?.correct_answer||"",explanation:g?.explanation||"",points:g?.points||1});(0,c.useEffect)(()=>{a&&o({question_text:g?.question_text||"",question_type:g?.question_type||"MCQ",difficulty:g?.difficulty||"medium",options:g?.options||["","","",""],correct_answer:g?.correct_answer||"",explanation:g?.explanation||"",points:g?.points||1})},[g,a]);let p=async a=>{if(a.preventDefault(),!n.question_text.trim()||n.question_text.length<10)return void e.toast.error("Question text must be at least 10 characters");let b=null,c=n.correct_answer;if("MCQ"===n.question_type||"TRUE_FALSE"===n.question_type)if("TRUE_FALSE"===n.question_type)b=["True","False"],c=n.correct_answer;else{let a=n.options.filter(a=>a.trim());if(a.length<2)return void e.toast.error("MCQ must have at least 2 options");b=a,c=n.correct_answer}c&&("string"!=typeof c||c.trim())?l(async()=>{try{let a,d={question_text:n.question_text,question_type:n.question_type,difficulty:n.difficulty,options:b,correct_answer:c,explanation:n.explanation||void 0,points:n.points};a=m?await j(g.id,d):await i(f,d),e.toast.success(m?"Question updated":"Question created"),h(a)}catch(a){e.toast.error(a.message||"Failed to save question")}}):e.toast.error("Correct answer is required")};if(!a)return null;let q="MCQ"===n.question_type||"TRUE_FALSE"===n.question_type;return(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)("div",{className:"sticky top-0 bg-white border-b px-6 py-4",children:(0,b.jsx)("h2",{className:"text-2xl font-bold",children:m?"Edit Question":"Add New Question"})}),(0,b.jsxs)("form",{onSubmit:p,className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text *"}),(0,b.jsx)("textarea",{value:n.question_text,onChange:a=>o({...n,question_text:a.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Type *"}),(0,b.jsxs)("select",{value:n.question_type,onChange:a=>o({...n,question_type:a.target.value,options:"TRUE_FALSE"===a.target.value?["True","False"]:["","","",""],correct_answer:""}),className:"w-full px-3 py-2 border rounded-md",required:!0,children:[(0,b.jsx)("option",{value:"MCQ",children:"Multiple Choice"}),(0,b.jsx)("option",{value:"TRUE_FALSE",children:"True/False"}),(0,b.jsx)("option",{value:"FILL_IN_BLANK",children:"Fill in the Blank"}),(0,b.jsx)("option",{value:"SHORT_ANSWER",children:"Short Answer"}),(0,b.jsx)("option",{value:"LONG_ANSWER",children:"Long Answer"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Difficulty *"}),(0,b.jsxs)("select",{value:n.difficulty,onChange:a=>o({...n,difficulty:a.target.value}),className:"w-full px-3 py-2 border rounded-md",required:!0,children:[(0,b.jsx)("option",{value:"easy",children:"Easy"}),(0,b.jsx)("option",{value:"medium",children:"Medium"}),(0,b.jsx)("option",{value:"hard",children:"Hard"})]})]})]}),q&&"MCQ"===n.question_type&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Options *"}),n.options.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,b.jsx)("input",{type:"text",value:a,onChange:a=>{var b;let d;return b=a.target.value,void((d=[...n.options])[c]=b,o({...n,options:d}))},placeholder:`Option ${c+1}`,className:"flex-1 px-3 py-2 border rounded-md"}),n.options.length>2&&(0,b.jsx)("button",{type:"button",onClick:()=>(a=>{if(n.options.length<=2)return void e.toast.error("Must have at least 2 options");let b=n.options.filter((b,c)=>c!==a);o({...n,options:b})})(c),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded",children:"Remove"})]},c)),n.options.length<6&&(0,b.jsx)("button",{type:"button",onClick:()=>{o({...n,options:[...n.options,""]})},className:"text-sm text-indigo-600 hover:text-indigo-700",children:"+ Add Option"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer *"}),"MCQ"===n.question_type?(0,b.jsxs)("select",{value:n.correct_answer,onChange:a=>o({...n,correct_answer:a.target.value}),className:"w-full px-3 py-2 border rounded-md",required:!0,children:[(0,b.jsx)("option",{value:"",children:"Select correct option"}),n.options.filter(a=>a.trim()).map((a,c)=>(0,b.jsx)("option",{value:a,children:a},c))]}):"TRUE_FALSE"===n.question_type?(0,b.jsxs)("select",{value:n.correct_answer,onChange:a=>o({...n,correct_answer:a.target.value}),className:"w-full px-3 py-2 border rounded-md",required:!0,children:[(0,b.jsx)("option",{value:"",children:"Select answer"}),(0,b.jsx)("option",{value:"True",children:"True"}),(0,b.jsx)("option",{value:"False",children:"False"})]}):(0,b.jsx)("textarea",{value:n.correct_answer,onChange:a=>o({...n,correct_answer:a.target.value}),rows:"LONG_ANSWER"===n.question_type?4:2,className:"w-full px-3 py-2 border rounded-md",placeholder:"Enter the correct answer",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Explanation (Optional)"}),(0,b.jsx)("textarea",{value:n.explanation,onChange:a=>o({...n,explanation:a.target.value}),rows:2,className:"w-full px-3 py-2 border rounded-md",placeholder:"Provide an explanation for the answer"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Points *"}),(0,b.jsx)("input",{type:"number",min:"1",max:"10",value:n.points,onChange:a=>o({...n,points:parseInt(a.target.value)||1}),className:"w-full px-3 py-2 border rounded-md",required:!0})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[(0,b.jsx)("button",{type:"button",onClick:d,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",disabled:k,children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",disabled:k,children:k?"Saving...":m?"Update Question":"Create Question"})]})]})]})})}var l=a.i(238246);function m({chapter:a,initialQuestions:f,stats:i}){let[j,m]=(0,c.useState)(f),[n,o]=(0,c.useState)(new Set),[p,q]=(0,c.useState)("all"),[r,s]=(0,c.useState)("all"),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useTransition)(),B=(0,d.useRouter)(),C=j.filter(a=>("all"===p||a.difficulty===p)&&("all"===r||a.question_type===r)&&(!t||!!a.question_text.toLowerCase().includes(t.toLowerCase()))),D=async a=>{confirm("Delete this question?")&&A(async()=>{try{await g(a),m(b=>b.filter(b=>b.id!==a)),e.toast.success("Question deleted"),B.refresh()}catch(a){e.toast.error(a.message||"Failed to delete question")}})},E=async()=>{0===n.size?e.toast.error("No questions selected"):confirm(`Delete ${n.size} selected question(s)?`)&&A(async()=>{try{await h(Array.from(n)),m(a=>a.filter(a=>!n.has(a.id))),o(new Set),e.toast.success(`Deleted ${n.size} question(s)`),B.refresh()}catch(a){e.toast.error(a.message||"Failed to delete questions")}})};return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2",children:[(0,b.jsx)(l.default,{href:"/admin/chapters",className:"hover:text-indigo-600",children:"Chapters"}),(0,b.jsx)("span",{children:"/"}),(0,b.jsx)(l.default,{href:`/admin/chapters/${a.id}`,className:"hover:text-indigo-600",children:a.title}),(0,b.jsx)("span",{children:"/"}),(0,b.jsx)("span",{className:"text-gray-900",children:"Questions"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:a.title}),(0,b.jsxs)("p",{className:"text-gray-600 mt-1",children:[a.subject.name," • ",a.subject.program.name," • ",a.subject.program.board.name]})]}),(0,b.jsx)("button",{onClick:()=>{y(null),w(!0)},className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700",children:"Add New Question"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-indigo-600",children:i.total}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Total Questions"})]}),(0,b.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:i.byDifficulty.easy||0}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Easy"})]}),(0,b.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:i.byDifficulty.medium||0}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Medium"})]}),(0,b.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600",children:i.byDifficulty.hard||0}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Hard"})]}),(0,b.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:i.byType.MCQ||0}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"MCQs"})]})]}),(0,b.jsx)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsx)("input",{type:"text",placeholder:"Search questions...",value:t,onChange:a=>u(a.target.value),className:"px-4 py-2 border rounded-md"}),(0,b.jsxs)("select",{value:p,onChange:a=>q(a.target.value),className:"px-4 py-2 border rounded-md",children:[(0,b.jsx)("option",{value:"all",children:"All Difficulties"}),(0,b.jsx)("option",{value:"easy",children:"Easy"}),(0,b.jsx)("option",{value:"medium",children:"Medium"}),(0,b.jsx)("option",{value:"hard",children:"Hard"}),(0,b.jsx)("option",{value:"exam",children:"Exam (Past Papers)"})]}),(0,b.jsxs)("select",{value:r,onChange:a=>s(a.target.value),className:"px-4 py-2 border rounded-md",children:[(0,b.jsx)("option",{value:"all",children:"All Types"}),(0,b.jsx)("option",{value:"MCQ",children:"MCQ"}),(0,b.jsx)("option",{value:"TRUE_FALSE",children:"True/False"}),(0,b.jsx)("option",{value:"FILL_IN_BLANK",children:"Fill in Blank"}),(0,b.jsx)("option",{value:"SHORT_ANSWER",children:"Short Answer"}),(0,b.jsx)("option",{value:"LONG_ANSWER",children:"Long Answer"})]})]})}),n.size>0&&(0,b.jsxs)("div",{className:"mb-4 bg-indigo-50 border border-indigo-200 rounded-lg p-4 flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-sm font-medium text-indigo-900",children:[n.size," question(s) selected"]}),(0,b.jsx)("button",{onClick:E,disabled:z,className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 disabled:opacity-50 text-sm",children:z?"Deleting...":"Delete Selected"})]}),(0,b.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:(0,b.jsxs)("ul",{className:"divide-y divide-gray-200",children:[(0,b.jsx)("li",{className:"bg-gray-50 border-b-2 border-gray-300",children:(0,b.jsxs)("div",{className:"px-4 py-3 flex items-center",children:[(0,b.jsx)("input",{type:"checkbox",checked:n.size===C.length&&C.length>0,onChange:()=>{n.size===C.length?o(new Set):o(new Set(C.map(a=>a.id)))},className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,b.jsxs)("label",{className:"ml-3 text-sm font-medium text-gray-700",children:["Select All (",C.length,")"]})]})}),C.map(a=>{var c,d;return(0,b.jsx)("li",{className:"hover:bg-gray-50",children:(0,b.jsxs)("div",{className:"px-4 py-4 flex items-start gap-4",children:[(0,b.jsx)("input",{type:"checkbox",checked:n.has(a.id),onChange:()=>{var b;let c;return b=a.id,void((c=new Set(n)).has(b)?c.delete(b):c.add(b),o(c))},className:"mt-1 h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(c=a.difficulty,(0,b.jsx)("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${{easy:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",hard:"bg-red-100 text-red-800",exam:"bg-purple-100 text-purple-800"}[c]||"bg-gray-100 text-gray-800"}`,children:c.charAt(0).toUpperCase()+c.slice(1)})),(d=a.question_type,(0,b.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded bg-blue-100 text-blue-800",children:{MCQ:"MCQ",TRUE_FALSE:"T/F",FILL_IN_BLANK:"Fill Blank",SHORT_ANSWER:"Short",LONG_ANSWER:"Essay"}[d]})),(0,b.jsxs)("span",{className:"text-xs text-gray-500",children:[a.points," pt",1!==a.points?"s":""]})]}),(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900 line-clamp-2",children:a.question_text}),a.explanation&&(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1 line-clamp-1",children:["Explanation: ",a.explanation]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>{y(a),w(!0)},className:"text-indigo-600 hover:text-indigo-900 text-sm",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>D(a.id),disabled:z,className:"text-red-600 hover:text-red-900 text-sm disabled:opacity-50",children:"Delete"})]})]})},a.id)}),0===C.length&&(0,b.jsx)("li",{className:"px-4 py-8 text-center text-gray-500",children:"No questions found. Create one to get started!"})]})}),(0,b.jsx)(k,{isOpen:v,onClose:()=>{w(!1),y(null)},chapterId:a.id,question:x,onSuccess:a=>{x?m(b=>b.map(b=>b.id===a.id?a:b)):m(b=>[a,...b]),w(!1),y(null),B.refresh()}})]})}a.s(["default",()=>m],83753)}];

//# sourceMappingURL=src_app_admin_chapters_%5Bid%5D_questions_question-list-client_tsx_8bd97a59._.js.map