{"version":3,"sources":["../../../src/lib/docling-client.ts"],"sourcesContent":["import fs from 'fs';\nimport FormData from 'form-data';\n\n\nexport async function convertFileWithDocling(filePath: string): Promise<string | null> {\n    try {\n        // 1. Prepare the file for upload\n        const formData = new FormData();\n        formData.append('file', fs.createReadStream(filePath));\n\n        // 2. Call your local Python microservice\n        // Note: We use 'any' for headers because of type mismatch between form-data and node-fetch versions in some environments\n        // but generally formData.getHeaders() works.\n        const response = await fetch('http://localhost:8000/convert', {\n            method: 'POST',\n            body: formData as any,\n            headers: formData.getHeaders(),\n        });\n\n        if (!response.ok) {\n            throw new Error(`Conversion failed: ${response.statusText}`);\n        }\n\n        // 3. Get the Markdown result\n        const data = await response.json() as { markdown: string };\n        return data.markdown;\n\n    } catch (error) {\n        console.error(\"Docling conversion error:\", error);\n        return null;\n    }\n}\n"],"names":[],"mappings":"wCAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAGO,eAAe,EAAuB,CAAgB,EACzD,GAAI,CAEA,IAAM,EAAW,IAAI,EAAA,OAAQ,CAC7B,EAAS,MAAM,CAAC,OAAQ,EAAA,OAAE,CAAC,gBAAgB,CAAC,IAK5C,IAAM,EAAW,MAAM,MAAM,gCAAiC,CAC1D,OAAQ,OACR,KAAM,EACN,QAAS,EAAS,UAAU,EAChC,GAEA,GAAI,CAAC,EAAS,EAAE,CACZ,CADc,KACR,AAAI,MAAM,CAAC,mBAAmB,EAAE,EAAS,UAAU,CAAA,CAAE,EAK/D,MAAO,CADM,MAAM,EAAS,IAAI,EAAA,EACpB,QAAQ,AAExB,CAAE,MAAO,EAAO,CAEZ,OADA,QAAQ,KAAK,CAAC,4BAA6B,GACpC,IACX,CACJ"}