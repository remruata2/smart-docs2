(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,110204,e=>{"use strict";var a=e.i(843476),t=e.i(271645),r=e.i(248425),s=t.forwardRef((e,t)=>(0,a.jsx)(r.Primitive.label,{...e,ref:t,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));s.displayName="Label";var l=e.i(975157);function i({className:e,...t}){return(0,a.jsx)(s,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}e.s(["Label",()=>i],110204)},515288,e=>{"use strict";var a=e.i(843476),t=e.i(975157);function r({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function s({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function l({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...r})}function i({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...r})}function o({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...r})}function n({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,t.cn)("flex items-center px-6 [.border-t]:pt-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>o,"CardDescription",()=>i,"CardFooter",()=>n,"CardHeader",()=>s,"CardTitle",()=>l])},32095,e=>{"use strict";let a=(0,e.i(475254).default)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);e.s(["GraduationCap",()=>a],32095)},595468,e=>{"use strict";let a=(0,e.i(475254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>a],595468)},931936,e=>{"use strict";var a=e.i(843476),t=e.i(271645),r=e.i(618566),s=e.i(519455),l=e.i(515288),i=e.i(110204),o=e.i(967489),n=e.i(32095),d=e.i(595468),c=e.i(846696);function u(){let e=(0,r.useRouter)(),[u,m]=(0,t.useState)(1),[h,x]=(0,t.useState)(!1),[p,g]=(0,t.useState)([]),[f,j]=(0,t.useState)([]),[b,y]=(0,t.useState)([]),[v,N]=(0,t.useState)(""),[S,C]=(0,t.useState)(""),[w,k]=(0,t.useState)(null),[F,P]=(0,t.useState)(!1);(0,t.useEffect)(()=>{!async function(){try{let e=await fetch("/api/dashboard/boards");if(e.ok){let a=await e.json();g(a.boards||[])}}catch(e){console.error("Failed to load boards:",e),c.toast.error("Failed to load boards")}}()},[]),(0,t.useEffect)(()=>{v&&e();async function e(){try{let e=await fetch(`/api/dashboard/institutions?board_id=${v}`);if(e.ok){let a=await e.json();j(a.institutions||[])}}catch(e){console.error("Failed to load institutions:",e),c.toast.error("Failed to load institutions")}}},[v]),(0,t.useEffect)(()=>{v&&(F||S)&&e();async function e(){try{let e=new URLSearchParams({board_id:v});!F&&S&&e.append("institution_id",S);let a=await fetch(`/api/dashboard/programs?${e}`);if(a.ok){let e=await a.json();y(e.programs||[])}}catch(e){console.error("Failed to load programs:",e),c.toast.error("Failed to load programs")}}},[v,S,F]);let T=async()=>{if(!w)return void c.toast.error("Please select a program");x(!0);try{if(!(await fetch("/api/dashboard/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({program_id:w,institution_id:F?null:S})})).ok)throw Error("Failed to update profile");c.toast.success("Profile updated successfully!"),e.push("/app/dashboard"),e.refresh()}catch(e){console.error("Failed to save profile:",e),c.toast.error("Failed to save your selection. Please try again.")}finally{x(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,a.jsxs)(l.Card,{className:"w-full max-w-2xl",children:[(0,a.jsxs)(l.CardHeader,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"p-3 bg-primary/10 rounded-lg",children:(0,a.jsx)(n.GraduationCap,{className:"h-8 w-8 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.CardTitle,{className:"text-2xl",children:"Welcome to Zirna"}),(0,a.jsx)(l.CardDescription,{children:"Let's set up your learning profile"})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:`flex-1 h-2 rounded-full ${e<=u?"bg-primary":"bg-gray-200"}`},e))})]}),(0,a.jsxs)(l.CardContent,{className:"space-y-6",children:[1===u&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Select Your Board"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Choose the education board or examination body you're studying under"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"board",children:"Board"}),(0,a.jsxs)(o.Select,{value:v,onValueChange:N,children:[(0,a.jsx)(o.SelectTrigger,{id:"board",children:(0,a.jsx)(o.SelectValue,{placeholder:"Select a board"})}),(0,a.jsx)(o.SelectContent,{children:p.map(e=>(0,a.jsxs)(o.SelectItem,{value:e.id,children:[e.name," (",e.type,")"]},e.id))})]})]})]}),2===u&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Select Your Institution"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Are you enrolled in a school, college, or studying independently?"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)("input",{type:"checkbox",id:"selfPaced",checked:F,onChange:e=>{P(e.target.checked),e.target.checked&&C("")},className:"rounded"}),(0,a.jsx)(i.Label,{htmlFor:"selfPaced",className:"cursor-pointer",children:"I'm a self-paced learner (not enrolled in an institution)"})]}),!F&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"institution",children:"Institution"}),(0,a.jsxs)(o.Select,{value:S,onValueChange:C,disabled:F,children:[(0,a.jsx)(o.SelectTrigger,{id:"institution",children:(0,a.jsx)(o.SelectValue,{placeholder:"Select your institution"})}),(0,a.jsx)(o.SelectContent,{children:f.map(e=>(0,a.jsxs)(o.SelectItem,{value:e.id,children:[e.name," (",e.type,")"]},e.id))})]})]})]}),3===u&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Select Your Program"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Choose your class, course, or examination program"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"program",children:"Program"}),(0,a.jsxs)(o.Select,{value:w?.toString()||"",onValueChange:e=>k(parseInt(e)),children:[(0,a.jsx)(o.SelectTrigger,{id:"program",children:(0,a.jsx)(o.SelectValue,{placeholder:"Select your program"})}),(0,a.jsx)(o.SelectContent,{children:b.map(e=>(0,a.jsxs)(o.SelectItem,{value:e.id.toString(),children:[e.name,e.level&&` (${e.level})`]},e.id))})]})]}),0===b.length&&(0,a.jsx)("div",{className:"text-sm text-amber-600 bg-amber-50 p-3 rounded-lg",children:"No programs available for this selection. Please contact your administrator."})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[u>1&&(0,a.jsx)(s.Button,{variant:"outline",onClick:()=>{m(u-1)},disabled:h,children:"Back"}),u<3?(0,a.jsx)(s.Button,{onClick:()=>{1!==u||v?2!==u||F||S?m(u+1):c.toast.error("Please select an institution or choose self-paced learning"):c.toast.error("Please select a board")},className:"ml-auto",children:"Next"}):(0,a.jsx)(s.Button,{onClick:T,disabled:h||!w,className:"ml-auto",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.CheckCircle2,{className:"h-4 w-4 mr-2"}),"Complete Setup"]})})]})]})]})})}e.s(["default",()=>u])}]);