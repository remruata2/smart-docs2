(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,836216,e=>{"use strict";var s=e.i(843476),t=e.i(618566),r=e.i(271645);function l({name:e,options:l,placeholder:n,className:a=""}){let i=(0,t.useRouter)(),d=(0,t.useSearchParams)(),c=d.get(e)||"",o=(0,r.useCallback)(s=>{let t=s.target.value,r=new URLSearchParams(d.toString());t?r.set(e,t):r.delete(e),i.push(`?${r.toString()}`)},[e,i,d]);return(0,s.jsxs)("select",{name:e,value:c,onChange:o,className:`block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm border p-2 ${a}`,children:[(0,s.jsx)("option",{value:"",children:n}),l.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]})}e.s(["default",()=>l])},656086,e=>{"use strict";var s=e.i(843476),t=e.i(271645),r=e.i(618566),l=e.i(846696);function n({chapters:e,onDelete:n}){let[a,i]=(0,t.useState)(new Set),[d,c]=(0,t.useTransition)(),o=(0,r.useRouter)(),x=e.some(e=>"PENDING"===e.processing_status||"PROCESSING"===e.processing_status);(0,t.useEffect)(()=>{if(!x)return;let e=setInterval(()=>{o.refresh()},5e3);return()=>clearInterval(e)},[x,o]);let m=async()=>{0===a.size?l.toast.error("No chapters selected"):confirm(`Delete ${a.size} selected chapter(s)?`)&&c(async()=>{try{await n(Array.from(a)),l.toast.success(`Deleted ${a.size} chapter(s)`),i(new Set),o.refresh()}catch(e){l.toast.error(e.message||"Failed to delete chapters")}})};return(0,s.jsxs)("div",{children:[x&&(0,s.jsxs)("div",{className:"mb-4 bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"animate-spin h-5 w-5 border-2 border-blue-600 border-t-transparent rounded-full"}),(0,s.jsxs)("span",{className:"text-sm text-blue-900",children:[e.filter(e=>"PROCESSING"===e.processing_status).length," chapter(s) processing... Auto-refreshing every 5 seconds"]})]}),a.size>0&&(0,s.jsxs)("div",{className:"mb-4 bg-indigo-50 border border-indigo-200 rounded-lg p-4 flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"text-sm font-medium text-indigo-900",children:[a.size," chapter(s) selected"]}),(0,s.jsx)("button",{onClick:m,disabled:d,className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 disabled:opacity-50 text-sm font-medium",children:d?"Deleting...":"Delete Selected"})]}),(0,s.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:(0,s.jsxs)("ul",{className:"divide-y divide-gray-200",children:[(0,s.jsx)("li",{className:"bg-gray-50 border-b-2 border-gray-300",children:(0,s.jsxs)("div",{className:"px-4 py-3 flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:a.size===e.length&&e.length>0,onChange:()=>{a.size===e.length?i(new Set):i(new Set(e.map(e=>e.id.toString())))},className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,s.jsxs)("label",{className:"ml-3 text-sm font-medium text-gray-700",children:["Select All (",e.length,")"]})]})}),e.map(e=>(0,s.jsx)("li",{className:"hover:bg-gray-50 transition",children:(0,s.jsxs)("div",{className:"px-4 py-4 sm:px-6 flex items-start gap-4",children:[(0,s.jsx)("input",{type:"checkbox",checked:a.has(e.id.toString()),onChange:()=>{var s;let t;return s=e.id.toString(),void((t=new Set(a)).has(s)?t.delete(s):t.add(s),i(t))},onClick:e=>e.stopPropagation(),className:"mt-1 h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,s.jsxs)("div",{className:"flex-1 cursor-pointer",onClick:()=>o.push(`/admin/chapters/${e.id}`),children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-indigo-600",children:e.title}),function(e){switch(e){case"PENDING":return(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"ðŸŸ¡ Pending"});case"PROCESSING":return(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800 animate-pulse",children:"ðŸ”µ Processing"});case"COMPLETED":return(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"ðŸŸ¢ Ready"});case"FAILED":return(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"ðŸ”´ Failed"});default:return null}}(e.processing_status),e.is_global&&(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:"Global"}),(0,s.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.is_active?"Active":"Inactive"})]})}),(0,s.jsxs)("div",{className:"mt-2 sm:flex sm:justify-between",children:[(0,s.jsxs)("div",{className:"sm:flex",children:[(0,s.jsxs)("p",{className:"flex items-center text-sm text-gray-500 mr-6",children:["Subject: ",e.subject.name]}),(0,s.jsxs)("p",{className:"flex items-center text-sm text-gray-500 mr-6",children:["Program: ",e.subject.program.name]}),(0,s.jsxs)("p",{className:"flex items-center text-sm text-gray-500 mr-6",children:["Board: ",e.subject.program.board.name]})]}),(0,s.jsxs)("div",{className:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0",children:[(0,s.jsxs)("p",{className:"mr-4",children:["Chunks: ",e._count.chunks]}),(0,s.jsxs)("p",{children:["Pages: ",e._count.pages]})]})]}),"FAILED"===e.processing_status&&e.error_message&&(0,s.jsxs)("div",{className:"mt-2 text-xs text-red-600 bg-red-50 p-2 rounded",children:["Error: ",e.error_message]})]})]})},e.id)),0===e.length&&(0,s.jsx)("li",{className:"px-4 py-4 text-center text-gray-500",children:"No chapters found."})]})})]})}e.s(["default",()=>n])}]);