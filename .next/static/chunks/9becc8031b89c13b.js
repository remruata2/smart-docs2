(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95187,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={callServer:function(){return l.callServer},createServerReference:function(){return n.createServerReference},findSourceMapURL:function(){return i.findSourceMapURL}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let l=e.r(132120),i=e.r(92245),n=e.r(235326)},862136,e=>{"use strict";var t=e.i(95187),s=(0,t.createServerReference)("4054eccc7d78f138ed33536b4ab6af09891ec8d3ce",t.callServer,void 0,t.findSourceMapURL,"ingestChapterAsync");e.s(["ingestChapterAsync",()=>s])},506342,e=>{"use strict";var t=e.i(843476),s=e.i(271645),r=e.i(862136),a=e.i(618566),l=e.i(846696);class i{static async detectChapters(e){let t=[],s=[],r=null;for(let t of e){let e=t.text||t.md||"",a=this.findChapterMarker(e);a&&(null===r||null!==a.number&&a.number>r)&&(s.push({page:t.page,title:a.title,chapterNum:a.number}),r=a.number)}if(0===s.length)return[{id:"detected-chapter-1",title:"Complete Textbook",startPage:e[0]?.page||1,endPage:e[e.length-1]?.page||e.length,content:e.map(e=>e.md||e.text).join("\n\n"),previewText:this.extractPreview(e[0]?.md||e[0]?.text||""),chapterNumber:null}];for(let r=0;r<s.length;r++){let a=s[r],l=s[r+1],i=a.page,n=l?l.page-1:e[e.length-1].page,d=e.filter(e=>e.page>=i&&e.page<=n).map(e=>e.md||e.text).join("\n\n");t.push({id:`detected-chapter-${r+1}`,title:a.title,startPage:i,endPage:n,content:d,previewText:this.extractPreview(d),chapterNumber:a.chapterNum})}return t}static findChapterMarker(e){let t=e.trim(),s=t.match(/(?:^|[\r\n]+)(?:(?:.*?)[\r\n]+){0,6}\s*(?:CHAPTER|Chapter)\s+(\d+)\s*[\r\n]+\s*([^\r\n]{3,100})(?:[\r\n]+\s*([^\r\n]{3,100}))?[\r\n]+([\s\S]{50,})/i);if(s){let e=this.parseChapterNumber(s[1]),t=s[2].trim(),r=s[3]?.trim();s[4],t.length>100||/[.]$/.test(t);let a=t;if(r){let e=r.length<60,t=/^[a-z]/.test(r),s=/^(?:and|of|the|in|on|at|to|for|with)\b/i.test(r);(e||t||s)&&(a+=" "+r)}if(!/^[A-Z\s]+\d+$/.test(a))return{title:a,number:e}}let r=t.match(/^(?:Chapter|CHAPTER|Ch\.?)\s+(\d+|One|Two|Three|Four|Five|Six|Seven|Eight|Nine|Ten|Eleven|Twelve|[IVX]+)\s*\n\s*([A-Z][^\n]{3,100})/i);if(r){let e=this.parseChapterNumber(r[1]),t=r[2].trim();return/^[A-Z\s]+\d+$/.test(t)?null:((t=t.replace(/\s+/g," ").trim()).length>100&&(t=t.substring(0,97)+"..."),{title:t,number:e})}let a=t.match(/^(?:Chapter|CHAPTER|Ch\.?)\s+(\d+|One|Two|Three|Four|Five|Six|Seven|Eight|Nine|Ten|Eleven|Twelve|[IVX]+)\s*[:\.\-–—\s]+\s*([A-Z][^\n]{3,100})\n([\s\S]{200,})/i);if(a){let e=this.parseChapterNumber(a[1]),t=a[2]?.trim()||"";return/^[A-Z\s]+\d+$/.test(t)?null:((!t||t.length<3)&&(t=`Chapter ${e||a[1]}`),(t=t.replace(/\s+/g," ").trim()).length>100&&(t=t.substring(0,97)+"..."),{title:t,number:e})}let l=t.match(/^(?:Unit|UNIT)\s+(\d+)\s*[:–-]\s*(.+?)\n([\s\S]{200,})/i);if(l){let e=this.parseChapterNumber(l[1]),t=l[2]?.trim()||"";return(t=t.replace(/\s+/g," ").trim()).length>100&&(t=t.substring(0,97)+"..."),{title:t,number:e}}let i=t.match(/^(?:CHAPTER|Chapter)\s+(\d+|[IVX]+)\s*\n([\s\S]{200,})/i);if(i){let e=this.parseChapterNumber(i[1]);return{title:`Chapter ${e||i[1]}`,number:e}}return null}static parseChapterNumber(e){let t=e.match(/\d+/);if(t)return parseInt(t[0]);let s={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10},r=e.toLowerCase();if(s[r])return s[r];let a=e.match(/^[IVX]+$/i);return a?this.romanToInt(a[0].toUpperCase()):null}static romanToInt(e){let t={I:1,V:5,X:10,L:50,C:100},s=0;for(let r=0;r<e.length;r++){let a=t[e[r]],l=t[e[r+1]];l&&a<l?s-=a:s+=a}return s}static extractPreview(e){let t=e.replace(/#+\s/g,"").replace(/\*\*/g,"").replace(/\*/g,"").replace(/\n+/g," ").trim();return t.substring(0,200)+(t.length>200?"...":"")}static mergeChapters(e,t){return{id:e.id,title:`${e.title} & ${t.title}`,startPage:e.startPage,endPage:t.endPage,content:`${e.content}

${t.content}`,previewText:this.extractPreview(`${e.content}

${t.content}`),chapterNumber:e.chapterNumber}}static splitChapter(e,t,s){let r=s.filter(s=>s.page>=e.startPage&&s.page<t),a=s.filter(s=>s.page>=t&&s.page<=e.endPage),l=r.map(e=>e.md||e.text).join("\n\n"),i=a.map(e=>e.md||e.text).join("\n\n");return[{id:`${e.id}-part1`,title:`${e.title} (Part 1)`,startPage:e.startPage,endPage:t-1,content:l,previewText:this.extractPreview(l),chapterNumber:e.chapterNumber},{id:`${e.id}-part2`,title:`${e.title} (Part 2)`,startPage:t,endPage:e.endPage,content:i,previewText:this.extractPreview(i),chapterNumber:e.chapterNumber?e.chapterNumber+1:null}]}}let n={easy:{MCQ:20,TRUE_FALSE:20,FILL_IN_BLANK:20,SHORT_ANSWER:10,LONG_ANSWER:10},medium:{MCQ:20,TRUE_FALSE:20,FILL_IN_BLANK:20,SHORT_ANSWER:10,LONG_ANSWER:10},hard:{MCQ:15,TRUE_FALSE:15,FILL_IN_BLANK:10,SHORT_ANSWER:10,LONG_ANSWER:10}};function d({onChange:e}){let[r,a]=(0,s.useState)(n),[l,i]=(0,s.useState)(!1);(0,s.useEffect)(()=>{e(r)},[r,e]);let d=Object.values(r).reduce((e,t)=>e+Object.values(t).reduce((e,t)=>e+t,0),0);return(0,t.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>i(!l),className:"flex items-center justify-between w-full text-left",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Question Bank Configuration"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Auto-generate ",d," questions per chapter"]})]}),(0,t.jsx)("span",{className:"text-indigo-600 text-sm font-medium",children:l?"Hide":"Customize"})]}),l&&(0,t.jsxs)("div",{className:"mt-4 space-y-6",children:[["easy","medium","hard"].map(e=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:[e," Difficulty"]}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3",children:["MCQ","TRUE_FALSE","FILL_IN_BLANK","SHORT_ANSWER","LONG_ANSWER"].map(s=>(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] text-gray-500 mb-1",children:s.replace(/_/g," ")}),(0,t.jsx)("input",{type:"number",min:"0",max:"100",value:r[e][s]||0,onChange:t=>{var r;return r=parseInt(t.target.value)||0,void a(t=>({...t,[e]:{...t[e],[s]:r}}))},className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-xs border p-1"})]},s))})]},e)),(0,t.jsx)("div",{className:"text-xs text-gray-500 italic border-t pt-2",children:"* Questions will be generated in the background after chapter processing is complete."})]})]})}function o({boards:n,programs:o,subjects:c}){let m=(0,a.useRouter)(),[u,h]=(0,s.useState)("individual"),[p,x]=(0,s.useState)(!1),[g,b]=(0,s.useState)(""),[f,j]=(0,s.useState)([]),[v,N]=(0,s.useState)(null),[y,w]=(0,s.useState)(!1),[C,S]=(0,s.useState)([]),[P,k]=(0,s.useState)([]),[A,T]=(0,s.useState)(""),[L,F]=(0,s.useState)([]),[E,I]=(0,s.useState)(null),O=g?c.filter(e=>e.program.id===g):c;async function R(){if(!v)return void l.toast.error("Please select a textbook PDF");w(!0);try{let e=new FormData;e.append("file",v);let t=await fetch("/api/extract-pdf-text",{method:"POST",body:e});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to extract PDF text")}let{pages:s}=await t.json(),r=await i.detectChapters(s);k(s),S(r),l.toast.success(`Detected ${r.length} chapter(s) - Ready to save!`)}catch(e){l.toast.error(e.message||"Failed to analyze textbook"),console.error("Textbook analysis error:",e)}finally{w(!1)}}async function B(e){if(e.preventDefault(),0===f.length)return void l.toast.error("Please select at least one PDF file");if(f.filter(e=>!e.subjectId).length>0)return void l.toast.error("Please select a subject for all files");x(!0);let t=0,s=0;for(let e=0;e<f.length;e++){let a=f[e];j(t=>{let s=[...t];return s[e]={...s[e],status:"uploading"},s});try{let l=new FormData;l.append("file",a.file),l.append("title",a.title),l.append("subjectId",a.subjectId),a.chapterNumber&&l.append("chapterNumber",a.chapterNumber),a.accessibleBoards.length>0&&a.accessibleBoards.forEach(e=>{l.append("accessibleBoards",e)}),E&&l.append("questionConfig",JSON.stringify(E));let i=await (0,r.ingestChapterAsync)(l);i.success?(t++,j(t=>{let s=[...t];return s[e]={...s[e],status:"success"},s})):(s++,j(t=>{let s=[...t];return s[e]={...s[e],status:"error",error:i.error},s}))}catch(r){s++;let t=r instanceof Error?r.message:"Unknown error";j(s=>{let r=[...s];return r[e]={...r[e],status:"error",error:t},r})}}t>0&&l.toast.success(`Started processing ${t} chapter(s).`),s>0&&l.toast.error(`Failed to upload ${s} chapter(s).`),x(!1),t>0&&0===s&&setTimeout(()=>{m.push("/admin/chapters"),m.refresh()},1e3)}async function $(t){if(t.preventDefault(),!A)return void l.toast.error("Please select a subject");if(0===C.length)return void l.toast.error("No chapters detected. Please analyze the textbook first.");x(!0);try{let t=new FormData;t.append("subjectId",A),t.append("chapters",JSON.stringify(C)),t.append("fullPages",JSON.stringify(P)),L.length>0&&L.forEach(e=>{t.append("accessibleBoards",e)}),v&&t.append("file",v),E&&t.append("questionConfig",JSON.stringify(E));let{batchCreateChaptersAsync:s}=await e.A(665808),r=await s(t);r.success?(l.toast.success(r.message||`Created ${C.length} chapters - Processing in background`),m.push("/admin/chapters"),m.refresh()):(l.toast.error(r.error||"Failed to create chapters"),x(!1))}catch(e){l.toast.error(e.message||"Failed to create chapters"),x(!1)}}return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Upload Mode"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",checked:"individual"===u,onChange:()=>h("individual"),className:"w-4 h-4 text-indigo-600"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Individual Chapters (up to 5 files)"})]}),(0,t.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",checked:"textbook"===u,onChange:()=>h("textbook"),className:"w-4 h-4 text-indigo-600"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Whole Textbook (auto-split)"})]})]})]}),"individual"===u&&(0,t.jsxs)("form",{onSubmit:B,className:"space-y-6 bg-white p-6 rounded-lg shadow",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Program (Optional)"}),(0,t.jsxs)("select",{value:g,onChange:e=>b(e.target.value?parseInt(e.target.value):""),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm border p-2",children:[(0,t.jsx)("option",{value:"",children:"All Programs"}),o.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (",e.board.name,e.institution?` - ${e.institution.name}`:"",")"]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["PDF Files *",f.length>0&&(0,t.jsxs)("span",{className:"ml-2 text-sm text-gray-500",children:["(",f.filter(e=>"success"===e.status).length,"/",f.length," uploaded)"]})]}),(0,t.jsx)("input",{type:"file",accept:".pdf",multiple:!0,onChange:function(e){let t=e.target.files;if(!t||0===t.length)return void j([]);if(t.length>5){l.toast.error("Maximum 5 files allowed per upload"),e.target.value="";return}let s=Array.from(t).filter(e=>e.size>0x6400000);if(s.length>0){l.toast.error(`${s.length} file(s) too large. Maximum size is 100MB.`),e.target.value="";return}j(Array.from(t).map(e=>({file:e,status:"pending",title:e.name.replace(/\.pdf$/i,""),subjectId:"",chapterNumber:"",accessibleBoards:[]})))},disabled:p,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 disabled:opacity-50"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Upload up to 5 PDF files (max 100MB each)."})]}),f.length>0&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900",children:"Files to Upload"}),f.map((e,s)=>(0,t.jsxs)("div",{className:"p-4 border rounded-md bg-gray-50 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium truncate",children:e.file.name}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[(e.file.size/1024/1024).toFixed(2)," MB"]})]}),"pending"!==e.status&&(0,t.jsx)("span",{className:`ml-2 px-2 py-1 text-xs font-semibold rounded-full ${"uploading"===e.status?"bg-blue-100 text-blue-800":"success"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.status})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Title *"}),(0,t.jsx)("input",{type:"text",value:e.title,onChange:e=>{let t=[...f];t[s].title=e.target.value,j(t)},disabled:p,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm border p-2"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Chapter Number"}),(0,t.jsx)("input",{type:"number",value:e.chapterNumber,onChange:e=>{let t=[...f];t[s].chapterNumber=e.target.value,j(t)},disabled:p,placeholder:"Optional",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm border p-2"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Subject *"}),(0,t.jsxs)("select",{value:e.subjectId,onChange:e=>{let t=[...f];t[s].subjectId=e.target.value,j(t)},disabled:p,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm border p-2",children:[(0,t.jsx)("option",{value:"",children:"Select Subject"}),O.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (",e.program.name," - ",e.program.board.name,")"]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Accessible Boards"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Hold Ctrl/Cmd to select multiple."}),(0,t.jsxs)("select",{multiple:!0,value:e.accessibleBoards,onChange:e=>{let t=Array.from(e.target.selectedOptions,e=>e.value),r=[...f];r[s].accessibleBoards=t,j(r)},disabled:p,className:"block w-full rounded-md border-gray-300 shadow-sm text-sm border p-2 h-24",children:[(0,t.jsx)("option",{value:"GLOBAL",children:"GLOBAL (All Boards)"}),n.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),e.error&&(0,t.jsxs)("div",{className:"text-xs text-red-600 bg-red-50 p-2 rounded",children:["Error: ",e.error]})]},s))]}),(0,t.jsx)(d,{onChange:I}),(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>m.back(),disabled:p,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:p||0===f.length,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Ingesting...":`Ingest ${f.length} Chapter(s)`})]})]}),"textbook"===u&&(0,t.jsxs)("form",{onSubmit:$,className:"space-y-6 bg-white p-6 rounded-lg shadow",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Textbook PDF *"}),(0,t.jsx)("input",{type:"file",accept:".pdf",onChange:e=>{let t=e.target.files?.[0];if(t){if(t.size>524288e3){l.toast.error("File too large. Maximum size is 500MB."),e.target.value="";return}N(t),S([])}},disabled:p||y,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Upload a complete textbook PDF (max 500MB). System will auto-detect chapters."})]}),v&&0===C.length&&(0,t.jsx)("div",{children:y?(0,t.jsx)("div",{className:"w-full border border-blue-200 rounded-lg p-6 bg-blue-50",children:(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Analyzing Textbook..."}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Processing PDF with LlamaParse AI"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"This may take 1-3 minutes for large files. Please wait..."})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0s"}}),(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})]})}):(0,t.jsx)("button",{type:"button",onClick:R,disabled:y,className:"w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:"Analyze & Detect Chapters"})}),C.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"font-medium text-gray-900 mb-4",children:["Detected ",C.length," Chapter(s)"]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-4 max-h-96 overflow-y-auto",children:C.map((e,s)=>(0,t.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("span",{className:"text-xs font-semibold text-gray-500",children:["Chapter ",s+1]}),(0,t.jsx)("button",{type:"button",onClick:()=>{var t;return t=e.id,void S(e=>e.filter(e=>e.id!==t))},className:"text-red-600 hover:text-red-800 text-xs",children:"Delete"})]}),(0,t.jsx)("input",{type:"text",value:e.title,onChange:t=>{var s,r;return s=e.id,r={title:t.target.value},void S(e=>e.map(e=>e.id===s?{...e,...r}:e))},className:"w-full text-sm font-medium border rounded px-2 py-1"}),(0,t.jsxs)("div",{className:"text-xs text-gray-600",children:["Pages ",e.startPage,"-",e.endPage]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 line-clamp-3",children:e.previewText})]},e.id))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject *"}),(0,t.jsxs)("select",{value:A,onChange:e=>T(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm border p-2",children:[(0,t.jsx)("option",{value:"",children:"Select Subject"}),c.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (",e.program.name," - ",e.program.board.name,")"]},e.id))]}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"All detected chapters will be created under this subject."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Accessible Boards"}),(0,t.jsxs)("select",{multiple:!0,value:L,onChange:e=>{F(Array.from(e.target.selectedOptions,e=>e.value))},className:"block w-full rounded-md border-gray-300 shadow-sm text-sm border p-2 h-24",children:[(0,t.jsx)("option",{value:"GLOBAL",children:"GLOBAL (All Boards)"}),n.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"applies to all chapters in this textbook."})]}),(0,t.jsx)(d,{onChange:I}),(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{S([]),N(null)},disabled:p,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Start Over"}),(0,t.jsx)("button",{type:"submit",disabled:p||!A,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Creating...":`Create ${C.length} Chapters`})]})]})]})]})}e.s(["default",()=>o],506342)},665808,e=>{e.v(t=>Promise.all(["static/chunks/e03b598554306cbb.js"].map(t=>e.l(t))).then(()=>t(513281)))}]);