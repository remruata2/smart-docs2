(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,531278,e=>{"use strict";let s=(0,e.i(475254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>s],531278)},95187,(e,s,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={callServer:function(){return i.callServer},createServerReference:function(){return l.createServerReference},findSourceMapURL:function(){return d.findSourceMapURL}};for(var t in a)Object.defineProperty(r,t,{enumerable:!0,get:a[t]});let i=e.r(132120),d=e.r(92245),l=e.r(235326)},871689,e=>{"use strict";let s=(0,e.i(475254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],871689)},356909,e=>{"use strict";let s=(0,e.i(475254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>s],356909)},99294,e=>{"use strict";var s=e.i(843476),r=e.i(271645),a=e.i(618566),t=e.i(522016),i=e.i(921131),d=e.i(531278),l=e.i(871689),n=e.i(356909),o=e.i(95187),c=(0,o.createServerReference)("60b9effd6d50e5332c8594e05d04b0fd7a2da46152",o.callServer,void 0,o.findSourceMapURL,"updateUserAction"),m=e.i(846696);function u({user:e}){let[o,u]=(0,r.useState)({username:e.username,password:"",role:e.role,is_active:e.is_active}),[x,h]=(0,r.useState)(!1),[f,g]=(0,r.useState)(null),p=(0,a.useRouter)();(0,r.useEffect)(()=>{u({username:e.username,password:"",role:e.role,is_active:e.is_active})},[e]);let v=e=>{let{name:s,value:r,type:a}=e.target;if("checkbox"===a){let r=e.target.checked;u({...o,[s]:r})}else u({...o,[s]:r})},b=async s=>{if(s.preventDefault(),g(null),h(!0),!o.username){g("Username is required."),h(!1);return}let r=await c(e.id,o);h(!1),r.success&&r.user?(m.toast.success("User updated successfully."),p.push(`/admin/users/${r.user.id}`)):(g(r.error||"Failed to update user. Please try again."),m.toast.error(r.error||"Failed to update user. Please try again."))};return(0,s.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(t.default,{href:`/admin/users/${e.id}`,className:"mr-4 text-gray-500 hover:text-gray-700",children:(0,s.jsx)(l.ArrowLeft,{className:"h-5 w-5"})}),(0,s.jsxs)("h1",{className:"text-2xl font-semibold text-gray-900",children:["Edit User: ",e.username]})]})}),(0,s.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:(0,s.jsxs)("form",{onSubmit:b,children:[(0,s.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[f&&(0,s.jsx)("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4 text-red-700",children:f}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[(0,s.jsxs)("div",{className:"sm:col-span-4",children:[(0,s.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)("input",{type:"text",name:"username",id:"username",value:o.username,onChange:v,required:!0,className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-base border-gray-300 rounded-md h-8 px-4"})})]}),(0,s.jsxs)("div",{className:"sm:col-span-4",children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password (leave blank to keep current)"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)("input",{type:"password",name:"password",id:"password",value:o.password,onChange:v,className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-base border-gray-300 rounded-md h-8 px-4"})})]}),(0,s.jsxs)("div",{className:"sm:col-span-3",children:[(0,s.jsx)("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"Role"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsxs)("select",{id:"role",name:"role",value:o.role,onChange:v,className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-base border-gray-300 rounded-md h-8 px-4",children:[(0,s.jsx)("option",{value:i.UserRole.institution,children:"Institution"}),(0,s.jsx)("option",{value:i.UserRole.admin,children:"Admin"})]})})]}),(0,s.jsx)("div",{className:"sm:col-span-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{id:"is_active",name:"is_active",type:"checkbox",checked:o.is_active,onChange:v,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]})})]})]}),(0,s.jsxs)("div",{className:"px-4 py-3 bg-gray-50 text-right sm:px-6",children:[(0,s.jsx)(t.default,{href:`/admin/users/${e.id}`,className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 mr-3",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:x,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Loader2,{className:"animate-spin -ml-1 mr-3 h-5 w-5"}),"Saving..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Save,{className:"-ml-1 mr-3 h-5 w-5"}),"Save Changes"]})})]})]})})]})}e.s(["default",()=>u],99294)}]);